(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function bh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const yt={},oo=[],Sr=()=>{},fT=()=>!1,Hu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Th=t=>t.startsWith("onUpdate:"),rn=Object.assign,Eh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},pT=Object.prototype.hasOwnProperty,ct=(t,e)=>pT.call(t,e),Ve=Array.isArray,ao=t=>Qa(t)==="[object Map]",Mo=t=>Qa(t)==="[object Set]",Xp=t=>Qa(t)==="[object Date]",He=t=>typeof t=="function",Pt=t=>typeof t=="string",mr=t=>typeof t=="symbol",gt=t=>t!==null&&typeof t=="object",Bv=t=>(gt(t)||He(t))&&He(t.then)&&He(t.catch),jv=Object.prototype.toString,Qa=t=>jv.call(t),mT=t=>Qa(t).slice(8,-1),qv=t=>Qa(t)==="[object Object]",Ah=t=>Pt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ha=bh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wu=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},gT=/-(\w)/g,or=Wu(t=>t.replace(gT,(e,n)=>n?n.toUpperCase():"")),vT=/\B([A-Z])/g,Xs=Wu(t=>t.replace(vT,"-$1").toLowerCase()),zu=Wu(t=>t.charAt(0).toUpperCase()+t.slice(1)),Wc=Wu(t=>t?`on${zu(t)}`:""),Ds=(t,e)=>!Object.is(t,e),zl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},kd=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},uu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},yT=t=>{const e=Pt(t)?Number(t):NaN;return isNaN(e)?t:e};let Jp;const Yu=()=>Jp||(Jp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Pn(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Pt(r)?TT(r):Pn(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Pt(t)||gt(t))return t}const _T=/;(?![^(]*\))/g,wT=/:([^]+)/,bT=/\/\*[^]*?\*\//g;function TT(t){const e={};return t.replace(bT,"").split(_T).forEach(n=>{if(n){const r=n.split(wT);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ye(t){let e="";if(Pt(t))e=t;else if(Ve(t))for(let n=0;n<t.length;n++){const r=Ye(t[n]);r&&(e+=r+" ")}else if(gt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function tn(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Pt(e)&&(t.class=Ye(e)),n&&(t.style=Pn(n)),t}const ET="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",AT=bh(ET);function Hv(t){return!!t||t===""}function IT(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=ki(t[r],e[r]);return n}function ki(t,e){if(t===e)return!0;let n=Xp(t),r=Xp(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=mr(t),r=mr(e),n||r)return t===e;if(n=Ve(t),r=Ve(e),n||r)return n&&r?IT(t,e):!1;if(n=gt(t),r=gt(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(a&&!u||!a&&u||!ki(t[o],e[o]))return!1}}return String(t)===String(e)}function Ih(t,e){return t.findIndex(n=>ki(n,e))}const Wv=t=>!!(t&&t.__v_isRef===!0),$e=t=>Pt(t)?t:t==null?"":Ve(t)||gt(t)&&(t.toString===jv||!He(t.toString))?Wv(t)?$e(t.value):JSON.stringify(t,zv,2):String(t),zv=(t,e)=>Wv(e)?zv(t,e.value):ao(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[zc(r,i)+" =>"]=s,n),{})}:Mo(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>zc(n))}:mr(e)?zc(e):gt(e)&&!Ve(e)&&!qv(e)?String(e):e,zc=(t,e="")=>{var n;return mr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wn;class PT{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=wn,!e&&wn&&(this.index=(wn.scopes||(wn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=wn;try{return wn=this,e()}finally{wn=n}}}on(){++this._on===1&&(this.prevScope=wn,wn=this)}off(){this._on>0&&--this._on===0&&(wn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Yv(){return wn}function kT(t,e=!1){wn&&wn.cleanups.push(t)}let wt;const Yc=new WeakSet;class Kv{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,wn&&wn.active&&wn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yc.has(this)&&(Yc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Qv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zp(this),Xv(this);const e=wt,n=hr;wt=this,hr=!0;try{return this.fn()}finally{Jv(this),wt=e,hr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Rh(e);this.deps=this.depsTail=void 0,Zp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Rd(this)&&this.run()}get dirty(){return Rd(this)}}let Gv=0,fa,pa;function Qv(t,e=!1){if(t.flags|=8,e){t.next=pa,pa=t;return}t.next=fa,fa=t}function Ph(){Gv++}function kh(){if(--Gv>0)return;if(pa){let e=pa;for(pa=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;fa;){let e=fa;for(fa=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Xv(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Jv(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Rh(r),RT(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Rd(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Zv(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Zv(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ra)||(t.globalVersion=Ra,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Rd(t))))return;t.flags|=2;const e=t.dep,n=wt,r=hr;wt=t,hr=!0;try{Xv(t);const s=t.fn(t._value);(e.version===0||Ds(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{wt=n,hr=r,Jv(t),t.flags&=-3}}function Rh(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Rh(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function RT(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let hr=!0;const ey=[];function rs(){ey.push(hr),hr=!1}function ss(){const t=ey.pop();hr=t===void 0?!0:t}function Zp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=wt;wt=void 0;try{e()}finally{wt=n}}}let Ra=0;class CT{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ch{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!wt||!hr||wt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==wt)n=this.activeLink=new CT(wt,this),wt.deps?(n.prevDep=wt.depsTail,wt.depsTail.nextDep=n,wt.depsTail=n):wt.deps=wt.depsTail=n,ty(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=wt.depsTail,n.nextDep=void 0,wt.depsTail.nextDep=n,wt.depsTail=n,wt.deps===n&&(wt.deps=r)}return n}trigger(e){this.version++,Ra++,this.notify(e)}notify(e){Ph();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{kh()}}}function ty(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)ty(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const cu=new WeakMap,bi=Symbol(""),Cd=Symbol(""),Ca=Symbol("");function En(t,e,n){if(hr&&wt){let r=cu.get(t);r||cu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Ch),s.map=r,s.key=n),s.track()}}function Kr(t,e,n,r,s,i){const o=cu.get(t);if(!o){Ra++;return}const a=u=>{u&&u.trigger()};if(Ph(),e==="clear")o.forEach(a);else{const u=Ve(t),c=u&&Ah(n);if(u&&n==="length"){const d=Number(r);o.forEach((f,p)=>{(p==="length"||p===Ca||!mr(p)&&p>=d)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Ca)),e){case"add":u?c&&a(o.get("length")):(a(o.get(bi)),ao(t)&&a(o.get(Cd)));break;case"delete":u||(a(o.get(bi)),ao(t)&&a(o.get(Cd)));break;case"set":ao(t)&&a(o.get(bi));break}}kh()}function ST(t,e){const n=cu.get(t);return n&&n.get(e)}function Yi(t){const e=at(t);return e===t?e:(En(e,"iterate",Ca),nr(t)?e:e.map(un))}function Ku(t){return En(t=at(t),"iterate",Ca),t}const DT={__proto__:null,[Symbol.iterator](){return Kc(this,Symbol.iterator,un)},concat(...t){return Yi(this).concat(...t.map(e=>Ve(e)?Yi(e):e))},entries(){return Kc(this,"entries",t=>(t[1]=un(t[1]),t))},every(t,e){return Hr(this,"every",t,e,void 0,arguments)},filter(t,e){return Hr(this,"filter",t,e,n=>n.map(un),arguments)},find(t,e){return Hr(this,"find",t,e,un,arguments)},findIndex(t,e){return Hr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Hr(this,"findLast",t,e,un,arguments)},findLastIndex(t,e){return Hr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Hr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Gc(this,"includes",t)},indexOf(...t){return Gc(this,"indexOf",t)},join(t){return Yi(this).join(t)},lastIndexOf(...t){return Gc(this,"lastIndexOf",t)},map(t,e){return Hr(this,"map",t,e,void 0,arguments)},pop(){return Jo(this,"pop")},push(...t){return Jo(this,"push",t)},reduce(t,...e){return em(this,"reduce",t,e)},reduceRight(t,...e){return em(this,"reduceRight",t,e)},shift(){return Jo(this,"shift")},some(t,e){return Hr(this,"some",t,e,void 0,arguments)},splice(...t){return Jo(this,"splice",t)},toReversed(){return Yi(this).toReversed()},toSorted(t){return Yi(this).toSorted(t)},toSpliced(...t){return Yi(this).toSpliced(...t)},unshift(...t){return Jo(this,"unshift",t)},values(){return Kc(this,"values",un)}};function Kc(t,e,n){const r=Ku(t),s=r[e]();return r!==t&&!nr(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const MT=Array.prototype;function Hr(t,e,n,r,s,i){const o=Ku(t),a=o!==t&&!nr(t),u=o[e];if(u!==MT[e]){const f=u.apply(t,i);return a?un(f):f}let c=n;o!==t&&(a?c=function(f,p){return n.call(this,un(f),p,t)}:n.length>2&&(c=function(f,p){return n.call(this,f,p,t)}));const d=u.call(o,c,r);return a&&s?s(d):d}function em(t,e,n,r){const s=Ku(t);let i=n;return s!==t&&(nr(t)?n.length>3&&(i=function(o,a,u){return n.call(this,o,a,u,t)}):i=function(o,a,u){return n.call(this,o,un(a),u,t)}),s[e](i,...r)}function Gc(t,e,n){const r=at(t);En(r,"iterate",Ca);const s=r[e](...n);return(s===-1||s===!1)&&Mh(n[0])?(n[0]=at(n[0]),r[e](...n)):s}function Jo(t,e,n=[]){rs(),Ph();const r=at(t)[e].apply(t,n);return kh(),ss(),r}const xT=bh("__proto__,__v_isRef,__isVue"),ny=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(mr));function OT(t){mr(t)||(t=String(t));const e=at(this);return En(e,"has",t),e.hasOwnProperty(t)}class ry{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?HT:ay:i?oy:iy).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Ve(e);if(!s){let u;if(o&&(u=DT[n]))return u;if(n==="hasOwnProperty")return OT}const a=Reflect.get(e,n,Gt(e)?e:r);return(mr(n)?ny.has(n):xT(n))||(s||En(e,"get",n),i)?a:Gt(a)?o&&Ah(n)?a:a.value:gt(a)?s?ly(a):Js(a):a}}class sy extends ry{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const u=Fs(i);if(!nr(r)&&!Fs(r)&&(i=at(i),r=at(r)),!Ve(e)&&Gt(i)&&!Gt(r))return u?!1:(i.value=r,!0)}const o=Ve(e)&&Ah(n)?Number(n)<e.length:ct(e,n),a=Reflect.set(e,n,r,Gt(e)?e:s);return e===at(s)&&(o?Ds(r,i)&&Kr(e,"set",n,r):Kr(e,"add",n,r)),a}deleteProperty(e,n){const r=ct(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Kr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!mr(n)||!ny.has(n))&&En(e,"has",n),r}ownKeys(e){return En(e,"iterate",Ve(e)?"length":bi),Reflect.ownKeys(e)}}class NT extends ry{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const VT=new sy,LT=new NT,FT=new sy(!0);const Sd=t=>t,Cl=t=>Reflect.getPrototypeOf(t);function UT(t,e,n){return function(...r){const s=this.__v_raw,i=at(s),o=ao(i),a=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=s[t](...r),d=n?Sd:e?du:un;return!e&&En(i,"iterate",u?Cd:bi),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[d(f[0]),d(f[1])]:d(f),done:p}},[Symbol.iterator](){return this}}}}function Sl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function $T(t,e){const n={get(s){const i=this.__v_raw,o=at(i),a=at(s);t||(Ds(s,a)&&En(o,"get",s),En(o,"get",a));const{has:u}=Cl(o),c=e?Sd:t?du:un;if(u.call(o,s))return c(i.get(s));if(u.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&En(at(s),"iterate",bi),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=at(i),a=at(s);return t||(Ds(s,a)&&En(o,"has",s),En(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,u=at(a),c=e?Sd:t?du:un;return!t&&En(u,"iterate",bi),a.forEach((d,f)=>s.call(i,c(d),c(f),o))}};return rn(n,t?{add:Sl("add"),set:Sl("set"),delete:Sl("delete"),clear:Sl("clear")}:{add(s){!e&&!nr(s)&&!Fs(s)&&(s=at(s));const i=at(this);return Cl(i).has.call(i,s)||(i.add(s),Kr(i,"add",s,s)),this},set(s,i){!e&&!nr(i)&&!Fs(i)&&(i=at(i));const o=at(this),{has:a,get:u}=Cl(o);let c=a.call(o,s);c||(s=at(s),c=a.call(o,s));const d=u.call(o,s);return o.set(s,i),c?Ds(i,d)&&Kr(o,"set",s,i):Kr(o,"add",s,i),this},delete(s){const i=at(this),{has:o,get:a}=Cl(i);let u=o.call(i,s);u||(s=at(s),u=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return u&&Kr(i,"delete",s,void 0),c},clear(){const s=at(this),i=s.size!==0,o=s.clear();return i&&Kr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=UT(s,t,e)}),n}function Sh(t,e){const n=$T(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ct(n,s)&&s in r?n:r,s,i)}const BT={get:Sh(!1,!1)},jT={get:Sh(!1,!0)},qT={get:Sh(!0,!1)};const iy=new WeakMap,oy=new WeakMap,ay=new WeakMap,HT=new WeakMap;function WT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zT(t){return t.__v_skip||!Object.isExtensible(t)?0:WT(mT(t))}function Js(t){return Fs(t)?t:Dh(t,!1,VT,BT,iy)}function YT(t){return Dh(t,!1,FT,jT,oy)}function ly(t){return Dh(t,!0,LT,qT,ay)}function Dh(t,e,n,r,s){if(!gt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=zT(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function lo(t){return Fs(t)?lo(t.__v_raw):!!(t&&t.__v_isReactive)}function Fs(t){return!!(t&&t.__v_isReadonly)}function nr(t){return!!(t&&t.__v_isShallow)}function Mh(t){return t?!!t.__v_raw:!1}function at(t){const e=t&&t.__v_raw;return e?at(e):t}function KT(t){return!ct(t,"__v_skip")&&Object.isExtensible(t)&&kd(t,"__v_skip",!0),t}const un=t=>gt(t)?Js(t):t,du=t=>gt(t)?ly(t):t;function Gt(t){return t?t.__v_isRef===!0:!1}function _e(t){return GT(t,!1)}function GT(t,e){return Gt(t)?t:new QT(t,e)}class QT{constructor(e,n){this.dep=new Ch,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:at(e),this._value=n?e:un(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||nr(e)||Fs(e);e=r?e:at(e),Ds(e,n)&&(this._rawValue=e,this._value=r?e:un(e),this.dep.trigger())}}function N(t){return Gt(t)?t.value:t}function XT(t){return He(t)?t():N(t)}const JT={get:(t,e,n)=>e==="__v_raw"?t:N(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Gt(s)&&!Gt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function uy(t){return lo(t)?t:new Proxy(t,JT)}class ZT{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ST(at(this._object),this._key)}}class eE{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Sa(t,e,n){return Gt(t)?t:He(t)?new eE(t):gt(t)&&arguments.length>1?tE(t,e,n):_e(t)}function tE(t,e,n){const r=t[e];return Gt(r)?r:new ZT(t,e,n)}class nE{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Ch(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ra-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&wt!==this)return Qv(this,!0),!0}get value(){const e=this.dep.track();return Zv(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function rE(t,e,n=!1){let r,s;return He(t)?r=t:(r=t.get,s=t.set),new nE(r,s,n)}const Dl={},hu=new WeakMap;let mi;function sE(t,e=!1,n=mi){if(n){let r=hu.get(n);r||hu.set(n,r=[]),r.push(t)}}function iE(t,e,n=yt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:u}=n,c=U=>s?U:nr(U)||s===!1||s===0?Gr(U,1):Gr(U);let d,f,p,_,P=!1,D=!1;if(Gt(t)?(f=()=>t.value,P=nr(t)):lo(t)?(f=()=>c(t),P=!0):Ve(t)?(D=!0,P=t.some(U=>lo(U)||nr(U)),f=()=>t.map(U=>{if(Gt(U))return U.value;if(lo(U))return c(U);if(He(U))return u?u(U,2):U()})):He(t)?e?f=u?()=>u(t,2):t:f=()=>{if(p){rs();try{p()}finally{ss()}}const U=mi;mi=d;try{return u?u(t,3,[_]):t(_)}finally{mi=U}}:f=Sr,e&&s){const U=f,ee=s===!0?1/0:s;f=()=>Gr(U(),ee)}const S=Yv(),O=()=>{d.stop(),S&&S.active&&Eh(S.effects,d)};if(i&&e){const U=e;e=(...ee)=>{U(...ee),O()}}let $=D?new Array(t.length).fill(Dl):Dl;const F=U=>{if(!(!(d.flags&1)||!d.dirty&&!U))if(e){const ee=d.run();if(s||P||(D?ee.some((W,T)=>Ds(W,$[T])):Ds(ee,$))){p&&p();const W=mi;mi=d;try{const T=[ee,$===Dl?void 0:D&&$[0]===Dl?[]:$,_];$=ee,u?u(e,3,T):e(...T)}finally{mi=W}}}else d.run()};return a&&a(F),d=new Kv(f),d.scheduler=o?()=>o(F,!1):F,_=U=>sE(U,!1,d),p=d.onStop=()=>{const U=hu.get(d);if(U){if(u)u(U,4);else for(const ee of U)ee();hu.delete(d)}},e?r?F(!0):$=d.run():o?o(F.bind(null,!0),!0):d.run(),O.pause=d.pause.bind(d),O.resume=d.resume.bind(d),O.stop=O,O}function Gr(t,e=1/0,n){if(e<=0||!gt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Gt(t))Gr(t.value,e,n);else if(Ve(t))for(let r=0;r<t.length;r++)Gr(t[r],e,n);else if(Mo(t)||ao(t))t.forEach(r=>{Gr(r,e,n)});else if(qv(t)){for(const r in t)Gr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Gr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xa(t,e,n,r){try{return r?t(...r):t()}catch(s){Gu(s,e,n)}}function gr(t,e,n,r){if(He(t)){const s=Xa(t,e,n,r);return s&&Bv(s)&&s.catch(i=>{Gu(i,e,n)}),s}if(Ve(t)){const s=[];for(let i=0;i<t.length;i++)s.push(gr(t[i],e,n,r));return s}}function Gu(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||yt;if(e){let a=e.parent;const u=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](t,u,c)===!1)return}a=a.parent}if(i){rs(),Xa(i,null,10,[t,u,c]),ss();return}}oE(t,n,s,r,o)}function oE(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const On=[];let Er=-1;const uo=[];let ws=null,Qi=0;const cy=Promise.resolve();let fu=null;function Fn(t){const e=fu||cy;return t?e.then(this?t.bind(this):t):e}function aE(t){let e=Er+1,n=On.length;for(;e<n;){const r=e+n>>>1,s=On[r],i=Da(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function xh(t){if(!(t.flags&1)){const e=Da(t),n=On[On.length-1];!n||!(t.flags&2)&&e>=Da(n)?On.push(t):On.splice(aE(e),0,t),t.flags|=1,dy()}}function dy(){fu||(fu=cy.then(fy))}function lE(t){Ve(t)?uo.push(...t):ws&&t.id===-1?ws.splice(Qi+1,0,t):t.flags&1||(uo.push(t),t.flags|=1),dy()}function tm(t,e,n=Er+1){for(;n<On.length;n++){const r=On[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;On.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function hy(t){if(uo.length){const e=[...new Set(uo)].sort((n,r)=>Da(n)-Da(r));if(uo.length=0,ws){ws.push(...e);return}for(ws=e,Qi=0;Qi<ws.length;Qi++){const n=ws[Qi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ws=null,Qi=0}}const Da=t=>t.id==null?t.flags&2?-1:1/0:t.id;function fy(t){try{for(Er=0;Er<On.length;Er++){const e=On[Er];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Xa(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Er<On.length;Er++){const e=On[Er];e&&(e.flags&=-2)}Er=-1,On.length=0,hy(),fu=null,(On.length||uo.length)&&fy()}}let nn=null,py=null;function pu(t){const e=nn;return nn=t,py=t&&t.type.__scopeId||null,e}function Qe(t,e=nn,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&mm(-1);const i=pu(e);let o;try{o=t(...s)}finally{pu(i),r._d&&mm(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Mt(t,e){if(nn===null)return t;const n=tc(nn),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,u=yt]=e[s];i&&(He(i)&&(i={mounted:i,updated:i}),i.deep&&Gr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:u}))}return t}function di(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let u=a.dir[r];u&&(rs(),gr(u,n,8,[t.el,a,t,e]),ss())}}const my=Symbol("_vte"),gy=t=>t.__isTeleport,ma=t=>t&&(t.disabled||t.disabled===""),nm=t=>t&&(t.defer||t.defer===""),rm=t=>typeof SVGElement<"u"&&t instanceof SVGElement,sm=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Dd=(t,e)=>{const n=t&&t.to;return Pt(n)?e?e(n):null:n},vy={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,u,c){const{mc:d,pc:f,pbc:p,o:{insert:_,querySelector:P,createText:D,createComment:S}}=c,O=ma(e.props);let{shapeFlag:$,children:F,dynamicChildren:U}=e;if(t==null){const ee=e.el=D(""),W=e.anchor=D("");_(ee,n,r),_(W,n,r);const T=(g,w)=>{$&16&&(s&&s.isCE&&(s.ce._teleportTarget=g),d(F,g,w,s,i,o,a,u))},b=()=>{const g=e.target=Dd(e.props,P),w=yy(g,e,D,_);g&&(o!=="svg"&&rm(g)?o="svg":o!=="mathml"&&sm(g)&&(o="mathml"),O||(T(g,w),Yl(e,!1)))};O&&(T(n,W),Yl(e,!0)),nm(e.props)?(e.el.__isMounted=!1,xn(()=>{b(),delete e.el.__isMounted},i)):b()}else{if(nm(e.props)&&t.el.__isMounted===!1){xn(()=>{vy.process(t,e,n,r,s,i,o,a,u,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const ee=e.anchor=t.anchor,W=e.target=t.target,T=e.targetAnchor=t.targetAnchor,b=ma(t.props),g=b?n:W,w=b?ee:T;if(o==="svg"||rm(W)?o="svg":(o==="mathml"||sm(W))&&(o="mathml"),U?(p(t.dynamicChildren,U,g,s,i,o,a),Vh(t,e,!0)):u||f(t,e,g,w,s,i,o,a,!1),O)b?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Ml(e,n,ee,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const R=e.target=Dd(e.props,P);R&&Ml(e,R,null,c,0)}else b&&Ml(e,W,T,c,1);Yl(e,O)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:u,targetStart:c,targetAnchor:d,target:f,props:p}=t;if(f&&(s(c),s(d)),i&&s(u),o&16){const _=i||!ma(p);for(let P=0;P<a.length;P++){const D=a[P];r(D,e,n,_,!!D.dynamicChildren)}}},move:Ml,hydrate:uE};function Ml(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:u,children:c,props:d}=t,f=i===2;if(f&&r(o,e,n),(!f||ma(d))&&u&16)for(let p=0;p<c.length;p++)s(c[p],e,n,2);f&&r(a,e,n)}function uE(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:u,insert:c,createText:d}},f){const p=e.target=Dd(e.props,u);if(p){const _=ma(e.props),P=p._lpa||p.firstChild;if(e.shapeFlag&16)if(_)e.anchor=f(o(t),e,a(t),n,r,s,i),e.targetStart=P,e.targetAnchor=P&&o(P);else{e.anchor=o(t);let D=P;for(;D;){if(D&&D.nodeType===8){if(D.data==="teleport start anchor")e.targetStart=D;else if(D.data==="teleport anchor"){e.targetAnchor=D,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}D=o(D)}e.targetAnchor||yy(p,e,d,c),f(P&&o(P),e,p,n,r,s,i)}Yl(e,_)}return e.anchor&&o(e.anchor)}const cE=vy;function Yl(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function yy(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[my]=i,t&&(r(s,t),r(i,t)),i}const bs=Symbol("_leaveCb"),xl=Symbol("_enterCb");function dE(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jt(()=>{t.isMounted=!0}),ky(()=>{t.isUnmounting=!0}),t}const Zn=[Function,Array],_y={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zn,onEnter:Zn,onAfterEnter:Zn,onEnterCancelled:Zn,onBeforeLeave:Zn,onLeave:Zn,onAfterLeave:Zn,onLeaveCancelled:Zn,onBeforeAppear:Zn,onAppear:Zn,onAfterAppear:Zn,onAppearCancelled:Zn},wy=t=>{const e=t.subTree;return e.component?wy(e.component):e},hE={name:"BaseTransition",props:_y,setup(t,{slots:e}){const n=Fh(),r=dE();return()=>{const s=e.default&&Ey(e.default(),!0);if(!s||!s.length)return;const i=by(s),o=at(t),{mode:a}=o;if(r.isLeaving)return Qc(i);const u=im(i);if(!u)return Qc(i);let c=Md(u,o,r,n,f=>c=f);u.type!==In&&Ma(u,c);let d=n.subTree&&im(n.subTree);if(d&&d.type!==In&&!yi(u,d)&&wy(n).type!==In){let f=Md(d,o,r,n);if(Ma(d,f),a==="out-in"&&u.type!==In)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,d=void 0},Qc(i);a==="in-out"&&u.type!==In?f.delayLeave=(p,_,P)=>{const D=Ty(r,d);D[String(d.key)]=d,p[bs]=()=>{_(),p[bs]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{P(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function by(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==In){e=n;break}}return e}const fE=hE;function Ty(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Md(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:_,onAfterLeave:P,onLeaveCancelled:D,onBeforeAppear:S,onAppear:O,onAfterAppear:$,onAppearCancelled:F}=e,U=String(t.key),ee=Ty(n,t),W=(g,w)=>{g&&gr(g,r,9,w)},T=(g,w)=>{const R=w[1];W(g,w),Ve(g)?g.every(k=>k.length<=1)&&R():g.length<=1&&R()},b={mode:o,persisted:a,beforeEnter(g){let w=u;if(!n.isMounted)if(i)w=S||u;else return;g[bs]&&g[bs](!0);const R=ee[U];R&&yi(t,R)&&R.el[bs]&&R.el[bs](),W(w,[g])},enter(g){let w=c,R=d,k=f;if(!n.isMounted)if(i)w=O||c,R=$||d,k=F||f;else return;let I=!1;const j=g[xl]=K=>{I||(I=!0,K?W(k,[g]):W(R,[g]),b.delayedLeave&&b.delayedLeave(),g[xl]=void 0)};w?T(w,[g,j]):j()},leave(g,w){const R=String(t.key);if(g[xl]&&g[xl](!0),n.isUnmounting)return w();W(p,[g]);let k=!1;const I=g[bs]=j=>{k||(k=!0,w(),j?W(D,[g]):W(P,[g]),g[bs]=void 0,ee[R]===t&&delete ee[R])};ee[R]=t,_?T(_,[g,I]):I()},clone(g){const w=Md(g,e,n,r,s);return s&&s(w),w}};return b}function Qc(t){if(Qu(t))return t=Us(t),t.children=null,t}function im(t){if(!Qu(t))return gy(t.type)&&t.children?by(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&He(n.default))return n.default()}}function Ma(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ma(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ey(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Oe?(o.patchFlag&128&&s++,r=r.concat(Ey(o.children,e,a))):(e||o.type!==In)&&r.push(a!=null?Us(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function fn(t,e){return He(t)?rn({name:t.name},e,{setup:t}):t}function Ay(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ga(t,e,n,r,s=!1){if(Ve(t)){t.forEach((P,D)=>ga(P,e&&(Ve(e)?e[D]:e),n,r,s));return}if(co(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ga(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?tc(r.component):r.el,o=s?null:i,{i:a,r:u}=t,c=e&&e.r,d=a.refs===yt?a.refs={}:a.refs,f=a.setupState,p=at(f),_=f===yt?()=>!1:P=>ct(p,P);if(c!=null&&c!==u&&(Pt(c)?(d[c]=null,_(c)&&(f[c]=null)):Gt(c)&&(c.value=null)),He(u))Xa(u,a,12,[o,d]);else{const P=Pt(u),D=Gt(u);if(P||D){const S=()=>{if(t.f){const O=P?_(u)?f[u]:d[u]:u.value;s?Ve(O)&&Eh(O,i):Ve(O)?O.includes(i)||O.push(i):P?(d[u]=[i],_(u)&&(f[u]=d[u])):(u.value=[i],t.k&&(d[t.k]=u.value))}else P?(d[u]=o,_(u)&&(f[u]=o)):D&&(u.value=o,t.k&&(d[t.k]=o))};o?(S.id=-1,xn(S,n)):S()}}}Yu().requestIdleCallback;Yu().cancelIdleCallback;const co=t=>!!t.type.__asyncLoader,Qu=t=>t.type.__isKeepAlive;function pE(t,e){Iy(t,"a",e)}function mE(t,e){Iy(t,"da",e)}function Iy(t,e,n=cn){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Xu(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Qu(s.parent.vnode)&&gE(r,e,n,s),s=s.parent}}function gE(t,e,n,r){const s=Xu(e,t,r,!0);Zs(()=>{Eh(r[e],s)},n)}function Xu(t,e,n=cn,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{rs();const a=Ja(n),u=gr(e,n,t,o);return a(),ss(),u});return r?s.unshift(i):s.push(i),i}}const cs=t=>(e,n=cn)=>{(!Na||t==="sp")&&Xu(t,(...r)=>e(...r),n)},vE=cs("bm"),Jt=cs("m"),Py=cs("bu"),yE=cs("u"),ky=cs("bum"),Zs=cs("um"),_E=cs("sp"),wE=cs("rtg"),bE=cs("rtc");function TE(t,e=cn){Xu("ec",t,e)}const Ry="components";function Es(t,e){return Sy(Ry,t,!0,e)||t}const Cy=Symbol.for("v-ndc");function Ju(t){return Pt(t)?Sy(Ry,t,!1)||t:t||Cy}function Sy(t,e,n=!0,r=!1){const s=nn||cn;if(s){const i=s.type;{const a=a1(i,!1);if(a&&(a===e||a===or(e)||a===zu(or(e))))return i}const o=om(s[t]||i[t],e)||om(s.appContext[t],e);return!o&&r?i:o}}function om(t,e){return t&&(t[e]||t[or(e)]||t[zu(or(e))])}function lt(t,e,n,r){let s;const i=n,o=Ve(t);if(o||Pt(t)){const a=o&&lo(t);let u=!1,c=!1;a&&(u=!nr(t),c=Fs(t),t=Ku(t)),s=new Array(t.length);for(let d=0,f=t.length;d<f;d++)s[d]=e(u?c?du(un(t[d])):un(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(gt(t))if(t[Symbol.iterator])s=Array.from(t,(a,u)=>e(a,u,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let u=0,c=a.length;u<c;u++){const d=a[u];s[u]=e(t[d],d,u,i)}}else s=[];return s}function kn(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Ve(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function Me(t,e,n={},r,s){if(nn.ce||nn.parent&&co(nn.parent)&&nn.parent.ce)return e!=="default"&&(n.name=e),B(),Xe(Oe,null,[it("slot",n,r)],64);let i=t[e];i&&i._c&&(i._d=!1),B();const o=i&&Dy(i(n)),a=n.key||o&&o.key,u=Xe(Oe,{key:(a&&!mr(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),i&&i._c&&(i._d=!0),u}function Dy(t){return t.some(e=>Oa(e)?!(e.type===In||e.type===Oe&&!Dy(e.children)):!0)?t:null}const xd=t=>t?Jy(t)?tc(t):xd(t.parent):null,va=rn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>xd(t.parent),$root:t=>xd(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Oy(t),$forceUpdate:t=>t.f||(t.f=()=>{xh(t.update)}),$nextTick:t=>t.n||(t.n=Fn.bind(t.proxy)),$watch:t=>WE.bind(t)}),Xc=(t,e)=>t!==yt&&!t.__isScriptSetup&&ct(t,e),EE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:u}=t;let c;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Xc(r,e))return o[e]=1,r[e];if(s!==yt&&ct(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&ct(c,e))return o[e]=3,i[e];if(n!==yt&&ct(n,e))return o[e]=4,n[e];Od&&(o[e]=0)}}const d=va[e];let f,p;if(d)return e==="$attrs"&&En(t.attrs,"get",""),d(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==yt&&ct(n,e))return o[e]=4,n[e];if(p=u.config.globalProperties,ct(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Xc(s,e)?(s[e]=n,!0):r!==yt&&ct(r,e)?(r[e]=n,!0):ct(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==yt&&ct(t,o)||Xc(e,o)||(a=i[0])&&ct(a,o)||ct(r,o)||ct(va,o)||ct(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ct(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Vi(){return My().slots}function AE(){return My().attrs}function My(){const t=Fh();return t.setupContext||(t.setupContext=e_(t))}function am(t){return Ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Od=!0;function IE(t){const e=Oy(t),n=t.proxy,r=t.ctx;Od=!1,e.beforeCreate&&lm(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:u,inject:c,created:d,beforeMount:f,mounted:p,beforeUpdate:_,updated:P,activated:D,deactivated:S,beforeDestroy:O,beforeUnmount:$,destroyed:F,unmounted:U,render:ee,renderTracked:W,renderTriggered:T,errorCaptured:b,serverPrefetch:g,expose:w,inheritAttrs:R,components:k,directives:I,filters:j}=e;if(c&&PE(c,r,null),o)for(const ne in o){const fe=o[ne];He(fe)&&(r[ne]=fe.bind(n))}if(s){const ne=s.call(n,n);gt(ne)&&(t.data=Js(ne))}if(Od=!0,i)for(const ne in i){const fe=i[ne],oe=He(fe)?fe.bind(n,n):He(fe.get)?fe.get.bind(n,n):Sr,be=!He(fe)&&He(fe.set)?fe.set.bind(n):Sr,te=ye({get:oe,set:be});Object.defineProperty(r,ne,{enumerable:!0,configurable:!0,get:()=>te.value,set:Ee=>te.value=Ee})}if(a)for(const ne in a)xy(a[ne],r,n,ne);if(u){const ne=He(u)?u.call(n):u;Reflect.ownKeys(ne).forEach(fe=>{ME(fe,ne[fe])})}d&&lm(d,t,"c");function z(ne,fe){Ve(fe)?fe.forEach(oe=>ne(oe.bind(n))):fe&&ne(fe.bind(n))}if(z(vE,f),z(Jt,p),z(Py,_),z(yE,P),z(pE,D),z(mE,S),z(TE,b),z(bE,W),z(wE,T),z(ky,$),z(Zs,U),z(_E,g),Ve(w))if(w.length){const ne=t.exposed||(t.exposed={});w.forEach(fe=>{Object.defineProperty(ne,fe,{get:()=>n[fe],set:oe=>n[fe]=oe})})}else t.exposed||(t.exposed={});ee&&t.render===Sr&&(t.render=ee),R!=null&&(t.inheritAttrs=R),k&&(t.components=k),I&&(t.directives=I),g&&Ay(t)}function PE(t,e,n=Sr){Ve(t)&&(t=Nd(t));for(const r in t){const s=t[r];let i;gt(s)?"default"in s?i=Kl(s.from||r,s.default,!0):i=Kl(s.from||r):i=Kl(s),Gt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function lm(t,e,n){gr(Ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function xy(t,e,n,r){let s=r.includes(".")?zy(n,r):()=>n[r];if(Pt(t)){const i=e[t];He(i)&&Ln(s,i)}else if(He(t))Ln(s,t.bind(n));else if(gt(t))if(Ve(t))t.forEach(i=>xy(i,e,n,r));else{const i=He(t.handler)?t.handler.bind(n):e[t.handler];He(i)&&Ln(s,i,t)}}function Oy(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let u;return a?u=a:!s.length&&!n&&!r?u=e:(u={},s.length&&s.forEach(c=>mu(u,c,o,!0)),mu(u,e,o)),gt(e)&&i.set(e,u),u}function mu(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&mu(t,i,n,!0),s&&s.forEach(o=>mu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=kE[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const kE={data:um,props:cm,emits:cm,methods:ia,computed:ia,beforeCreate:Dn,created:Dn,beforeMount:Dn,mounted:Dn,beforeUpdate:Dn,updated:Dn,beforeDestroy:Dn,beforeUnmount:Dn,destroyed:Dn,unmounted:Dn,activated:Dn,deactivated:Dn,errorCaptured:Dn,serverPrefetch:Dn,components:ia,directives:ia,watch:CE,provide:um,inject:RE};function um(t,e){return e?t?function(){return rn(He(t)?t.call(this,this):t,He(e)?e.call(this,this):e)}:e:t}function RE(t,e){return ia(Nd(t),Nd(e))}function Nd(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Dn(t,e){return t?[...new Set([].concat(t,e))]:e}function ia(t,e){return t?rn(Object.create(null),t,e):e}function cm(t,e){return t?Ve(t)&&Ve(e)?[...new Set([...t,...e])]:rn(Object.create(null),am(t),am(e??{})):e}function CE(t,e){if(!t)return e;if(!e)return t;const n=rn(Object.create(null),t);for(const r in e)n[r]=Dn(t[r],e[r]);return n}function Ny(){return{app:null,config:{isNativeTag:fT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let SE=0;function DE(t,e){return function(r,s=null){He(r)||(r=rn({},r)),s!=null&&!gt(s)&&(s=null);const i=Ny(),o=new WeakSet,a=[];let u=!1;const c=i.app={_uid:SE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:u1,get config(){return i.config},set config(d){},use(d,...f){return o.has(d)||(d&&He(d.install)?(o.add(d),d.install(c,...f)):He(d)&&(o.add(d),d(c,...f))),c},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),c},component(d,f){return f?(i.components[d]=f,c):i.components[d]},directive(d,f){return f?(i.directives[d]=f,c):i.directives[d]},mount(d,f,p){if(!u){const _=c._ceVNode||it(r,s);return _.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(_,d,p),u=!0,c._container=d,d.__vue_app__=c,tc(_.component)}},onUnmount(d){a.push(d)},unmount(){u&&(gr(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,f){return i.provides[d]=f,c},runWithContext(d){const f=ho;ho=c;try{return d()}finally{ho=f}}};return c}}let ho=null;function ME(t,e){if(cn){let n=cn.provides;const r=cn.parent&&cn.parent.provides;r===n&&(n=cn.provides=Object.create(r)),n[t]=e}}function Kl(t,e,n=!1){const r=cn||nn;if(r||ho){let s=ho?ho._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&He(e)?e.call(r&&r.proxy):e}}const Vy={},Ly=()=>Object.create(Vy),Fy=t=>Object.getPrototypeOf(t)===Vy;function xE(t,e,n,r=!1){const s={},i=Ly();t.propsDefaults=Object.create(null),Uy(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:YT(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function OE(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=at(s),[u]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(Zu(t.emitsOptions,p))continue;const _=e[p];if(u)if(ct(i,p))_!==i[p]&&(i[p]=_,c=!0);else{const P=or(p);s[P]=Vd(u,a,P,_,t,!1)}else _!==i[p]&&(i[p]=_,c=!0)}}}else{Uy(t,e,s,i)&&(c=!0);let d;for(const f in a)(!e||!ct(e,f)&&((d=Xs(f))===f||!ct(e,d)))&&(u?n&&(n[f]!==void 0||n[d]!==void 0)&&(s[f]=Vd(u,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!ct(e,f))&&(delete i[f],c=!0)}c&&Kr(t.attrs,"set","")}function Uy(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let u in e){if(ha(u))continue;const c=e[u];let d;s&&ct(s,d=or(u))?!i||!i.includes(d)?n[d]=c:(a||(a={}))[d]=c:Zu(t.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,o=!0)}if(i){const u=at(n),c=a||yt;for(let d=0;d<i.length;d++){const f=i[d];n[f]=Vd(s,u,f,c[f],t,!ct(c,f))}}return o}function Vd(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=ct(o,"default");if(a&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&He(u)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const d=Ja(s);r=c[n]=u.call(null,e),d()}}else r=u;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Xs(n))&&(r=!0))}return r}const NE=new WeakMap;function $y(t,e,n=!1){const r=n?NE:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let u=!1;if(!He(t)){const d=f=>{u=!0;const[p,_]=$y(f,e,!0);rn(o,p),_&&a.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!u)return gt(t)&&r.set(t,oo),oo;if(Ve(i))for(let d=0;d<i.length;d++){const f=or(i[d]);dm(f)&&(o[f]=yt)}else if(i)for(const d in i){const f=or(d);if(dm(f)){const p=i[d],_=o[f]=Ve(p)||He(p)?{type:p}:rn({},p),P=_.type;let D=!1,S=!0;if(Ve(P))for(let O=0;O<P.length;++O){const $=P[O],F=He($)&&$.name;if(F==="Boolean"){D=!0;break}else F==="String"&&(S=!1)}else D=He(P)&&P.name==="Boolean";_[0]=D,_[1]=S,(D||ct(_,"default"))&&a.push(f)}}const c=[o,a];return gt(t)&&r.set(t,c),c}function dm(t){return t[0]!=="$"&&!ha(t)}const Oh=t=>t[0]==="_"||t==="$stable",Nh=t=>Ve(t)?t.map(Ir):[Ir(t)],VE=(t,e,n)=>{if(e._n)return e;const r=Qe((...s)=>Nh(e(...s)),n);return r._c=!1,r},By=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Oh(s))continue;const i=t[s];if(He(i))e[s]=VE(s,i,r);else if(i!=null){const o=Nh(i);e[s]=()=>o}}},jy=(t,e)=>{const n=Nh(e);t.slots.default=()=>n},qy=(t,e,n)=>{for(const r in e)(n||!Oh(r))&&(t[r]=e[r])},LE=(t,e,n)=>{const r=t.slots=Ly();if(t.vnode.shapeFlag&32){const s=e.__;s&&kd(r,"__",s,!0);const i=e._;i?(qy(r,e,n),n&&kd(r,"_",i,!0)):By(e,r)}else e&&jy(t,e)},FE=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=yt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:qy(s,e,n):(i=!e.$stable,By(e,s)),o=e}else e&&(jy(t,e),o={default:1});if(i)for(const a in s)!Oh(a)&&o[a]==null&&delete s[a]},xn=JE;function UE(t){return $E(t)}function $E(t,e){const n=Yu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:u,setText:c,setElementText:d,parentNode:f,nextSibling:p,setScopeId:_=Sr,insertStaticContent:P}=t,D=(C,A,V,y=null,q=null,H=null,Q=void 0,de=null,ue=!!A.dynamicChildren)=>{if(C===A)return;C&&!yi(C,A)&&(y=v(C),Ee(C,q,H,!0),C=null),A.patchFlag===-2&&(ue=!1,A.dynamicChildren=null);const{type:le,ref:ke,shapeFlag:x}=A;switch(le){case ec:S(C,A,V,y);break;case In:O(C,A,V,y);break;case Gl:C==null&&$(A,V,y,Q);break;case Oe:k(C,A,V,y,q,H,Q,de,ue);break;default:x&1?ee(C,A,V,y,q,H,Q,de,ue):x&6?I(C,A,V,y,q,H,Q,de,ue):(x&64||x&128)&&le.process(C,A,V,y,q,H,Q,de,ue,Ge)}ke!=null&&q?ga(ke,C&&C.ref,H,A||C,!A):ke==null&&C&&C.ref!=null&&ga(C.ref,null,H,C,!0)},S=(C,A,V,y)=>{if(C==null)r(A.el=a(A.children),V,y);else{const q=A.el=C.el;A.children!==C.children&&c(q,A.children)}},O=(C,A,V,y)=>{C==null?r(A.el=u(A.children||""),V,y):A.el=C.el},$=(C,A,V,y)=>{[C.el,C.anchor]=P(C.children,A,V,y,C.el,C.anchor)},F=({el:C,anchor:A},V,y)=>{let q;for(;C&&C!==A;)q=p(C),r(C,V,y),C=q;r(A,V,y)},U=({el:C,anchor:A})=>{let V;for(;C&&C!==A;)V=p(C),s(C),C=V;s(A)},ee=(C,A,V,y,q,H,Q,de,ue)=>{A.type==="svg"?Q="svg":A.type==="math"&&(Q="mathml"),C==null?W(A,V,y,q,H,Q,de,ue):g(C,A,q,H,Q,de,ue)},W=(C,A,V,y,q,H,Q,de)=>{let ue,le;const{props:ke,shapeFlag:x,transition:re,dirs:Ie}=C;if(ue=C.el=o(C.type,H,ke&&ke.is,ke),x&8?d(ue,C.children):x&16&&b(C.children,ue,null,y,q,Jc(C,H),Q,de),Ie&&di(C,null,y,"created"),T(ue,C,C.scopeId,Q,y),ke){for(const Fe in ke)Fe!=="value"&&!ha(Fe)&&i(ue,Fe,null,ke[Fe],H,y);"value"in ke&&i(ue,"value",null,ke.value,H),(le=ke.onVnodeBeforeMount)&&Tr(le,y,C)}Ie&&di(C,null,y,"beforeMount");const Se=BE(q,re);Se&&re.beforeEnter(ue),r(ue,A,V),((le=ke&&ke.onVnodeMounted)||Se||Ie)&&xn(()=>{le&&Tr(le,y,C),Se&&re.enter(ue),Ie&&di(C,null,y,"mounted")},q)},T=(C,A,V,y,q)=>{if(V&&_(C,V),y)for(let H=0;H<y.length;H++)_(C,y[H]);if(q){let H=q.subTree;if(A===H||Ky(H.type)&&(H.ssContent===A||H.ssFallback===A)){const Q=q.vnode;T(C,Q,Q.scopeId,Q.slotScopeIds,q.parent)}}},b=(C,A,V,y,q,H,Q,de,ue=0)=>{for(let le=ue;le<C.length;le++){const ke=C[le]=de?Ts(C[le]):Ir(C[le]);D(null,ke,A,V,y,q,H,Q,de)}},g=(C,A,V,y,q,H,Q)=>{const de=A.el=C.el;let{patchFlag:ue,dynamicChildren:le,dirs:ke}=A;ue|=C.patchFlag&16;const x=C.props||yt,re=A.props||yt;let Ie;if(V&&hi(V,!1),(Ie=re.onVnodeBeforeUpdate)&&Tr(Ie,V,A,C),ke&&di(A,C,V,"beforeUpdate"),V&&hi(V,!0),(x.innerHTML&&re.innerHTML==null||x.textContent&&re.textContent==null)&&d(de,""),le?w(C.dynamicChildren,le,de,V,y,Jc(A,q),H):Q||fe(C,A,de,null,V,y,Jc(A,q),H,!1),ue>0){if(ue&16)R(de,x,re,V,q);else if(ue&2&&x.class!==re.class&&i(de,"class",null,re.class,q),ue&4&&i(de,"style",x.style,re.style,q),ue&8){const Se=A.dynamicProps;for(let Fe=0;Fe<Se.length;Fe++){const we=Se[Fe],Ze=x[we],pt=re[we];(pt!==Ze||we==="value")&&i(de,we,Ze,pt,q,V)}}ue&1&&C.children!==A.children&&d(de,A.children)}else!Q&&le==null&&R(de,x,re,V,q);((Ie=re.onVnodeUpdated)||ke)&&xn(()=>{Ie&&Tr(Ie,V,A,C),ke&&di(A,C,V,"updated")},y)},w=(C,A,V,y,q,H,Q)=>{for(let de=0;de<A.length;de++){const ue=C[de],le=A[de],ke=ue.el&&(ue.type===Oe||!yi(ue,le)||ue.shapeFlag&198)?f(ue.el):V;D(ue,le,ke,null,y,q,H,Q,!0)}},R=(C,A,V,y,q)=>{if(A!==V){if(A!==yt)for(const H in A)!ha(H)&&!(H in V)&&i(C,H,A[H],null,q,y);for(const H in V){if(ha(H))continue;const Q=V[H],de=A[H];Q!==de&&H!=="value"&&i(C,H,de,Q,q,y)}"value"in V&&i(C,"value",A.value,V.value,q)}},k=(C,A,V,y,q,H,Q,de,ue)=>{const le=A.el=C?C.el:a(""),ke=A.anchor=C?C.anchor:a("");let{patchFlag:x,dynamicChildren:re,slotScopeIds:Ie}=A;Ie&&(de=de?de.concat(Ie):Ie),C==null?(r(le,V,y),r(ke,V,y),b(A.children||[],V,ke,q,H,Q,de,ue)):x>0&&x&64&&re&&C.dynamicChildren?(w(C.dynamicChildren,re,V,q,H,Q,de),(A.key!=null||q&&A===q.subTree)&&Vh(C,A,!0)):fe(C,A,V,ke,q,H,Q,de,ue)},I=(C,A,V,y,q,H,Q,de,ue)=>{A.slotScopeIds=de,C==null?A.shapeFlag&512?q.ctx.activate(A,V,y,Q,ue):j(A,V,y,q,H,Q,ue):K(C,A,ue)},j=(C,A,V,y,q,H,Q)=>{const de=C.component=r1(C,y,q);if(Qu(C)&&(de.ctx.renderer=Ge),s1(de,!1,Q),de.asyncDep){if(q&&q.registerDep(de,z,Q),!C.el){const ue=de.subTree=it(In);O(null,ue,A,V)}}else z(de,C,A,V,q,H,Q)},K=(C,A,V)=>{const y=A.component=C.component;if(QE(C,A,V))if(y.asyncDep&&!y.asyncResolved){ne(y,A,V);return}else y.next=A,y.update();else A.el=C.el,y.vnode=A},z=(C,A,V,y,q,H,Q)=>{const de=()=>{if(C.isMounted){let{next:x,bu:re,u:Ie,parent:Se,vnode:Fe}=C;{const Vt=Hy(C);if(Vt){x&&(x.el=Fe.el,ne(C,x,Q)),Vt.asyncDep.then(()=>{C.isUnmounted||de()});return}}let we=x,Ze;hi(C,!1),x?(x.el=Fe.el,ne(C,x,Q)):x=Fe,re&&zl(re),(Ze=x.props&&x.props.onVnodeBeforeUpdate)&&Tr(Ze,Se,x,Fe),hi(C,!0);const pt=fm(C),pn=C.subTree;C.subTree=pt,D(pn,pt,f(pn.el),v(pn),C,q,H),x.el=pt.el,we===null&&XE(C,pt.el),Ie&&xn(Ie,q),(Ze=x.props&&x.props.onVnodeUpdated)&&xn(()=>Tr(Ze,Se,x,Fe),q)}else{let x;const{el:re,props:Ie}=A,{bm:Se,m:Fe,parent:we,root:Ze,type:pt}=C,pn=co(A);hi(C,!1),Se&&zl(Se),!pn&&(x=Ie&&Ie.onVnodeBeforeMount)&&Tr(x,we,A),hi(C,!0);{Ze.ce&&Ze.ce._def.shadowRoot!==!1&&Ze.ce._injectChildStyle(pt);const Vt=C.subTree=fm(C);D(null,Vt,V,y,C,q,H),A.el=Vt.el}if(Fe&&xn(Fe,q),!pn&&(x=Ie&&Ie.onVnodeMounted)){const Vt=A;xn(()=>Tr(x,we,Vt),q)}(A.shapeFlag&256||we&&co(we.vnode)&&we.vnode.shapeFlag&256)&&C.a&&xn(C.a,q),C.isMounted=!0,A=V=y=null}};C.scope.on();const ue=C.effect=new Kv(de);C.scope.off();const le=C.update=ue.run.bind(ue),ke=C.job=ue.runIfDirty.bind(ue);ke.i=C,ke.id=C.uid,ue.scheduler=()=>xh(ke),hi(C,!0),le()},ne=(C,A,V)=>{A.component=C;const y=C.vnode.props;C.vnode=A,C.next=null,OE(C,A.props,y,V),FE(C,A.children,V),rs(),tm(C),ss()},fe=(C,A,V,y,q,H,Q,de,ue=!1)=>{const le=C&&C.children,ke=C?C.shapeFlag:0,x=A.children,{patchFlag:re,shapeFlag:Ie}=A;if(re>0){if(re&128){be(le,x,V,y,q,H,Q,de,ue);return}else if(re&256){oe(le,x,V,y,q,H,Q,de,ue);return}}Ie&8?(ke&16&&me(le,q,H),x!==le&&d(V,x)):ke&16?Ie&16?be(le,x,V,y,q,H,Q,de,ue):me(le,q,H,!0):(ke&8&&d(V,""),Ie&16&&b(x,V,y,q,H,Q,de,ue))},oe=(C,A,V,y,q,H,Q,de,ue)=>{C=C||oo,A=A||oo;const le=C.length,ke=A.length,x=Math.min(le,ke);let re;for(re=0;re<x;re++){const Ie=A[re]=ue?Ts(A[re]):Ir(A[re]);D(C[re],Ie,V,null,q,H,Q,de,ue)}le>ke?me(C,q,H,!0,!1,x):b(A,V,y,q,H,Q,de,ue,x)},be=(C,A,V,y,q,H,Q,de,ue)=>{let le=0;const ke=A.length;let x=C.length-1,re=ke-1;for(;le<=x&&le<=re;){const Ie=C[le],Se=A[le]=ue?Ts(A[le]):Ir(A[le]);if(yi(Ie,Se))D(Ie,Se,V,null,q,H,Q,de,ue);else break;le++}for(;le<=x&&le<=re;){const Ie=C[x],Se=A[re]=ue?Ts(A[re]):Ir(A[re]);if(yi(Ie,Se))D(Ie,Se,V,null,q,H,Q,de,ue);else break;x--,re--}if(le>x){if(le<=re){const Ie=re+1,Se=Ie<ke?A[Ie].el:y;for(;le<=re;)D(null,A[le]=ue?Ts(A[le]):Ir(A[le]),V,Se,q,H,Q,de,ue),le++}}else if(le>re)for(;le<=x;)Ee(C[le],q,H,!0),le++;else{const Ie=le,Se=le,Fe=new Map;for(le=Se;le<=re;le++){const Lt=A[le]=ue?Ts(A[le]):Ir(A[le]);Lt.key!=null&&Fe.set(Lt.key,le)}let we,Ze=0;const pt=re-Se+1;let pn=!1,Vt=0;const Xn=new Array(pt);for(le=0;le<pt;le++)Xn[le]=0;for(le=Ie;le<=x;le++){const Lt=C[le];if(Ze>=pt){Ee(Lt,q,H,!0);continue}let mn;if(Lt.key!=null)mn=Fe.get(Lt.key);else for(we=Se;we<=re;we++)if(Xn[we-Se]===0&&yi(Lt,A[we])){mn=we;break}mn===void 0?Ee(Lt,q,H,!0):(Xn[mn-Se]=le+1,mn>=Vt?Vt=mn:pn=!0,D(Lt,A[mn],V,null,q,H,Q,de,ue),Ze++)}const Br=pn?jE(Xn):oo;for(we=Br.length-1,le=pt-1;le>=0;le--){const Lt=Se+le,mn=A[Lt],hs=Lt+1<ke?A[Lt+1].el:y;Xn[le]===0?D(null,mn,V,hs,q,H,Q,de,ue):pn&&(we<0||le!==Br[we]?te(mn,V,hs,2):we--)}}},te=(C,A,V,y,q=null)=>{const{el:H,type:Q,transition:de,children:ue,shapeFlag:le}=C;if(le&6){te(C.component.subTree,A,V,y);return}if(le&128){C.suspense.move(A,V,y);return}if(le&64){Q.move(C,A,V,Ge);return}if(Q===Oe){r(H,A,V);for(let x=0;x<ue.length;x++)te(ue[x],A,V,y);r(C.anchor,A,V);return}if(Q===Gl){F(C,A,V);return}if(y!==2&&le&1&&de)if(y===0)de.beforeEnter(H),r(H,A,V),xn(()=>de.enter(H),q);else{const{leave:x,delayLeave:re,afterLeave:Ie}=de,Se=()=>{C.ctx.isUnmounted?s(H):r(H,A,V)},Fe=()=>{x(H,()=>{Se(),Ie&&Ie()})};re?re(H,Se,Fe):Fe()}else r(H,A,V)},Ee=(C,A,V,y=!1,q=!1)=>{const{type:H,props:Q,ref:de,children:ue,dynamicChildren:le,shapeFlag:ke,patchFlag:x,dirs:re,cacheIndex:Ie}=C;if(x===-2&&(q=!1),de!=null&&(rs(),ga(de,null,V,C,!0),ss()),Ie!=null&&(A.renderCache[Ie]=void 0),ke&256){A.ctx.deactivate(C);return}const Se=ke&1&&re,Fe=!co(C);let we;if(Fe&&(we=Q&&Q.onVnodeBeforeUnmount)&&Tr(we,A,C),ke&6)ae(C.component,V,y);else{if(ke&128){C.suspense.unmount(V,y);return}Se&&di(C,null,A,"beforeUnmount"),ke&64?C.type.remove(C,A,V,Ge,y):le&&!le.hasOnce&&(H!==Oe||x>0&&x&64)?me(le,A,V,!1,!0):(H===Oe&&x&384||!q&&ke&16)&&me(ue,A,V),y&&L(C)}(Fe&&(we=Q&&Q.onVnodeUnmounted)||Se)&&xn(()=>{we&&Tr(we,A,C),Se&&di(C,null,A,"unmounted")},V)},L=C=>{const{type:A,el:V,anchor:y,transition:q}=C;if(A===Oe){Z(V,y);return}if(A===Gl){U(C);return}const H=()=>{s(V),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(C.shapeFlag&1&&q&&!q.persisted){const{leave:Q,delayLeave:de}=q,ue=()=>Q(V,H);de?de(C.el,H,ue):ue()}else H()},Z=(C,A)=>{let V;for(;C!==A;)V=p(C),s(C),C=V;s(A)},ae=(C,A,V)=>{const{bum:y,scope:q,job:H,subTree:Q,um:de,m:ue,a:le,parent:ke,slots:{__:x}}=C;hm(ue),hm(le),y&&zl(y),ke&&Ve(x)&&x.forEach(re=>{ke.renderCache[re]=void 0}),q.stop(),H&&(H.flags|=8,Ee(Q,C,A,V)),de&&xn(de,A),xn(()=>{C.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},me=(C,A,V,y=!1,q=!1,H=0)=>{for(let Q=H;Q<C.length;Q++)Ee(C[Q],A,V,y,q)},v=C=>{if(C.shapeFlag&6)return v(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const A=p(C.anchor||C.el),V=A&&A[my];return V?p(V):A};let J=!1;const Ae=(C,A,V)=>{C==null?A._vnode&&Ee(A._vnode,null,null,!0):D(A._vnode||null,C,A,null,null,null,V),A._vnode=C,J||(J=!0,tm(),hy(),J=!1)},Ge={p:D,um:Ee,m:te,r:L,mt:j,mc:b,pc:fe,pbc:w,n:v,o:t};return{render:Ae,hydrate:void 0,createApp:DE(Ae)}}function Jc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function hi({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function BE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Vh(t,e,n=!1){const r=t.children,s=e.children;if(Ve(r)&&Ve(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ts(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Vh(o,a)),a.type===ec&&(a.el=o.el),a.type===In&&!a.el&&(a.el=o.el)}}function jE(t){const e=t.slice(),n=[0];let r,s,i,o,a;const u=t.length;for(r=0;r<u;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Hy(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Hy(e)}function hm(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const qE=Symbol.for("v-scx"),HE=()=>Kl(qE);function Ln(t,e,n){return Wy(t,e,n)}function Wy(t,e,n=yt){const{immediate:r,deep:s,flush:i,once:o}=n,a=rn({},n),u=e&&r||!e&&i!=="post";let c;if(Na){if(i==="sync"){const _=HE();c=_.__watcherHandles||(_.__watcherHandles=[])}else if(!u){const _=()=>{};return _.stop=Sr,_.resume=Sr,_.pause=Sr,_}}const d=cn;a.call=(_,P,D)=>gr(_,d,P,D);let f=!1;i==="post"?a.scheduler=_=>{xn(_,d&&d.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(_,P)=>{P?_():xh(_)}),a.augmentJob=_=>{e&&(_.flags|=4),f&&(_.flags|=2,d&&(_.id=d.uid,_.i=d))};const p=iE(t,e,a);return Na&&(c?c.push(p):u&&p()),p}function WE(t,e,n){const r=this.proxy,s=Pt(t)?t.includes(".")?zy(r,t):()=>r[t]:t.bind(r,r);let i;He(e)?i=e:(i=e.handler,n=e);const o=Ja(this),a=Wy(s,i.bind(r),n);return o(),a}function zy(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const zE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${or(e)}Modifiers`]||t[`${Xs(e)}Modifiers`];function YE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||yt;let s=n;const i=e.startsWith("update:"),o=i&&zE(r,e.slice(7));o&&(o.trim&&(s=n.map(d=>Pt(d)?d.trim():d)),o.number&&(s=n.map(uu)));let a,u=r[a=Wc(e)]||r[a=Wc(or(e))];!u&&i&&(u=r[a=Wc(Xs(e))]),u&&gr(u,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,gr(c,t,6,s)}}function Yy(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!He(t)){const u=c=>{const d=Yy(c,e,!0);d&&(a=!0,rn(o,d))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!a?(gt(t)&&r.set(t,null),null):(Ve(i)?i.forEach(u=>o[u]=null):rn(o,i),gt(t)&&r.set(t,o),o)}function Zu(t,e){return!t||!Hu(e)?!1:(e=e.slice(2).replace(/Once$/,""),ct(t,e[0].toLowerCase()+e.slice(1))||ct(t,Xs(e))||ct(t,e))}function fm(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:u,render:c,renderCache:d,props:f,data:p,setupState:_,ctx:P,inheritAttrs:D}=t,S=pu(t);let O,$;try{if(n.shapeFlag&4){const U=s||r,ee=U;O=Ir(c.call(ee,U,d,f,_,p,P)),$=a}else{const U=e;O=Ir(U.length>1?U(f,{attrs:a,slots:o,emit:u}):U(f,null)),$=e.props?a:KE(a)}}catch(U){ya.length=0,Gu(U,t,1),O=it(In)}let F=O;if($&&D!==!1){const U=Object.keys($),{shapeFlag:ee}=F;U.length&&ee&7&&(i&&U.some(Th)&&($=GE($,i)),F=Us(F,$,!1,!0))}return n.dirs&&(F=Us(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(n.dirs):n.dirs),n.transition&&Ma(F,n.transition),O=F,pu(S),O}const KE=t=>{let e;for(const n in t)(n==="class"||n==="style"||Hu(n))&&((e||(e={}))[n]=t[n]);return e},GE=(t,e)=>{const n={};for(const r in t)(!Th(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function QE(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?pm(r,o,c):!!o;if(u&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(o[p]!==r[p]&&!Zu(c,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?pm(r,o,c):!0:!!o;return!1}function pm(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Zu(n,i))return!0}return!1}function XE({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Ky=t=>t.__isSuspense;function JE(t,e){e&&e.pendingBranch?Ve(t)?e.effects.push(...t):e.effects.push(t):lE(t)}const Oe=Symbol.for("v-fgt"),ec=Symbol.for("v-txt"),In=Symbol.for("v-cmt"),Gl=Symbol.for("v-stc"),ya=[];let Yn=null;function B(t=!1){ya.push(Yn=t?null:[])}function ZE(){ya.pop(),Yn=ya[ya.length-1]||null}let xa=1;function mm(t,e=!1){xa+=t,t<0&&Yn&&e&&(Yn.hasOnce=!0)}function Gy(t){return t.dynamicChildren=xa>0?Yn||oo:null,ZE(),xa>0&&Yn&&Yn.push(t),t}function X(t,e,n,r,s,i){return Gy(M(t,e,n,r,s,i,!0))}function Xe(t,e,n,r,s){return Gy(it(t,e,n,r,s,!0))}function Oa(t){return t?t.__v_isVNode===!0:!1}function yi(t,e){return t.type===e.type&&t.key===e.key}const Qy=({key:t})=>t??null,Ql=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Pt(t)||Gt(t)||He(t)?{i:nn,r:t,k:e,f:!!n}:t:null);function M(t,e=null,n=null,r=0,s=null,i=t===Oe?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Qy(e),ref:e&&Ql(e),scopeId:py,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:nn};return a?(Lh(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=Pt(n)?8:16),xa>0&&!o&&Yn&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Yn.push(u),u}const it=e1;function e1(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Cy)&&(t=In),Oa(t)){const a=Us(t,e,!0);return n&&Lh(a,n),xa>0&&!i&&Yn&&(a.shapeFlag&6?Yn[Yn.indexOf(t)]=a:Yn.push(a)),a.patchFlag=-2,a}if(l1(t)&&(t=t.__vccOpts),e){e=Nn(e);let{class:a,style:u}=e;a&&!Pt(a)&&(e.class=Ye(a)),gt(u)&&(Mh(u)&&!Ve(u)&&(u=rn({},u)),e.style=Pn(u))}const o=Pt(t)?1:Ky(t)?128:gy(t)?64:gt(t)?4:He(t)?2:0;return M(t,e,n,r,s,o,i,!0)}function Nn(t){return t?Mh(t)||Fy(t)?rn({},t):t:null}function Us(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:u}=t,c=e?Qt(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Qy(c),ref:e&&e.ref?n&&i?Ve(i)?i.concat(Ql(e)):[i,Ql(e)]:Ql(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Oe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Us(t.ssContent),ssFallback:t.ssFallback&&Us(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&r&&Ma(d,u.clone(d)),d}function Un(t=" ",e=0){return it(ec,null,t,e)}function Xy(t,e){const n=it(Gl,null,t);return n.staticCount=e,n}function ce(t="",e=!1){return e?(B(),Xe(In,null,t)):it(In,null,t)}function Ir(t){return t==null||typeof t=="boolean"?it(In):Ve(t)?it(Oe,null,t.slice()):Oa(t)?Ts(t):it(ec,null,String(t))}function Ts(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Us(t)}function Lh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ve(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Lh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Fy(e)?e._ctx=nn:s===3&&nn&&(nn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else He(e)?(e={default:e,_ctx:nn},n=32):(e=String(e),r&64?(n=16,e=[Un(e)]):n=8);t.children=e,t.shapeFlag|=n}function Qt(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ye([e.class,r.class]));else if(s==="style")e.style=Pn([e.style,r.style]);else if(Hu(s)){const i=e[s],o=r[s];o&&i!==o&&!(Ve(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Tr(t,e,n,r=null){gr(t,e,7,[n,r])}const t1=Ny();let n1=0;function r1(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||t1,i={uid:n1++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new PT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$y(r,s),emitsOptions:Yy(r,s),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:r.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=YE.bind(null,i),t.ce&&t.ce(i),i}let cn=null;const Fh=()=>cn||nn;let gu,Ld;{const t=Yu(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};gu=e("__VUE_INSTANCE_SETTERS__",n=>cn=n),Ld=e("__VUE_SSR_SETTERS__",n=>Na=n)}const Ja=t=>{const e=cn;return gu(t),t.scope.on(),()=>{t.scope.off(),gu(e)}},gm=()=>{cn&&cn.scope.off(),gu(null)};function Jy(t){return t.vnode.shapeFlag&4}let Na=!1;function s1(t,e=!1,n=!1){e&&Ld(e);const{props:r,children:s}=t.vnode,i=Jy(t);xE(t,r,i,e),LE(t,s,n||e);const o=i?i1(t,e):void 0;return e&&Ld(!1),o}function i1(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,EE);const{setup:r}=n;if(r){rs();const s=t.setupContext=r.length>1?e_(t):null,i=Ja(t),o=Xa(r,t,0,[t.props,s]),a=Bv(o);if(ss(),i(),(a||t.sp)&&!co(t)&&Ay(t),a){if(o.then(gm,gm),e)return o.then(u=>{vm(t,u)}).catch(u=>{Gu(u,t,0)});t.asyncDep=o}else vm(t,o)}else Zy(t)}function vm(t,e,n){He(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:gt(e)&&(t.setupState=uy(e)),Zy(t)}function Zy(t,e,n){const r=t.type;t.render||(t.render=r.render||Sr);{const s=Ja(t);rs();try{IE(t)}finally{ss(),s()}}}const o1={get(t,e){return En(t,"get",""),t[e]}};function e_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,o1),slots:t.slots,emit:t.emit,expose:e}}function tc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(uy(KT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in va)return va[n](t)},has(e,n){return n in e||n in va}})):t.proxy}function a1(t,e=!0){return He(t)?t.displayName||t.name:t.name||e&&t.__name}function l1(t){return He(t)&&"__vccOpts"in t}const ye=(t,e)=>rE(t,e,Na);function t_(t,e,n){const r=arguments.length;return r===2?gt(e)&&!Ve(e)?Oa(e)?it(t,null,[e]):it(t,e):it(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Oa(n)&&(n=[n]),it(t,e,n))}const u1="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fd;const ym=typeof window<"u"&&window.trustedTypes;if(ym)try{Fd=ym.createPolicy("vue",{createHTML:t=>t})}catch{}const n_=Fd?t=>Fd.createHTML(t):t=>t,c1="http://www.w3.org/2000/svg",d1="http://www.w3.org/1998/Math/MathML",zr=typeof document<"u"?document:null,_m=zr&&zr.createElement("template"),h1={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?zr.createElementNS(c1,t):e==="mathml"?zr.createElementNS(d1,t):n?zr.createElement(t,{is:n}):zr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>zr.createTextNode(t),createComment:t=>zr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>zr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{_m.innerHTML=n_(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=_m.content;if(r==="svg"||r==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},gs="transition",Zo="animation",Va=Symbol("_vtc"),r_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},f1=rn({},_y,r_),p1=t=>(t.displayName="Transition",t.props=f1,t),xo=p1((t,{slots:e})=>t_(fE,m1(t),e)),fi=(t,e=[])=>{Ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},wm=t=>t?Ve(t)?t.some(e=>e.length>1):t.length>1:!1;function m1(t){const e={};for(const k in t)k in r_||(e[k]=t[k]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,P=g1(s),D=P&&P[0],S=P&&P[1],{onBeforeEnter:O,onEnter:$,onEnterCancelled:F,onLeave:U,onLeaveCancelled:ee,onBeforeAppear:W=O,onAppear:T=$,onAppearCancelled:b=F}=e,g=(k,I,j,K)=>{k._enterCancelled=K,pi(k,I?d:a),pi(k,I?c:o),j&&j()},w=(k,I)=>{k._isLeaving=!1,pi(k,f),pi(k,_),pi(k,p),I&&I()},R=k=>(I,j)=>{const K=k?T:$,z=()=>g(I,k,j);fi(K,[I,z]),bm(()=>{pi(I,k?u:i),Wr(I,k?d:a),wm(K)||Tm(I,r,D,z)})};return rn(e,{onBeforeEnter(k){fi(O,[k]),Wr(k,i),Wr(k,o)},onBeforeAppear(k){fi(W,[k]),Wr(k,u),Wr(k,c)},onEnter:R(!1),onAppear:R(!0),onLeave(k,I){k._isLeaving=!0;const j=()=>w(k,I);Wr(k,f),k._enterCancelled?(Wr(k,p),Im()):(Im(),Wr(k,p)),bm(()=>{k._isLeaving&&(pi(k,f),Wr(k,_),wm(U)||Tm(k,r,S,j))}),fi(U,[k,j])},onEnterCancelled(k){g(k,!1,void 0,!0),fi(F,[k])},onAppearCancelled(k){g(k,!0,void 0,!0),fi(b,[k])},onLeaveCancelled(k){w(k),fi(ee,[k])}})}function g1(t){if(t==null)return null;if(gt(t))return[Zc(t.enter),Zc(t.leave)];{const e=Zc(t);return[e,e]}}function Zc(t){return yT(t)}function Wr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Va]||(t[Va]=new Set)).add(e)}function pi(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Va];n&&(n.delete(e),n.size||(t[Va]=void 0))}function bm(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let v1=0;function Tm(t,e,n,r){const s=t._endId=++v1,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:u}=y1(t,e);if(!o)return r();const c=o+"end";let d=0;const f=()=>{t.removeEventListener(c,p),i()},p=_=>{_.target===t&&++d>=u&&f()};setTimeout(()=>{d<u&&f()},a+1),t.addEventListener(c,p)}function y1(t,e){const n=window.getComputedStyle(t),r=P=>(n[P]||"").split(", "),s=r(`${gs}Delay`),i=r(`${gs}Duration`),o=Em(s,i),a=r(`${Zo}Delay`),u=r(`${Zo}Duration`),c=Em(a,u);let d=null,f=0,p=0;e===gs?o>0&&(d=gs,f=o,p=i.length):e===Zo?c>0&&(d=Zo,f=c,p=u.length):(f=Math.max(o,c),d=f>0?o>c?gs:Zo:null,p=d?d===gs?i.length:u.length:0);const _=d===gs&&/\b(transform|all)(,|$)/.test(r(`${gs}Property`).toString());return{type:d,timeout:f,propCount:p,hasTransform:_}}function Em(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Am(n)+Am(t[r])))}function Am(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Im(){return document.body.offsetHeight}function _1(t,e,n){const r=t[Va];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const vu=Symbol("_vod"),s_=Symbol("_vsh"),Xl={beforeMount(t,{value:e},{transition:n}){t[vu]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ea(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),ea(t,!0),r.enter(t)):r.leave(t,()=>{ea(t,!1)}):ea(t,e))},beforeUnmount(t,{value:e}){ea(t,e)}};function ea(t,e){t.style.display=e?t[vu]:"none",t[s_]=!e}const w1=Symbol(""),b1=/(^|;)\s*display\s*:/;function T1(t,e,n){const r=t.style,s=Pt(n);let i=!1;if(n&&!s){if(e)if(Pt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Jl(r,a,"")}else for(const o in e)n[o]==null&&Jl(r,o,"");for(const o in n)o==="display"&&(i=!0),Jl(r,o,n[o])}else if(s){if(e!==n){const o=r[w1];o&&(n+=";"+o),r.cssText=n,i=b1.test(n)}}else e&&t.removeAttribute("style");vu in t&&(t[vu]=i?r.display:"",t[s_]&&(r.display="none"))}const Pm=/\s*!important$/;function Jl(t,e,n){if(Ve(n))n.forEach(r=>Jl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=E1(t,e);Pm.test(n)?t.setProperty(Xs(r),n.replace(Pm,""),"important"):t[r]=n}}const km=["Webkit","Moz","ms"],ed={};function E1(t,e){const n=ed[e];if(n)return n;let r=or(e);if(r!=="filter"&&r in t)return ed[e]=r;r=zu(r);for(let s=0;s<km.length;s++){const i=km[s]+r;if(i in t)return ed[e]=i}return e}const Rm="http://www.w3.org/1999/xlink";function Cm(t,e,n,r,s,i=AT(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Rm,e.slice(6,e.length)):t.setAttributeNS(Rm,e,n):n==null||i&&!Hv(n)?t.removeAttribute(e):t.setAttribute(e,i?"":mr(n)?String(n):n)}function Sm(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?n_(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Hv(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Qr(t,e,n,r){t.addEventListener(e,n,r)}function A1(t,e,n,r){t.removeEventListener(e,n,r)}const Dm=Symbol("_vei");function I1(t,e,n,r,s=null){const i=t[Dm]||(t[Dm]={}),o=i[e];if(r&&o)o.value=r;else{const[a,u]=P1(e);if(r){const c=i[e]=C1(r,s);Qr(t,a,c,u)}else o&&(A1(t,a,o,u),i[e]=void 0)}}const Mm=/(?:Once|Passive|Capture)$/;function P1(t){let e;if(Mm.test(t)){e={};let r;for(;r=t.match(Mm);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Xs(t.slice(2)),e]}let td=0;const k1=Promise.resolve(),R1=()=>td||(k1.then(()=>td=0),td=Date.now());function C1(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;gr(S1(r,n.value),e,5,[r])};return n.value=t,n.attached=R1(),n}function S1(t,e){if(Ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const xm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,D1=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?_1(t,r,o):e==="style"?T1(t,n,r):Hu(e)?Th(e)||I1(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):M1(t,e,r,o))?(Sm(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Cm(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Pt(r))?Sm(t,or(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Cm(t,e,r,o))};function M1(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&xm(e)&&He(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return xm(e)&&Pt(n)?!1:e in t}const $s=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ve(e)?n=>zl(e,n):e};function x1(t){t.target.composing=!0}function Om(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const rr=Symbol("_assign"),sr={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[rr]=$s(s);const i=r||s.props&&s.props.type==="number";Qr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=uu(a)),t[rr](a)}),n&&Qr(t,"change",()=>{t.value=t.value.trim()}),e||(Qr(t,"compositionstart",x1),Qr(t,"compositionend",Om),Qr(t,"change",Om))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[rr]=$s(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?uu(t.value):t.value,u=e??"";a!==u&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===u)||(t.value=u))}},Ud={deep:!0,created(t,e,n){t[rr]=$s(n),Qr(t,"change",()=>{const r=t._modelValue,s=_o(t),i=t.checked,o=t[rr];if(Ve(r)){const a=Ih(r,s),u=a!==-1;if(i&&!u)o(r.concat(s));else if(!i&&u){const c=[...r];c.splice(a,1),o(c)}}else if(Mo(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(i_(t,i))})},mounted:Nm,beforeUpdate(t,e,n){t[rr]=$s(n),Nm(t,e,n)}};function Nm(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(Ve(e))s=Ih(e,r.props.value)>-1;else if(Mo(e))s=e.has(r.props.value);else{if(e===n)return;s=ki(e,i_(t,!0))}t.checked!==s&&(t.checked=s)}const O1={created(t,{value:e},n){t.checked=ki(e,n.props.value),t[rr]=$s(n),Qr(t,"change",()=>{t[rr](_o(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[rr]=$s(r),e!==n&&(t.checked=ki(e,r.props.value))}},yo={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Mo(e);Qr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?uu(_o(o)):_o(o));t[rr](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Fn(()=>{t._assigning=!1})}),t[rr]=$s(r)},mounted(t,{value:e}){Vm(t,e)},beforeUpdate(t,e,n){t[rr]=$s(n)},updated(t,{value:e}){t._assigning||Vm(t,e)}};function Vm(t,e){const n=t.multiple,r=Ve(e);if(!(n&&!r&&!Mo(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=_o(o);if(n)if(r){const u=typeof a;u==="string"||u==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Ih(e,a)>-1}else o.selected=e.has(a);else if(ki(_o(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function _o(t){return"_value"in t?t._value:t.value}function i_(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const N1={created(t,e,n){Ol(t,e,n,null,"created")},mounted(t,e,n){Ol(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Ol(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Ol(t,e,n,r,"updated")}};function V1(t,e){switch(t){case"SELECT":return yo;case"TEXTAREA":return sr;default:switch(e){case"checkbox":return Ud;case"radio":return O1;default:return sr}}}function Ol(t,e,n,r,s){const o=V1(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,r)}const L1=["ctrl","shift","alt","meta"],F1={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>L1.some(n=>t[`${n}Key`]&&!e.includes(n))},Bt=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=F1[e[o]];if(a&&a(s,e))return}return t(s,...i)})},U1={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},$1=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=Xs(s.key);if(e.some(o=>o===i||U1[o]===i))return t(s)})},B1=rn({patchProp:D1},h1);let Lm;function o_(){return Lm||(Lm=UE(B1))}const Fm=(...t)=>{o_().render(...t)},j1=(...t)=>{const e=o_().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=H1(r);if(!s)return;const i=e._component;!He(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,q1(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function q1(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function H1(t){return Pt(t)?document.querySelector(t):t}const W1=()=>{};var Um={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},z1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},l_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,_=c&63;u||(_=64,o||(p=64)),r.push(n[d],n[f],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):z1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new Y1;const p=i<<2|a>>4;if(r.push(p),c!==64){const _=a<<4&240|c>>2;if(r.push(_),f!==64){const P=c<<6&192|f;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Y1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K1=function(t){const e=a_(t);return l_.encodeByteArray(e,!0)},yu=function(t){return K1(t).replace(/\./g,"")},u_=function(t){try{return l_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=()=>G1().__FIREBASE_DEFAULTS__,X1=()=>{if(typeof process>"u"||typeof Um>"u")return;const t=Um.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},J1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&u_(t[1]);return e&&JSON.parse(e)},nc=()=>{try{return W1()||Q1()||X1()||J1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},c_=t=>{var e,n;return(n=(e=nc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},d_=t=>{const e=c_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h_=()=>{var t;return(t=nc())===null||t===void 0?void 0:t.config},f_=t=>{var e;return(e=nc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Uh(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yu(JSON.stringify(n)),yu(JSON.stringify(o)),""].join(".")}const _a={};function eA(){const t={prod:[],emulator:[]};for(const e of Object.keys(_a))_a[e]?t.emulator.push(e):t.prod.push(e);return t}function tA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let $m=!1;function $h(t,e){if(typeof window>"u"||typeof document>"u"||!ei(window.location.host)||_a[t]===e||_a[t]||$m)return;_a[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=eA().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{$m=!0,o()},p}function d(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=tA(r),_=n("text"),P=document.getElementById(_)||document.createElement("span"),D=n("learnmore"),S=document.getElementById(D)||document.createElement("a"),O=n("preprendIcon"),$=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const F=p.element;a(F),d(S,D);const U=c();u($,O),F.append($,P,S,U),document.body.appendChild(F)}i?(P.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function rA(){var t;const e=(t=nc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aA(){const t=Rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lA(){return!rA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uA(){try{return typeof indexedDB=="object"}catch{return!1}}function cA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="FirebaseError";class $r extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dA,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Za.prototype.create)}}class Za{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?hA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new $r(s,a,r)}}function hA(t,e){return t.replace(fA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fA=/\{\$([^}]+)}/g;function pA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ri(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Bm(i)&&Bm(o)){if(!Ri(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Bm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function aa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mA(t,e){const n=new gA(t,e);return n.subscribe.bind(n)}class gA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=nd),s.error===void 0&&(s.error=nd),s.complete===void 0&&(s.complete=nd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class Bs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Z1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wA(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_A(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _A(t){return t===gi?void 0:t}function wA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const TA={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},EA=nt.INFO,AA={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},IA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bh{constructor(e){this.name=e,this._logLevel=EA,this._logHandler=IA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const PA=(t,e)=>e.some(n=>t instanceof n);let jm,qm;function kA(){return jm||(jm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RA(){return qm||(qm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m_=new WeakMap,$d=new WeakMap,g_=new WeakMap,rd=new WeakMap,jh=new WeakMap;function CA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ms(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&m_.set(n,t)}).catch(()=>{}),jh.set(e,t),e}function SA(t){if($d.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$d.set(t,e)}let Bd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $d.get(t);if(e==="objectStoreNames")return t.objectStoreNames||g_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ms(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DA(t){Bd=t(Bd)}function MA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sd(this),e,...n);return g_.set(r,e.sort?e.sort():[e]),Ms(r)}:RA().includes(t)?function(...e){return t.apply(sd(this),e),Ms(m_.get(this))}:function(...e){return Ms(t.apply(sd(this),e))}}function xA(t){return typeof t=="function"?MA(t):(t instanceof IDBTransaction&&SA(t),PA(t,kA())?new Proxy(t,Bd):t)}function Ms(t){if(t instanceof IDBRequest)return CA(t);if(rd.has(t))return rd.get(t);const e=xA(t);return e!==t&&(rd.set(t,e),jh.set(e,t)),e}const sd=t=>jh.get(t);function OA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ms(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ms(o.result),u.oldVersion,u.newVersion,Ms(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const NA=["get","getKey","getAll","getAllKeys","count"],VA=["put","add","delete","clear"],id=new Map;function Hm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(id.get(e))return id.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=VA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||NA.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return id.set(e,i),i}DA(t=>({...t,get:(e,n,r)=>Hm(e,n)||t.get(e,n,r),has:(e,n)=>!!Hm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function FA(t){const e=t.getComponent();return e?.type==="VERSION"}const jd="@firebase/app",Wm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Bh("@firebase/app"),UA="@firebase/app-compat",$A="@firebase/analytics-compat",BA="@firebase/analytics",jA="@firebase/app-check-compat",qA="@firebase/app-check",HA="@firebase/auth",WA="@firebase/auth-compat",zA="@firebase/database",YA="@firebase/data-connect",KA="@firebase/database-compat",GA="@firebase/functions",QA="@firebase/functions-compat",XA="@firebase/installations",JA="@firebase/installations-compat",ZA="@firebase/messaging",eI="@firebase/messaging-compat",tI="@firebase/performance",nI="@firebase/performance-compat",rI="@firebase/remote-config",sI="@firebase/remote-config-compat",iI="@firebase/storage",oI="@firebase/storage-compat",aI="@firebase/firestore",lI="@firebase/ai",uI="@firebase/firestore-compat",cI="firebase",dI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="[DEFAULT]",hI={[jd]:"fire-core",[UA]:"fire-core-compat",[BA]:"fire-analytics",[$A]:"fire-analytics-compat",[qA]:"fire-app-check",[jA]:"fire-app-check-compat",[HA]:"fire-auth",[WA]:"fire-auth-compat",[zA]:"fire-rtdb",[YA]:"fire-data-connect",[KA]:"fire-rtdb-compat",[GA]:"fire-fn",[QA]:"fire-fn-compat",[XA]:"fire-iid",[JA]:"fire-iid-compat",[ZA]:"fire-fcm",[eI]:"fire-fcm-compat",[tI]:"fire-perf",[nI]:"fire-perf-compat",[rI]:"fire-rc",[sI]:"fire-rc-compat",[iI]:"fire-gcs",[oI]:"fire-gcs-compat",[aI]:"fire-fst",[uI]:"fire-fst-compat",[lI]:"fire-vertex","fire-js":"fire-js",[cI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Map,fI=new Map,Hd=new Map;function zm(t,e){try{t.container.addComponent(e)}catch(n){is.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ci(t){const e=t.name;if(Hd.has(e))return is.debug(`There were multiple attempts to register component ${e}.`),!1;Hd.set(e,t);for(const n of _u.values())zm(n,t);for(const n of fI.values())zm(n,t);return!0}function rc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new Za("app","Firebase",pI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=dI;function v_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qd,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw xs.create("bad-app-name",{appName:String(s)});if(n||(n=h_()),!n)throw xs.create("no-options");const i=_u.get(s);if(i){if(Ri(n,i.options)&&Ri(r,i.config))return i;throw xs.create("duplicate-app",{appName:s})}const o=new bA(s);for(const u of Hd.values())o.addComponent(u);const a=new mI(n,r,o);return _u.set(s,a),a}function qh(t=qd){const e=_u.get(t);if(!e&&t===qd&&h_())return v_();if(!e)throw xs.create("no-app",{appName:t});return e}function Dr(t,e,n){var r;let s=(r=hI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),is.warn(a.join(" "));return}Ci(new Bs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="firebase-heartbeat-database",vI=1,La="firebase-heartbeat-store";let od=null;function y_(){return od||(od=OA(gI,vI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(La)}catch(n){console.warn(n)}}}}).catch(t=>{throw xs.create("idb-open",{originalErrorMessage:t.message})})),od}async function yI(t){try{const n=(await y_()).transaction(La),r=await n.objectStore(La).get(__(t));return await n.done,r}catch(e){if(e instanceof $r)is.warn(e.message);else{const n=xs.create("idb-get",{originalErrorMessage:e?.message});is.warn(n.message)}}}async function Ym(t,e){try{const r=(await y_()).transaction(La,"readwrite");await r.objectStore(La).put(e,__(t)),await r.done}catch(n){if(n instanceof $r)is.warn(n.message);else{const r=xs.create("idb-set",{originalErrorMessage:n?.message});is.warn(r.message)}}}function __(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=1024,wI=30;class bI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Km();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>wI){const o=AI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){is.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Km(),{heartbeatsToSend:r,unsentEntries:s}=TI(this._heartbeatsCache.heartbeats),i=yu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return is.warn(n),""}}}function Km(){return new Date().toISOString().substring(0,10)}function TI(t,e=_I){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Gm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Gm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uA()?cA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ym(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ym(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gm(t){return yu(JSON.stringify({version:2,heartbeats:t})).length}function AI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){Ci(new Bs("platform-logger",e=>new LA(e),"PRIVATE")),Ci(new Bs("heartbeat",e=>new bI(e),"PRIVATE")),Dr(jd,Wm,t),Dr(jd,Wm,"esm2017"),Dr("fire-js","")}II("");var Qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Os,w_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,b){function g(){}g.prototype=b.prototype,T.D=b.prototype,T.prototype=new g,T.prototype.constructor=T,T.C=function(w,R,k){for(var I=Array(arguments.length-2),j=2;j<arguments.length;j++)I[j-2]=arguments[j];return b.prototype[R].apply(w,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,b,g){g||(g=0);var w=Array(16);if(typeof b=="string")for(var R=0;16>R;++R)w[R]=b.charCodeAt(g++)|b.charCodeAt(g++)<<8|b.charCodeAt(g++)<<16|b.charCodeAt(g++)<<24;else for(R=0;16>R;++R)w[R]=b[g++]|b[g++]<<8|b[g++]<<16|b[g++]<<24;b=T.g[0],g=T.g[1],R=T.g[2];var k=T.g[3],I=b+(k^g&(R^k))+w[0]+3614090360&4294967295;b=g+(I<<7&4294967295|I>>>25),I=k+(R^b&(g^R))+w[1]+3905402710&4294967295,k=b+(I<<12&4294967295|I>>>20),I=R+(g^k&(b^g))+w[2]+606105819&4294967295,R=k+(I<<17&4294967295|I>>>15),I=g+(b^R&(k^b))+w[3]+3250441966&4294967295,g=R+(I<<22&4294967295|I>>>10),I=b+(k^g&(R^k))+w[4]+4118548399&4294967295,b=g+(I<<7&4294967295|I>>>25),I=k+(R^b&(g^R))+w[5]+1200080426&4294967295,k=b+(I<<12&4294967295|I>>>20),I=R+(g^k&(b^g))+w[6]+2821735955&4294967295,R=k+(I<<17&4294967295|I>>>15),I=g+(b^R&(k^b))+w[7]+4249261313&4294967295,g=R+(I<<22&4294967295|I>>>10),I=b+(k^g&(R^k))+w[8]+1770035416&4294967295,b=g+(I<<7&4294967295|I>>>25),I=k+(R^b&(g^R))+w[9]+2336552879&4294967295,k=b+(I<<12&4294967295|I>>>20),I=R+(g^k&(b^g))+w[10]+4294925233&4294967295,R=k+(I<<17&4294967295|I>>>15),I=g+(b^R&(k^b))+w[11]+2304563134&4294967295,g=R+(I<<22&4294967295|I>>>10),I=b+(k^g&(R^k))+w[12]+1804603682&4294967295,b=g+(I<<7&4294967295|I>>>25),I=k+(R^b&(g^R))+w[13]+4254626195&4294967295,k=b+(I<<12&4294967295|I>>>20),I=R+(g^k&(b^g))+w[14]+2792965006&4294967295,R=k+(I<<17&4294967295|I>>>15),I=g+(b^R&(k^b))+w[15]+1236535329&4294967295,g=R+(I<<22&4294967295|I>>>10),I=b+(R^k&(g^R))+w[1]+4129170786&4294967295,b=g+(I<<5&4294967295|I>>>27),I=k+(g^R&(b^g))+w[6]+3225465664&4294967295,k=b+(I<<9&4294967295|I>>>23),I=R+(b^g&(k^b))+w[11]+643717713&4294967295,R=k+(I<<14&4294967295|I>>>18),I=g+(k^b&(R^k))+w[0]+3921069994&4294967295,g=R+(I<<20&4294967295|I>>>12),I=b+(R^k&(g^R))+w[5]+3593408605&4294967295,b=g+(I<<5&4294967295|I>>>27),I=k+(g^R&(b^g))+w[10]+38016083&4294967295,k=b+(I<<9&4294967295|I>>>23),I=R+(b^g&(k^b))+w[15]+3634488961&4294967295,R=k+(I<<14&4294967295|I>>>18),I=g+(k^b&(R^k))+w[4]+3889429448&4294967295,g=R+(I<<20&4294967295|I>>>12),I=b+(R^k&(g^R))+w[9]+568446438&4294967295,b=g+(I<<5&4294967295|I>>>27),I=k+(g^R&(b^g))+w[14]+3275163606&4294967295,k=b+(I<<9&4294967295|I>>>23),I=R+(b^g&(k^b))+w[3]+4107603335&4294967295,R=k+(I<<14&4294967295|I>>>18),I=g+(k^b&(R^k))+w[8]+1163531501&4294967295,g=R+(I<<20&4294967295|I>>>12),I=b+(R^k&(g^R))+w[13]+2850285829&4294967295,b=g+(I<<5&4294967295|I>>>27),I=k+(g^R&(b^g))+w[2]+4243563512&4294967295,k=b+(I<<9&4294967295|I>>>23),I=R+(b^g&(k^b))+w[7]+1735328473&4294967295,R=k+(I<<14&4294967295|I>>>18),I=g+(k^b&(R^k))+w[12]+2368359562&4294967295,g=R+(I<<20&4294967295|I>>>12),I=b+(g^R^k)+w[5]+4294588738&4294967295,b=g+(I<<4&4294967295|I>>>28),I=k+(b^g^R)+w[8]+2272392833&4294967295,k=b+(I<<11&4294967295|I>>>21),I=R+(k^b^g)+w[11]+1839030562&4294967295,R=k+(I<<16&4294967295|I>>>16),I=g+(R^k^b)+w[14]+4259657740&4294967295,g=R+(I<<23&4294967295|I>>>9),I=b+(g^R^k)+w[1]+2763975236&4294967295,b=g+(I<<4&4294967295|I>>>28),I=k+(b^g^R)+w[4]+1272893353&4294967295,k=b+(I<<11&4294967295|I>>>21),I=R+(k^b^g)+w[7]+4139469664&4294967295,R=k+(I<<16&4294967295|I>>>16),I=g+(R^k^b)+w[10]+3200236656&4294967295,g=R+(I<<23&4294967295|I>>>9),I=b+(g^R^k)+w[13]+681279174&4294967295,b=g+(I<<4&4294967295|I>>>28),I=k+(b^g^R)+w[0]+3936430074&4294967295,k=b+(I<<11&4294967295|I>>>21),I=R+(k^b^g)+w[3]+3572445317&4294967295,R=k+(I<<16&4294967295|I>>>16),I=g+(R^k^b)+w[6]+76029189&4294967295,g=R+(I<<23&4294967295|I>>>9),I=b+(g^R^k)+w[9]+3654602809&4294967295,b=g+(I<<4&4294967295|I>>>28),I=k+(b^g^R)+w[12]+3873151461&4294967295,k=b+(I<<11&4294967295|I>>>21),I=R+(k^b^g)+w[15]+530742520&4294967295,R=k+(I<<16&4294967295|I>>>16),I=g+(R^k^b)+w[2]+3299628645&4294967295,g=R+(I<<23&4294967295|I>>>9),I=b+(R^(g|~k))+w[0]+4096336452&4294967295,b=g+(I<<6&4294967295|I>>>26),I=k+(g^(b|~R))+w[7]+1126891415&4294967295,k=b+(I<<10&4294967295|I>>>22),I=R+(b^(k|~g))+w[14]+2878612391&4294967295,R=k+(I<<15&4294967295|I>>>17),I=g+(k^(R|~b))+w[5]+4237533241&4294967295,g=R+(I<<21&4294967295|I>>>11),I=b+(R^(g|~k))+w[12]+1700485571&4294967295,b=g+(I<<6&4294967295|I>>>26),I=k+(g^(b|~R))+w[3]+2399980690&4294967295,k=b+(I<<10&4294967295|I>>>22),I=R+(b^(k|~g))+w[10]+4293915773&4294967295,R=k+(I<<15&4294967295|I>>>17),I=g+(k^(R|~b))+w[1]+2240044497&4294967295,g=R+(I<<21&4294967295|I>>>11),I=b+(R^(g|~k))+w[8]+1873313359&4294967295,b=g+(I<<6&4294967295|I>>>26),I=k+(g^(b|~R))+w[15]+4264355552&4294967295,k=b+(I<<10&4294967295|I>>>22),I=R+(b^(k|~g))+w[6]+2734768916&4294967295,R=k+(I<<15&4294967295|I>>>17),I=g+(k^(R|~b))+w[13]+1309151649&4294967295,g=R+(I<<21&4294967295|I>>>11),I=b+(R^(g|~k))+w[4]+4149444226&4294967295,b=g+(I<<6&4294967295|I>>>26),I=k+(g^(b|~R))+w[11]+3174756917&4294967295,k=b+(I<<10&4294967295|I>>>22),I=R+(b^(k|~g))+w[2]+718787259&4294967295,R=k+(I<<15&4294967295|I>>>17),I=g+(k^(R|~b))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var g=b-this.blockSize,w=this.B,R=this.h,k=0;k<b;){if(R==0)for(;k<=g;)s(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<b;)if(w[R++]=T.charCodeAt(k++),R==this.blockSize){s(this,w),R=0;break}}else for(;k<b;)if(w[R++]=T[k++],R==this.blockSize){s(this,w),R=0;break}}this.h=R,this.o+=b},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var g=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=g&255,g/=256;for(this.u(T),T=Array(16),b=g=0;4>b;++b)for(var w=0;32>w;w+=8)T[g++]=this.g[b]>>>w&255;return T};function i(T,b){var g=a;return Object.prototype.hasOwnProperty.call(g,T)?g[T]:g[T]=b(T)}function o(T,b){this.h=b;for(var g=[],w=!0,R=T.length-1;0<=R;R--){var k=T[R]|0;w&&k==b||(g[R]=k,w=!1)}this.g=g}var a={};function u(T){return-128<=T&&128>T?i(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return S(c(-T));for(var b=[],g=1,w=0;T>=g;w++)b[w]=T/g|0,g*=4294967296;return new o(b,0)}function d(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return S(d(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var g=c(Math.pow(b,8)),w=f,R=0;R<T.length;R+=8){var k=Math.min(8,T.length-R),I=parseInt(T.substring(R,R+k),b);8>k?(k=c(Math.pow(b,k)),w=w.j(k).add(c(I))):(w=w.j(g),w=w.add(c(I)))}return w}var f=u(0),p=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(D(this))return-S(this).m();for(var T=0,b=1,g=0;g<this.g.length;g++){var w=this.i(g);T+=(0<=w?w:4294967296+w)*b,b*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P(this))return"0";if(D(this))return"-"+S(this).toString(T);for(var b=c(Math.pow(T,6)),g=this,w="";;){var R=U(g,b).g;g=O(g,R.j(b));var k=((0<g.g.length?g.g[0]:g.h)>>>0).toString(T);if(g=R,P(g))return k+w;for(;6>k.length;)k="0"+k;w=k+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function P(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function D(T){return T.h==-1}t.l=function(T){return T=O(this,T),D(T)?-1:P(T)?0:1};function S(T){for(var b=T.g.length,g=[],w=0;w<b;w++)g[w]=~T.g[w];return new o(g,~T.h).add(p)}t.abs=function(){return D(this)?S(this):this},t.add=function(T){for(var b=Math.max(this.g.length,T.g.length),g=[],w=0,R=0;R<=b;R++){var k=w+(this.i(R)&65535)+(T.i(R)&65535),I=(k>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);w=I>>>16,k&=65535,I&=65535,g[R]=I<<16|k}return new o(g,g[g.length-1]&-2147483648?-1:0)};function O(T,b){return T.add(S(b))}t.j=function(T){if(P(this)||P(T))return f;if(D(this))return D(T)?S(this).j(S(T)):S(S(this).j(T));if(D(T))return S(this.j(S(T)));if(0>this.l(_)&&0>T.l(_))return c(this.m()*T.m());for(var b=this.g.length+T.g.length,g=[],w=0;w<2*b;w++)g[w]=0;for(w=0;w<this.g.length;w++)for(var R=0;R<T.g.length;R++){var k=this.i(w)>>>16,I=this.i(w)&65535,j=T.i(R)>>>16,K=T.i(R)&65535;g[2*w+2*R]+=I*K,$(g,2*w+2*R),g[2*w+2*R+1]+=k*K,$(g,2*w+2*R+1),g[2*w+2*R+1]+=I*j,$(g,2*w+2*R+1),g[2*w+2*R+2]+=k*j,$(g,2*w+2*R+2)}for(w=0;w<b;w++)g[w]=g[2*w+1]<<16|g[2*w];for(w=b;w<2*b;w++)g[w]=0;return new o(g,0)};function $(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function F(T,b){this.g=T,this.h=b}function U(T,b){if(P(b))throw Error("division by zero");if(P(T))return new F(f,f);if(D(T))return b=U(S(T),b),new F(S(b.g),S(b.h));if(D(b))return b=U(T,S(b)),new F(S(b.g),b.h);if(30<T.g.length){if(D(T)||D(b))throw Error("slowDivide_ only works with positive integers.");for(var g=p,w=b;0>=w.l(T);)g=ee(g),w=ee(w);var R=W(g,1),k=W(w,1);for(w=W(w,2),g=W(g,2);!P(w);){var I=k.add(w);0>=I.l(T)&&(R=R.add(g),k=I),w=W(w,1),g=W(g,1)}return b=O(T,R.j(b)),new F(R,b)}for(R=f;0<=T.l(b);){for(g=Math.max(1,Math.floor(T.m()/b.m())),w=Math.ceil(Math.log(g)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),k=c(g),I=k.j(b);D(I)||0<I.l(T);)g-=w,k=c(g),I=k.j(b);P(k)&&(k=p),R=R.add(k),T=O(T,I)}return new F(R,T)}t.A=function(T){return U(this,T).h},t.and=function(T){for(var b=Math.max(this.g.length,T.g.length),g=[],w=0;w<b;w++)g[w]=this.i(w)&T.i(w);return new o(g,this.h&T.h)},t.or=function(T){for(var b=Math.max(this.g.length,T.g.length),g=[],w=0;w<b;w++)g[w]=this.i(w)|T.i(w);return new o(g,this.h|T.h)},t.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),g=[],w=0;w<b;w++)g[w]=this.i(w)^T.i(w);return new o(g,this.h^T.h)};function ee(T){for(var b=T.g.length+1,g=[],w=0;w<b;w++)g[w]=T.i(w)<<1|T.i(w-1)>>>31;return new o(g,T.h)}function W(T,b){var g=b>>5;b%=32;for(var w=T.g.length-g,R=[],k=0;k<w;k++)R[k]=0<b?T.i(k+g)>>>b|T.i(k+g+1)<<32-b:T.i(k+g);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,w_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Os=o}).apply(typeof Qm<"u"?Qm:typeof self<"u"?self:typeof window<"u"?window:{});var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var b_,la,T_,Zl,Wd,E_,A_,I_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nl=="object"&&Nl];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var Y=l[E];if(!(Y in m))break e;m=m[Y]}l=l[l.length-1],E=m[l],h=h(E),h!=E&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var m=0,E=!1,Y={next:function(){if(!E&&m<l.length){var ie=m++;return{value:h(ie,l[ie]),done:!1}}return E=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,m){return l.call.apply(l.bind,arguments)}function f(l,h,m){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,E),l.apply(h,Y)}}return function(){return l.apply(h,arguments)}}function p(l,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function _(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function P(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(E,Y,ie){for(var Pe=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)Pe[vt-2]=arguments[vt];return h.prototype[Y].apply(E,Pe)}}function D(l){const h=l.length;if(0<h){const m=Array(h);for(let E=0;E<h;E++)m[E]=l[E];return m}return[]}function S(l,h){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(u(E)){const Y=l.length||0,ie=E.length||0;l.length=Y+ie;for(let Pe=0;Pe<ie;Pe++)l[Y+Pe]=E[Pe]}else l.push(E)}}class O{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function $(l){return/^[\s\xa0]*$/.test(l)}function F(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function U(l){return U[" "](l),l}U[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function W(l,h,m){for(const E in l)h.call(m,l[E],E,l)}function T(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function b(l){const h={};for(const m in l)h[m]=l[m];return h}const g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,h){let m,E;for(let Y=1;Y<arguments.length;Y++){E=arguments[Y];for(m in E)l[m]=E[m];for(let ie=0;ie<g.length;ie++)m=g[ie],Object.prototype.hasOwnProperty.call(E,m)&&(l[m]=E[m])}}function R(l){var h=1;l=l.split(":");const m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function k(l){a.setTimeout(()=>{throw l},0)}function I(){var l=oe;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class j{constructor(){this.h=this.g=null}add(h,m){const E=K.get();E.set(h,m),this.h?this.h.next=E:this.g=E,this.h=E}}var K=new O(()=>new z,l=>l.reset());class z{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,fe=!1,oe=new j,be=()=>{const l=a.Promise.resolve(void 0);ne=()=>{l.then(te)}};var te=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(m){k(m)}var h=K;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}fe=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return l}();function ae(l,h){if(L.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(ee){e:{try{U(h.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:me[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ae.aa.h.call(this)}}P(ae,L);var me={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var v="closure_listenable_"+(1e6*Math.random()|0),J=0;function Ae(l,h,m,E,Y){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!E,this.ha=Y,this.key=++J,this.da=this.fa=!1}function Ge(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function se(l){this.src=l,this.g={},this.h=0}se.prototype.add=function(l,h,m,E,Y){var ie=l.toString();l=this.g[ie],l||(l=this.g[ie]=[],this.h++);var Pe=A(l,h,E,Y);return-1<Pe?(h=l[Pe],m||(h.fa=!1)):(h=new Ae(h,this.src,ie,!!E,Y),h.fa=m,l.push(h)),h};function C(l,h){var m=h.type;if(m in l.g){var E=l.g[m],Y=Array.prototype.indexOf.call(E,h,void 0),ie;(ie=0<=Y)&&Array.prototype.splice.call(E,Y,1),ie&&(Ge(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function A(l,h,m,E){for(var Y=0;Y<l.length;++Y){var ie=l[Y];if(!ie.da&&ie.listener==h&&ie.capture==!!m&&ie.ha==E)return Y}return-1}var V="closure_lm_"+(1e6*Math.random()|0),y={};function q(l,h,m,E,Y){if(Array.isArray(h)){for(var ie=0;ie<h.length;ie++)q(l,h[ie],m,E,Y);return null}return m=Ie(m),l&&l[v]?l.K(h,m,c(E)?!!E.capture:!1,Y):H(l,h,m,!1,E,Y)}function H(l,h,m,E,Y,ie){if(!h)throw Error("Invalid event type");var Pe=c(Y)?!!Y.capture:!!Y,vt=x(l);if(vt||(l[V]=vt=new se(l)),m=vt.add(h,m,E,Pe,ie),m.proxy)return m;if(E=Q(),m.proxy=E,E.src=l,E.listener=m,l.addEventListener)Z||(Y=Pe),Y===void 0&&(Y=!1),l.addEventListener(h.toString(),E,Y);else if(l.attachEvent)l.attachEvent(le(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Q(){function l(m){return h.call(l.src,l.listener,m)}const h=ke;return l}function de(l,h,m,E,Y){if(Array.isArray(h))for(var ie=0;ie<h.length;ie++)de(l,h[ie],m,E,Y);else E=c(E)?!!E.capture:!!E,m=Ie(m),l&&l[v]?(l=l.i,h=String(h).toString(),h in l.g&&(ie=l.g[h],m=A(ie,m,E,Y),-1<m&&(Ge(ie[m]),Array.prototype.splice.call(ie,m,1),ie.length==0&&(delete l.g[h],l.h--)))):l&&(l=x(l))&&(h=l.g[h.toString()],l=-1,h&&(l=A(h,m,E,Y)),(m=-1<l?h[l]:null)&&ue(m))}function ue(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[v])C(h.i,l);else{var m=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(m,E,l.capture):h.detachEvent?h.detachEvent(le(m),E):h.addListener&&h.removeListener&&h.removeListener(E),(m=x(h))?(C(m,l),m.h==0&&(m.src=null,h[V]=null)):Ge(l)}}}function le(l){return l in y?y[l]:y[l]="on"+l}function ke(l,h){if(l.da)l=!0;else{h=new ae(h,this);var m=l.listener,E=l.ha||l.src;l.fa&&ue(l),l=m.call(E,h)}return l}function x(l){return l=l[V],l instanceof se?l:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(l){return typeof l=="function"?l:(l[re]||(l[re]=function(h){return l.handleEvent(h)}),l[re])}function Se(){Ee.call(this),this.i=new se(this),this.M=this,this.F=null}P(Se,Ee),Se.prototype[v]=!0,Se.prototype.removeEventListener=function(l,h,m,E){de(this,l,h,m,E)};function Fe(l,h){var m,E=l.F;if(E)for(m=[];E;E=E.F)m.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new L(h,l);else if(h instanceof L)h.target=h.target||l;else{var Y=h;h=new L(E,l),w(h,Y)}if(Y=!0,m)for(var ie=m.length-1;0<=ie;ie--){var Pe=h.g=m[ie];Y=we(Pe,E,!0,h)&&Y}if(Pe=h.g=l,Y=we(Pe,E,!0,h)&&Y,Y=we(Pe,E,!1,h)&&Y,m)for(ie=0;ie<m.length;ie++)Pe=h.g=m[ie],Y=we(Pe,E,!1,h)&&Y}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],E=0;E<m.length;E++)Ge(m[E]);delete l.g[h],l.h--}}this.F=null},Se.prototype.K=function(l,h,m,E){return this.i.add(String(l),h,!1,m,E)},Se.prototype.L=function(l,h,m,E){return this.i.add(String(l),h,!0,m,E)};function we(l,h,m,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var Y=!0,ie=0;ie<h.length;++ie){var Pe=h[ie];if(Pe&&!Pe.da&&Pe.capture==m){var vt=Pe.listener,an=Pe.ha||Pe.src;Pe.fa&&C(l.i,Pe),Y=vt.call(an,E)!==!1&&Y}}return Y&&!E.defaultPrevented}function Ze(l,h,m){if(typeof l=="function")m&&(l=p(l,m));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function pt(l){l.g=Ze(()=>{l.g=null,l.i&&(l.i=!1,pt(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class pn extends Ee{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:pt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vt(l){Ee.call(this),this.h=l,this.g={}}P(Vt,Ee);var Xn=[];function Br(l){W(l.g,function(h,m){this.g.hasOwnProperty(m)&&ue(h)},l),l.g={}}Vt.prototype.N=function(){Vt.aa.N.call(this),Br(this)},Vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lt=a.JSON.stringify,mn=a.JSON.parse,hs=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function G(){}G.prototype.h=null;function Te(l){return l.h||(l.h=l.i())}function Ne(){}var We={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pe(){L.call(this,"d")}P(pe,L);function Re(){L.call(this,"c")}P(Re,L);var xe={},Jn=null;function Cn(){return Jn=Jn||new Se}xe.La="serverreachability";function br(l){L.call(this,xe.La,l)}P(br,L);function $n(l){const h=Cn();Fe(h,new br(h))}xe.STAT_EVENT="statevent";function ji(l,h){L.call(this,xe.STAT_EVENT,l),this.stat=h}P(ji,L);function on(l){const h=Cn();Fe(h,new ji(h,l))}xe.Ma="timingevent";function dp(l,h){L.call(this,xe.Ma,l),this.size=h}P(dp,L);function jo(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function qo(){this.g=!0}qo.prototype.xa=function(){this.g=!1};function Hb(l,h,m,E,Y,ie){l.info(function(){if(l.g)if(ie)for(var Pe="",vt=ie.split("&"),an=0;an<vt.length;an++){var ot=vt[an].split("=");if(1<ot.length){var gn=ot[0];ot=ot[1];var vn=gn.split("_");Pe=2<=vn.length&&vn[1]=="type"?Pe+(gn+"="+ot+"&"):Pe+(gn+"=redacted&")}}else Pe=null;else Pe=ie;return"XMLHTTP REQ ("+E+") [attempt "+Y+"]: "+h+`
`+m+`
`+Pe})}function Wb(l,h,m,E,Y,ie,Pe){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+Y+"]: "+h+`
`+m+`
`+ie+" "+Pe})}function qi(l,h,m,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Yb(l,m)+(E?" "+E:"")})}function zb(l,h){l.info(function(){return"TIMEOUT: "+h})}qo.prototype.info=function(){};function Yb(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var E=m[l];if(!(2>E.length)){var Y=E[1];if(Array.isArray(Y)&&!(1>Y.length)){var ie=Y[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var Pe=1;Pe<Y.length;Pe++)Y[Pe]=""}}}}return Lt(m)}catch{return h}}var ml={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xc;function gl(){}P(gl,G),gl.prototype.g=function(){return new XMLHttpRequest},gl.prototype.i=function(){return{}},xc=new gl;function fs(l,h,m,E){this.j=l,this.i=h,this.l=m,this.R=E||1,this.U=new Vt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fp}function fp(){this.i=null,this.g="",this.h=!1}var pp={},Oc={};function Nc(l,h,m){l.L=1,l.v=wl(jr(h)),l.m=m,l.P=!0,mp(l,null)}function mp(l,h){l.F=Date.now(),vl(l),l.A=jr(l.v);var m=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Cp(m.i,"t",E),l.C=0,m=l.j.J,l.h=new fp,l.g=Yp(l.j,m?h:null,!l.m),0<l.O&&(l.M=new pn(p(l.Y,l,l.g),l.O)),h=l.U,m=l.g,E=l.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Xn[0]=Y.toString()),Y=Xn);for(var ie=0;ie<Y.length;ie++){var Pe=q(m,Y[ie],E||h.handleEvent,!1,h.h||h);if(!Pe)break;h.g[Pe.key]=Pe}h=l.H?b(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),$n(),Hb(l.i,l.u,l.A,l.l,l.R,l.m)}fs.prototype.ca=function(l){l=l.target;const h=this.M;h&&qr(l)==3?h.j():this.Y(l)},fs.prototype.Y=function(l){try{if(l==this.g)e:{const vn=qr(this.g);var h=this.g.Ba();const zi=this.g.Z();if(!(3>vn)&&(vn!=3||this.g&&(this.h.h||this.g.oa()||Vp(this.g)))){this.J||vn!=4||h==7||(h==8||0>=zi?$n(3):$n(2)),Vc(this);var m=this.g.Z();this.X=m;t:if(gp(this)){var E=Vp(this.g);l="";var Y=E.length,ie=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){li(this),Ho(this);var Pe="";break t}this.h.i=new a.TextDecoder}for(h=0;h<Y;h++)this.h.h=!0,l+=this.h.i.decode(E[h],{stream:!(ie&&h==Y-1)});E.length=0,this.h.g+=l,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=m==200,Wb(this.i,this.u,this.A,this.l,this.R,vn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var vt,an=this.g;if((vt=an.g?an.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(vt)){var ot=vt;break t}}ot=null}if(m=ot)qi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lc(this,m);else{this.o=!1,this.s=3,on(12),li(this),Ho(this);break e}}if(this.P){m=!0;let ar;for(;!this.J&&this.C<Pe.length;)if(ar=Kb(this,Pe),ar==Oc){vn==4&&(this.s=4,on(14),m=!1),qi(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==pp){this.s=4,on(15),qi(this.i,this.l,Pe,"[Invalid Chunk]"),m=!1;break}else qi(this.i,this.l,ar,null),Lc(this,ar);if(gp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vn!=4||Pe.length!=0||this.h.h||(this.s=1,on(16),m=!1),this.o=this.o&&m,!m)qi(this.i,this.l,Pe,"[Invalid Chunked Response]"),li(this),Ho(this);else if(0<Pe.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),qc(gn),gn.M=!0,on(11))}}else qi(this.i,this.l,Pe,null),Lc(this,Pe);vn==4&&li(this),this.o&&!this.J&&(vn==4?qp(this.j,this):(this.o=!1,vl(this)))}else dT(this.g),m==400&&0<Pe.indexOf("Unknown SID")?(this.s=3,on(12)):(this.s=0,on(13)),li(this),Ho(this)}}}catch{}finally{}};function gp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Kb(l,h){var m=l.C,E=h.indexOf(`
`,m);return E==-1?Oc:(m=Number(h.substring(m,E)),isNaN(m)?pp:(E+=1,E+m>h.length?Oc:(h=h.slice(E,E+m),l.C=E+m,h)))}fs.prototype.cancel=function(){this.J=!0,li(this)};function vl(l){l.S=Date.now()+l.I,vp(l,l.I)}function vp(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=jo(p(l.ba,l),h)}function Vc(l){l.B&&(a.clearTimeout(l.B),l.B=null)}fs.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(zb(this.i,this.A),this.L!=2&&($n(),on(17)),li(this),this.s=2,Ho(this)):vp(this,this.S-l)};function Ho(l){l.j.G==0||l.J||qp(l.j,l)}function li(l){Vc(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Br(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Lc(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||Fc(m.h,l))){if(!l.K&&Fc(m.h,l)&&m.G==3){try{var E=m.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var Y=E;if(Y[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Pl(m),Al(m);else break e;jc(m),on(18)}}else m.za=Y[1],0<m.za-m.T&&37500>Y[2]&&m.F&&m.v==0&&!m.C&&(m.C=jo(p(m.Za,m),6e3));if(1>=wp(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ci(m,11)}else if((l.K||m.g==l)&&Pl(m),!$(h))for(Y=m.Da.g.parse(h),h=0;h<Y.length;h++){let ot=Y[h];if(m.T=ot[0],ot=ot[1],m.G==2)if(ot[0]=="c"){m.K=ot[1],m.ia=ot[2];const gn=ot[3];gn!=null&&(m.la=gn,m.j.info("VER="+m.la));const vn=ot[4];vn!=null&&(m.Aa=vn,m.j.info("SVER="+m.Aa));const zi=ot[5];zi!=null&&typeof zi=="number"&&0<zi&&(E=1.5*zi,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const ar=l.g;if(ar){const Rl=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rl){var ie=E.h;ie.g||Rl.indexOf("spdy")==-1&&Rl.indexOf("quic")==-1&&Rl.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Uc(ie,ie.h),ie.h=null))}if(E.D){const Hc=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Hc&&(E.ya=Hc,Tt(E.I,E.D,Hc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var Pe=l;if(E.qa=zp(E,E.J?E.ia:null,E.W),Pe.K){bp(E.h,Pe);var vt=Pe,an=E.L;an&&(vt.I=an),vt.B&&(Vc(vt),vl(vt)),E.g=Pe}else Bp(E);0<m.i.length&&Il(m)}else ot[0]!="stop"&&ot[0]!="close"||ci(m,7);else m.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?ci(m,7):Bc(m):ot[0]!="noop"&&m.l&&m.l.ta(ot),m.v=0)}}$n(4)}catch{}}var Gb=class{constructor(l,h){this.g=l,this.map=h}};function yp(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _p(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function wp(l){return l.h?1:l.g?l.g.size:0}function Fc(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Uc(l,h){l.g?l.g.add(h):l.h=h}function bp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}yp.prototype.cancel=function(){if(this.i=Tp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Tp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.D);return h}return D(l.i)}function Qb(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],m=l.length,E=0;E<m;E++)h.push(l[E]);return h}h=[],m=0;for(E in l)h[m++]=l[E];return h}function Xb(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(const E in l)h[m++]=E;return h}}}function Ep(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=Xb(l),E=Qb(l),Y=E.length,ie=0;ie<Y;ie++)h.call(void 0,E[ie],m&&m[ie],l)}var Ap=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jb(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var E=l[m].indexOf("="),Y=null;if(0<=E){var ie=l[m].substring(0,E);Y=l[m].substring(E+1)}else ie=l[m];h(ie,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function ui(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ui){this.h=l.h,yl(this,l.j),this.o=l.o,this.g=l.g,_l(this,l.s),this.l=l.l;var h=l.i,m=new Yo;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Ip(this,m),this.m=l.m}else l&&(h=String(l).match(Ap))?(this.h=!1,yl(this,h[1]||"",!0),this.o=Wo(h[2]||""),this.g=Wo(h[3]||"",!0),_l(this,h[4]),this.l=Wo(h[5]||"",!0),Ip(this,h[6]||"",!0),this.m=Wo(h[7]||"")):(this.h=!1,this.i=new Yo(null,this.h))}ui.prototype.toString=function(){var l=[],h=this.j;h&&l.push(zo(h,Pp,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(zo(h,Pp,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(zo(m,m.charAt(0)=="/"?tT:eT,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",zo(m,rT)),l.join("")};function jr(l){return new ui(l)}function yl(l,h,m){l.j=m?Wo(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function _l(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Ip(l,h,m){h instanceof Yo?(l.i=h,sT(l.i,l.h)):(m||(h=zo(h,nT)),l.i=new Yo(h,l.h))}function Tt(l,h,m){l.i.set(h,m)}function wl(l){return Tt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Wo(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function zo(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,Zb),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Zb(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Pp=/[#\/\?@]/g,eT=/[#\?:]/g,tT=/[#\?]/g,nT=/[#\?@]/g,rT=/#/g;function Yo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function ps(l){l.g||(l.g=new Map,l.h=0,l.i&&Jb(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Yo.prototype,t.add=function(l,h){ps(this),this.i=null,l=Hi(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function kp(l,h){ps(l),h=Hi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Rp(l,h){return ps(l),h=Hi(l,h),l.g.has(h)}t.forEach=function(l,h){ps(this),this.g.forEach(function(m,E){m.forEach(function(Y){l.call(h,Y,E,this)},this)},this)},t.na=function(){ps(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let E=0;E<h.length;E++){const Y=l[E];for(let ie=0;ie<Y.length;ie++)m.push(h[E])}return m},t.V=function(l){ps(this);let h=[];if(typeof l=="string")Rp(this,l)&&(h=h.concat(this.g.get(Hi(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},t.set=function(l,h){return ps(this),this.i=null,l=Hi(this,l),Rp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Cp(l,h,m){kp(l,h),0<m.length&&(l.i=null,l.g.set(Hi(l,h),D(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var E=h[m];const ie=encodeURIComponent(String(E)),Pe=this.V(E);for(E=0;E<Pe.length;E++){var Y=ie;Pe[E]!==""&&(Y+="="+encodeURIComponent(String(Pe[E]))),l.push(Y)}}return this.i=l.join("&")};function Hi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function sT(l,h){h&&!l.j&&(ps(l),l.i=null,l.g.forEach(function(m,E){var Y=E.toLowerCase();E!=Y&&(kp(this,E),Cp(this,Y,m))},l)),l.j=h}function iT(l,h){const m=new qo;if(a.Image){const E=new Image;E.onload=_(ms,m,"TestLoadImage: loaded",!0,h,E),E.onerror=_(ms,m,"TestLoadImage: error",!1,h,E),E.onabort=_(ms,m,"TestLoadImage: abort",!1,h,E),E.ontimeout=_(ms,m,"TestLoadImage: timeout",!1,h,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function oT(l,h){const m=new qo,E=new AbortController,Y=setTimeout(()=>{E.abort(),ms(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(ie=>{clearTimeout(Y),ie.ok?ms(m,"TestPingServer: ok",!0,h):ms(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(Y),ms(m,"TestPingServer: error",!1,h)})}function ms(l,h,m,E,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),E(m)}catch{}}function aT(){this.g=new hs}function lT(l,h,m){const E=m||"";try{Ep(l,function(Y,ie){let Pe=Y;c(Y)&&(Pe=Lt(Y)),h.push(E+ie+"="+encodeURIComponent(Pe))})}catch(Y){throw h.push(E+"type="+encodeURIComponent("_badmap")),Y}}function bl(l){this.l=l.Ub||null,this.j=l.eb||!1}P(bl,G),bl.prototype.g=function(){return new Tl(this.l,this.j)},bl.prototype.i=function(l){return function(){return l}}({});function Tl(l,h){Se.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Tl,Se),t=Tl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Go(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ko(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ko(this):Go(this),this.readyState==3&&Sp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ko(this))},t.Qa=function(l){this.g&&(this.response=l,Ko(this))},t.ga=function(){this.g&&Ko(this)};function Ko(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Go(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function Go(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Dp(l){let h="";return W(l,function(m,E){h+=E,h+=":",h+=m,h+=`\r
`}),h}function $c(l,h,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=Dp(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Tt(l,h,m))}function St(l){Se.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(St,Se);var uT=/^https?$/i,cT=["POST","PUT"];t=St.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xc.g(),this.v=this.o?Te(this.o):Te(xc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(ie){Mp(this,ie);return}if(l=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var Y in E)m.set(Y,E[Y]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const ie of E.keys())m.set(ie,E.get(ie));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(ie=>ie.toLowerCase()=="content-type"),Y=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cT,h,void 0))||E||Y||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Pe]of m)this.g.setRequestHeader(ie,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Np(this),this.u=!0,this.g.send(l),this.u=!1}catch(ie){Mp(this,ie)}};function Mp(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,xp(l),El(l)}function xp(l){l.A||(l.A=!0,Fe(l,"complete"),Fe(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Fe(this,"complete"),Fe(this,"abort"),El(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),El(this,!0)),St.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Op(this):this.bb())},t.bb=function(){Op(this)};function Op(l){if(l.h&&typeof o<"u"&&(!l.v[1]||qr(l)!=4||l.Z()!=2)){if(l.u&&qr(l)==4)Ze(l.Ea,0,l);else if(Fe(l,"readystatechange"),qr(l)==4){l.h=!1;try{const Pe=l.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var E;if(E=Pe===0){var Y=String(l.D).match(Ap)[1]||null;!Y&&a.self&&a.self.location&&(Y=a.self.location.protocol.slice(0,-1)),E=!uT.test(Y?Y.toLowerCase():"")}m=E}if(m)Fe(l,"complete"),Fe(l,"success");else{l.m=6;try{var ie=2<qr(l)?l.g.statusText:""}catch{ie=""}l.l=ie+" ["+l.Z()+"]",xp(l)}}finally{El(l)}}}}function El(l,h){if(l.g){Np(l);const m=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Fe(l,"ready");try{m.onreadystatechange=E}catch{}}}function Np(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function qr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),mn(h)}};function Vp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function dT(l){const h={};l=(l.g&&2<=qr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if($(l[E]))continue;var m=R(l[E]);const Y=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const ie=h[Y]||[];h[Y]=ie,ie.push(m)}T(h,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qo(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function Lp(l){this.Aa=0,this.i=[],this.j=new qo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qo("baseRetryDelayMs",5e3,l),this.cb=Qo("retryDelaySeedMs",1e4,l),this.Wa=Qo("forwardChannelMaxRetries",2,l),this.wa=Qo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yp(l&&l.concurrentRequestLimit),this.Da=new aT,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Lp.prototype,t.la=8,t.G=1,t.connect=function(l,h,m,E){on(0),this.W=l,this.H=h||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=zp(this,null,this.W),Il(this)};function Bc(l){if(Fp(l),l.G==3){var h=l.U++,m=jr(l.I);if(Tt(m,"SID",l.K),Tt(m,"RID",h),Tt(m,"TYPE","terminate"),Xo(l,m),h=new fs(l,l.j,h),h.L=2,h.v=wl(jr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=Yp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),vl(h)}Wp(l)}function Al(l){l.g&&(qc(l),l.g.cancel(),l.g=null)}function Fp(l){Al(l),l.u&&(a.clearTimeout(l.u),l.u=null),Pl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Il(l){if(!_p(l.h)&&!l.s){l.s=!0;var h=l.Ga;ne||be(),fe||(ne(),fe=!0),oe.add(h,l),l.B=0}}function hT(l,h){return wp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=jo(p(l.Ga,l,h),Hp(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const Y=new fs(this,this.j,l);let ie=this.o;if(this.S&&(ie?(ie=b(ie),w(ie,this.S)):ie=this.S),this.m!==null||this.O||(Y.H=ie,ie=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=$p(this,Y,h),m=jr(this.I),Tt(m,"RID",l),Tt(m,"CVER",22),this.D&&Tt(m,"X-HTTP-Session-Id",this.D),Xo(this,m),ie&&(this.O?h="headers="+encodeURIComponent(String(Dp(ie)))+"&"+h:this.m&&$c(m,this.m,ie)),Uc(this.h,Y),this.Ua&&Tt(m,"TYPE","init"),this.P?(Tt(m,"$req",h),Tt(m,"SID","null"),Y.T=!0,Nc(Y,m,null)):Nc(Y,m,h),this.G=2}}else this.G==3&&(l?Up(this,l):this.i.length==0||_p(this.h)||Up(this))};function Up(l,h){var m;h?m=h.l:m=l.U++;const E=jr(l.I);Tt(E,"SID",l.K),Tt(E,"RID",m),Tt(E,"AID",l.T),Xo(l,E),l.m&&l.o&&$c(E,l.m,l.o),m=new fs(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=$p(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Uc(l.h,m),Nc(m,E,h)}function Xo(l,h){l.H&&W(l.H,function(m,E){Tt(h,E,m)}),l.l&&Ep({},function(m,E){Tt(h,E,m)})}function $p(l,h,m){m=Math.min(l.i.length,m);var E=l.l?p(l.l.Na,l.l,l):null;e:{var Y=l.i;let ie=-1;for(;;){const Pe=["count="+m];ie==-1?0<m?(ie=Y[0].g,Pe.push("ofs="+ie)):ie=0:Pe.push("ofs="+ie);let vt=!0;for(let an=0;an<m;an++){let ot=Y[an].g;const gn=Y[an].map;if(ot-=ie,0>ot)ie=Math.max(0,Y[an].g-100),vt=!1;else try{lT(gn,Pe,"req"+ot+"_")}catch{E&&E(gn)}}if(vt){E=Pe.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,E}function Bp(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ne||be(),fe||(ne(),fe=!0),oe.add(h,l),l.v=0}}function jc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=jo(p(l.Fa,l),Hp(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,jp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=jo(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,on(10),Al(this),jp(this))};function qc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function jp(l){l.g=new fs(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=jr(l.qa);Tt(h,"RID","rpc"),Tt(h,"SID",l.K),Tt(h,"AID",l.T),Tt(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Tt(h,"TO",l.ja),Tt(h,"TYPE","xmlhttp"),Xo(l,h),l.m&&l.o&&$c(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=wl(jr(h)),m.m=null,m.P=!0,mp(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Al(this),jc(this),on(19))};function Pl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function qp(l,h){var m=null;if(l.g==h){Pl(l),qc(l),l.g=null;var E=2}else if(Fc(l.h,h))m=h.D,bp(l.h,h),E=1;else return;if(l.G!=0){if(h.o)if(E==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var Y=l.B;E=Cn(),Fe(E,new dp(E,m)),Il(l)}else Bp(l);else if(Y=h.s,Y==3||Y==0&&0<h.X||!(E==1&&hT(l,h)||E==2&&jc(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),Y){case 1:ci(l,5);break;case 4:ci(l,10);break;case 3:ci(l,6);break;default:ci(l,2)}}}function Hp(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function ci(l,h){if(l.j.info("Error code "+h),h==2){var m=p(l.fb,l),E=l.Xa;const Y=!E;E=new ui(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yl(E,"https"),wl(E),Y?iT(E.toString(),m):oT(E.toString(),m)}else on(2);l.G=0,l.l&&l.l.sa(h),Wp(l),Fp(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function Wp(l){if(l.G=0,l.ka=[],l.l){const h=Tp(l.h);(h.length!=0||l.i.length!=0)&&(S(l.ka,h),S(l.ka,l.i),l.h.i.length=0,D(l.i),l.i.length=0),l.l.ra()}}function zp(l,h,m){var E=m instanceof ui?jr(m):new ui(m);if(E.g!="")h&&(E.g=h+"."+E.g),_l(E,E.s);else{var Y=a.location;E=Y.protocol,h=h?h+"."+Y.hostname:Y.hostname,Y=+Y.port;var ie=new ui(null);E&&yl(ie,E),h&&(ie.g=h),Y&&_l(ie,Y),m&&(ie.l=m),E=ie}return m=l.D,h=l.ya,m&&h&&Tt(E,m,h),Tt(E,"VER",l.la),Xo(l,E),E}function Yp(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new St(new bl({eb:m})):new St(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kp(){}t=Kp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function kl(){}kl.prototype.g=function(l,h){return new Wn(l,h)};function Wn(l,h){Se.call(this),this.g=new Lp(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!$(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!$(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Wi(this)}P(Wn,Se),Wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){Bc(this.g)},Wn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Lt(l),l=m);h.i.push(new Gb(h.Ya++,l)),h.G==3&&Il(h)},Wn.prototype.N=function(){this.g.l=null,delete this.j,Bc(this.g),delete this.g,Wn.aa.N.call(this)};function Gp(l){pe.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}P(Gp,pe);function Qp(){Re.call(this),this.status=1}P(Qp,Re);function Wi(l){this.g=l}P(Wi,Kp),Wi.prototype.ua=function(){Fe(this.g,"a")},Wi.prototype.ta=function(l){Fe(this.g,new Gp(l))},Wi.prototype.sa=function(l){Fe(this.g,new Qp)},Wi.prototype.ra=function(){Fe(this.g,"b")},kl.prototype.createWebChannel=kl.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,I_=function(){return new kl},A_=function(){return Cn()},E_=xe,Wd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ml.NO_ERROR=0,ml.TIMEOUT=8,ml.HTTP_ERROR=6,Zl=ml,hp.COMPLETE="complete",T_=hp,Ne.EventType=We,We.OPEN="a",We.CLOSE="b",We.ERROR="c",We.MESSAGE="d",Se.prototype.listen=Se.prototype.K,la=Ne,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,b_=St}).apply(typeof Nl<"u"?Nl:typeof self<"u"?self:typeof window<"u"?window:{});const Xm="@firebase/firestore",Jm="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Bh("@firebase/firestore");function Xi(){return Si.logLevel}function De(t,...e){if(Si.logLevel<=nt.DEBUG){const n=e.map(Hh);Si.debug(`Firestore (${Oo}): ${t}`,...n)}}function os(t,...e){if(Si.logLevel<=nt.ERROR){const n=e.map(Hh);Si.error(`Firestore (${Oo}): ${t}`,...n)}}function js(t,...e){if(Si.logLevel<=nt.WARN){const n=e.map(Hh);Si.warn(`Firestore (${Oo}): ${t}`,...n)}}function Hh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,P_(t,r,n)}function P_(t,e,n){let r=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw os(r),new Error(r)}function dt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||P_(e,s,r)}function Ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends $r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bn.UNAUTHENTICATED))}shutdown(){}}class kI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RI{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){dt(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ts,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ts)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string",31837,{l:r}),new k_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class CI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class SI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new CI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){dt(this.o===void 0,3512);const r=i=>{i.error!=null&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,De("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(dt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=MI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Je(t,e){return t<e?-1:t>e?1:0}function zd(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Je(r,s);{const i=R_(),o=xI(i.encode(eg(t,n)),i.encode(eg(e,n)));return o!==0?o:Je(r,s)}}n+=r>65535?2:1}return Je(t.length,e.length)}function eg(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function xI(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Je(t[n],e[n]);return Je(t.length,e.length)}function wo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="__name__";class Ar{constructor(e,n,r){n===void 0?n=0:n>e.length&&je(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&je(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ar.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ar?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ar.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Je(e.length,n.length)}static compareSegments(e,n){const r=Ar.isNumericId(e),s=Ar.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ar.extractNumericId(e).compare(Ar.extractNumericId(n)):zd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Os.fromString(e.substring(4,e.length-2))}}class bt extends Ar{construct(e,n,r){return new bt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new bt(n)}static emptyPath(){return new bt([])}}const OI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Ar{construct(e,n,r){return new dn(e,n,r)}static isValidIdentifier(e){return OI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tg}static keyField(){return new dn([tg])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Ce(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Ce(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ce(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Ce(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(bt.fromString(e))}static fromName(e){return new Le(bt.fromString(e).popFirst(5))}static empty(){return new Le(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e,n){if(!n)throw new Ce(he.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NI(t,e,n,r){if(e===!0&&r===!0)throw new Ce(he.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ng(t){if(!Le.isDocumentKey(t))throw new Ce(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rg(t){if(Le.isDocumentKey(t))throw new Ce(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function S_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":je(12329,{type:typeof t})}function ir(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ce(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sc(t);throw new Ce(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,e){const n={typeString:t};return e&&(n.value=e),n}function tl(t,e){if(!S_(t))throw new Ce(he.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Ce(he.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=-62135596800,ig=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ig);return new _t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ce(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ce(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<sg)throw new Ce(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ig}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tl(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Kt("string",_t._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new _t(0,0))}static max(){return new ze(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=-1;function VI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new qs(s,Le.empty(),e)}function LI(t){return new qs(t.readTime,t.key,Fa)}class qs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qs(ze.min(),Le.empty(),Fa)}static max(){return new qs(ze.max(),Le.empty(),Fa)}}function FI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Le.comparator(t.documentKey,e.documentKey),n!==0?n:Je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $I{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t){if(t.code!==he.FAILED_PRECONDITION||t.message!==UI)throw t;De("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ge((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ge?n:ge.resolve(n)}catch(n){return ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.reject(n)}static resolve(e){return new ge((n,r)=>{n(e)})}static reject(e){return new ge((n,r)=>{r(e)})}static waitFor(e){return new ge((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=ge.resolve(!1);for(const r of e)n=n.next(s=>s?ge.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ge((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new ge((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function BI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ic.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=-1;function oc(t){return t==null}function wu(t){return t===0&&1/t==-1/0}function jI(t){return typeof t=="number"&&Number.isInteger(t)&&!wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="";function qI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=og(e)),e=HI(t.get(n),e);return og(e)}function HI(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case D_:n+="";break;default:n+=i}}return n}function og(t){return t+D_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ti(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function M_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vl(this.root,e,this.comparator,!0)}}class Vl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ln.RED,this.left=s??ln.EMPTY,this.right=i??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ln(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ln.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lg(this.data.getIterator())}getIteratorFrom(e){return new lg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class lg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new Xt(dn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new x_("Invalid base64 string: "+i):i}}(e);return new hn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const WI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(t){if(dt(!!t,39018),typeof t=="string"){let e=0;const n=WI.exec(t);if(dt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$t(t.seconds),nanos:$t(t.nanos)}}function $t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ws(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="server_timestamp",N_="__type__",V_="__previous_value__",L_="__local_write_time__";function Yh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[N_])===null||n===void 0?void 0:n.stringValue)===O_}function ac(t){const e=t.mapValue.fields[V_];return Yh(e)?ac(e):e}function Ua(t){const e=Hs(t.mapValue.fields[L_].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,r,s,i,o,a,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d}}const bu="(default)";class $a{constructor(e,n){this.projectId=e,this.database=n||bu}static empty(){return new $a("","")}get isDefaultDatabase(){return this.database===bu}isEqual(e){return e instanceof $a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="__type__",YI="__max__",Ll={mapValue:{}},U_="__vector__",Tu="value";function zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yh(t)?4:GI(t)?9007199254740991:KI(t)?10:11:je(28295,{value:t})}function Ur(t,e){if(t===e)return!0;const n=zs(t);if(n!==zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ua(t).isEqual(Ua(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Hs(s.timestampValue),a=Hs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ws(s.bytesValue).isEqual(Ws(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $t(s.geoPointValue.latitude)===$t(i.geoPointValue.latitude)&&$t(s.geoPointValue.longitude)===$t(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $t(s.integerValue)===$t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$t(s.doubleValue),a=$t(i.doubleValue);return o===a?wu(o)===wu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return wo(t.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(ag(o)!==ag(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Ur(o[u],a[u])))return!1;return!0}(t,e);default:return je(52216,{left:t})}}function Ba(t,e){return(t.values||[]).find(n=>Ur(n,e))!==void 0}function bo(t,e){if(t===e)return 0;const n=zs(t),r=zs(e);if(n!==r)return Je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=$t(i.integerValue||i.doubleValue),u=$t(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return ug(t.timestampValue,e.timestampValue);case 4:return ug(Ua(t),Ua(e));case 5:return zd(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ws(i),u=Ws(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=Je(a[c],u[c]);if(d!==0)return d}return Je(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Je($t(i.latitude),$t(o.latitude));return a!==0?a:Je($t(i.longitude),$t(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,c,d;const f=i.fields||{},p=o.fields||{},_=(a=f[Tu])===null||a===void 0?void 0:a.arrayValue,P=(u=p[Tu])===null||u===void 0?void 0:u.arrayValue,D=Je(((c=_?.values)===null||c===void 0?void 0:c.length)||0,((d=P?.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:cg(_,P)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ll.mapValue&&o===Ll.mapValue)return 0;if(i===Ll.mapValue)return 1;if(o===Ll.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){const p=zd(u[f],d[f]);if(p!==0)return p;const _=bo(a[u[f]],c[d[f]]);if(_!==0)return _}return Je(u.length,d.length)}(t.mapValue,e.mapValue);default:throw je(23264,{le:n})}}function ug(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const n=Hs(t),r=Hs(e),s=Je(n.seconds,r.seconds);return s!==0?s:Je(n.nanos,r.nanos)}function cg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=bo(n[s],r[s]);if(i)return i}return Je(n.length,r.length)}function To(t){return Yd(t)}function Yd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ws(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Yd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Yd(n.fields[o])}`;return s+"}"}(t.mapValue):je(61005,{value:t})}function eu(t){switch(zs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ac(t);return e?16+eu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ws(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+eu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ti(r.fields,(i,o)=>{s+=i.length+eu(o)}),s}(t.mapValue);default:throw je(13486,{value:t})}}function dg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kd(t){return!!t&&"integerValue"in t}function Kh(t){return!!t&&"arrayValue"in t}function hg(t){return!!t&&"nullValue"in t}function fg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tu(t){return!!t&&"mapValue"in t}function KI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[F_])===null||n===void 0?void 0:n.stringValue)===U_}function wa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ti(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wa(n)}setAll(e){let n=dn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=wa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];tu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ti(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new jn(wa(this.value))}}function $_(t){const e=[];return ti(t.fields,(n,r)=>{const s=new dn([n]);if(tu(r)){const i=$_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new An(e,0,ze.min(),ze.min(),ze.min(),jn.empty(),0)}static newFoundDocument(e,n,r,s){return new An(e,1,n,ze.min(),r,s,0)}static newNoDocument(e,n){return new An(e,2,n,ze.min(),ze.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new An(e,3,n,ze.min(),ze.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.position=e,this.inclusive=n}}function pg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Le.comparator(Le.fromName(o.referenceValue),n.key):r=bo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function mg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ur(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n="asc"){this.field=e,this.dir=n}}function QI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{}class zt extends B_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new JI(e,n,r):n==="array-contains"?new tP(e,r):n==="in"?new nP(e,r):n==="not-in"?new rP(e,r):n==="array-contains-any"?new sP(e,r):new zt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ZI(e,r):new eP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bo(n,this.value)):n!==null&&zs(this.value)===zs(n)&&this.matchesComparison(bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vr extends B_{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new vr(e,n)}matches(e){return j_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function j_(t){return t.op==="and"}function q_(t){return XI(t)&&j_(t)}function XI(t){for(const e of t.filters)if(e instanceof vr)return!1;return!0}function Gd(t){if(t instanceof zt)return t.field.canonicalString()+t.op.toString()+To(t.value);if(q_(t))return t.filters.map(e=>Gd(e)).join(",");{const e=t.filters.map(n=>Gd(n)).join(",");return`${t.op}(${e})`}}function H_(t,e){return t instanceof zt?function(r,s){return s instanceof zt&&r.op===s.op&&r.field.isEqual(s.field)&&Ur(r.value,s.value)}(t,e):t instanceof vr?function(r,s){return s instanceof vr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&H_(o,s.filters[a]),!0):!1}(t,e):void je(19439)}function W_(t){return t instanceof zt?function(n){return`${n.field.canonicalString()} ${n.op} ${To(n.value)}`}(t):t instanceof vr?function(n){return n.op.toString()+" {"+n.getFilters().map(W_).join(" ,")+"}"}(t):"Filter"}class JI extends zt{constructor(e,n,r){super(e,n,r),this.key=Le.fromName(r.referenceValue)}matches(e){const n=Le.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZI extends zt{constructor(e,n){super(e,"in",n),this.keys=z_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class eP extends zt{constructor(e,n){super(e,"not-in",n),this.keys=z_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function z_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Le.fromName(r.referenceValue))}class tP extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kh(n)&&Ba(n.arrayValue,this.value)}}class nP extends zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ba(this.value.arrayValue,n)}}class rP extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ba(this.value.arrayValue,n)}}class sP extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ba(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Pe=null}}function gg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new iP(t,e,n,r,s,i,o)}function Gh(t){const e=Ke(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>To(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>To(r)).join(",")),e.Pe=n}return e.Pe}function Qh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!H_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mg(t.startAt,e.startAt)&&mg(t.endAt,e.endAt)}function Qd(t){return Le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function oP(t,e,n,r,s,i,o,a){return new Lo(t,e,n,r,s,i,o,a)}function lc(t){return new Lo(t)}function vg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Y_(t){return t.collectionGroup!==null}function ba(t){const e=Ke(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(dn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new ja(i,r))}),n.has(dn.keyField().canonicalString())||e.Te.push(new ja(dn.keyField(),r))}return e.Te}function Mr(t){const e=Ke(t);return e.Ie||(e.Ie=aP(e,ba(t))),e.Ie}function aP(t,e){if(t.limitType==="F")return gg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ja(s.field,i)});const n=t.endAt?new Eu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Eu(t.startAt.position,t.startAt.inclusive):null;return gg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xd(t,e){const n=t.filters.concat([e]);return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jd(t,e,n){return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uc(t,e){return Qh(Mr(t),Mr(e))&&t.limitType===e.limitType}function K_(t){return`${Gh(Mr(t))}|lt:${t.limitType}`}function Ji(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>W_(s)).join(", ")}]`),oc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>To(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>To(s)).join(",")),`Target(${r})`}(Mr(t))}; limitType=${t.limitType})`}function cc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Le.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ba(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=pg(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,ba(r),s)||r.endAt&&!function(o,a,u){const c=pg(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,ba(r),s))}(t,e)}function lP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function G_(t){return(e,n)=>{let r=!1;for(const s of ba(t)){const i=uP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function uP(t,e,n){const r=t.field.isKeyField()?Le.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?bo(u,c):je(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return je(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ti(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return M_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new Ct(Le.comparator);function as(){return cP}const Q_=new Ct(Le.comparator);function ua(...t){let e=Q_;for(const n of t)e=e.insert(n.key,n);return e}function X_(t){let e=Q_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _i(){return Ta()}function J_(){return Ta()}function Ta(){return new Fi(t=>t.toString(),(t,e)=>t.isEqual(e))}const dP=new Ct(Le.comparator),hP=new Xt(Le.comparator);function rt(...t){let e=hP;for(const n of t)e=e.add(n);return e}const fP=new Xt(Je);function pP(){return fP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wu(e)?"-0":e}}function Z_(t){return{integerValue:""+t}}function mP(t,e){return jI(e)?Z_(e):Xh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(){this._=void 0}}function gP(t,e,n){return t instanceof qa?function(s,i){const o={fields:{[N_]:{stringValue:O_},[L_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Yh(i)&&(i=ac(i)),i&&(o.fields[V_]=i),{mapValue:o}}(n,e):t instanceof Ha?t0(t,e):t instanceof Wa?n0(t,e):function(s,i){const o=e0(s,i),a=yg(o)+yg(s.Ee);return Kd(o)&&Kd(s.Ee)?Z_(a):Xh(s.serializer,a)}(t,e)}function vP(t,e,n){return t instanceof Ha?t0(t,e):t instanceof Wa?n0(t,e):n}function e0(t,e){return t instanceof Au?function(r){return Kd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class qa extends dc{}class Ha extends dc{constructor(e){super(),this.elements=e}}function t0(t,e){const n=r0(e);for(const r of t.elements)n.some(s=>Ur(s,r))||n.push(r);return{arrayValue:{values:n}}}class Wa extends dc{constructor(e){super(),this.elements=e}}function n0(t,e){let n=r0(e);for(const r of t.elements)n=n.filter(s=>!Ur(s,r));return{arrayValue:{values:n}}}class Au extends dc{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function yg(t){return $t(t.integerValue||t.doubleValue)}function r0(t){return Kh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n){this.field=e,this.transform=n}}function _P(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ha&&s instanceof Ha||r instanceof Wa&&s instanceof Wa?wo(r.elements,s.elements,Ur):r instanceof Au&&s instanceof Au?Ur(r.Ee,s.Ee):r instanceof qa&&s instanceof qa}(t.transform,e.transform)}class wP{constructor(e,n){this.version=e,this.transformResults=n}}class fr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hc{}function s0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jh(t.key,fr.none()):new nl(t.key,t.data,fr.none());{const n=t.data,r=jn.empty();let s=new Xt(dn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ni(t.key,r,new Kn(s.toArray()),fr.none())}}function bP(t,e,n){t instanceof nl?function(s,i,o){const a=s.value.clone(),u=wg(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ni?function(s,i,o){if(!nu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=wg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(i0(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ea(t,e,n,r){return t instanceof nl?function(i,o,a,u){if(!nu(i.precondition,o))return a;const c=i.value.clone(),d=bg(i.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ni?function(i,o,a,u){if(!nu(i.precondition,o))return a;const c=bg(i.fieldTransforms,u,o),d=o.data;return d.setAll(i0(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return nu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function TP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=e0(r.transform,s||null);i!=null&&(n===null&&(n=jn.empty()),n.set(r.field,i))}return n||null}function _g(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&wo(r,s,(i,o)=>_P(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nl extends hc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ni extends hc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function i0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wg(t,e,n){const r=new Map;dt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,vP(o,a,n[s]))}return r}function bg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,gP(i,o,e))}return r}class Jh extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EP extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&bP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ea(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ea(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=J_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=s0(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ze.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),rt())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,(n,r)=>_g(n,r))&&wo(this.baseMutations,e.baseMutations,(n,r)=>_g(n,r))}}class Zh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){dt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return dP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Zh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,st;function kP(t){switch(t){case he.OK:return je(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return je(15467,{code:t})}}function o0(t){if(t===void 0)return os("GRPC error has no .code"),he.UNKNOWN;switch(t){case Wt.OK:return he.OK;case Wt.CANCELLED:return he.CANCELLED;case Wt.UNKNOWN:return he.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return he.INTERNAL;case Wt.UNAVAILABLE:return he.UNAVAILABLE;case Wt.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Wt.NOT_FOUND:return he.NOT_FOUND;case Wt.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Wt.ABORTED:return he.ABORTED;case Wt.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Wt.DATA_LOSS:return he.DATA_LOSS;default:return je(39323,{code:t})}}(st=Wt||(Wt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=new Os([4294967295,4294967295],0);function Tg(t){const e=R_().encode(t),n=new w_;return n.update(e),new Uint8Array(n.digest())}function Eg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Os([n,r],0),new Os([s,i],0)]}class ef{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ca(`Invalid padding: ${n}`);if(r<0)throw new ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ca(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ca(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Os.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Os.fromNumber(r)));return s.compare(RP)===1&&(s=new Os([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Tg(e),[r,s]=Eg(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ef(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=Tg(e),[r,s]=Eg(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fc(ze.min(),s,new Ct(Je),as(),rt())}}class rl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rl(r,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class a0{constructor(e,n){this.targetId=e,this.De=n}}class l0{constructor(e,n,r=hn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ag{constructor(){this.ve=0,this.Ce=Ig(),this.Fe=hn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=rt(),n=rt(),r=rt();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:je(38017,{changeType:i})}}),new rl(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Ig()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class CP{constructor(e){this.We=e,this.Ge=new Map,this.ze=as(),this.je=Fl(),this.Je=Fl(),this.He=new Ct(Je)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:je(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(Qd(i))if(r===0){const o=new Le(i.path);this.Xe(n,o,An.newNoDocument(o,ze.min()))}else dt(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),u=a?this.ut(a,e,o):1;if(u!==0){this.rt(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ws(r).toUint8Array()}catch(u){if(u instanceof x_)return js("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ef(o,s,i)}catch(u){return js(u instanceof ca?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const a=this.st(o);if(a){if(i.current&&Qd(a.target)){const u=new Le(a.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,An.newNoDocument(u,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=rt();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.st(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new fc(e,n,this.He,this.ze,r);return this.ze=as(),this.je=Fl(),this.Je=Fl(),this.He=new Ct(Je),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ag,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Xt(Je),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Xt(Je),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||De("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ag),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Fl(){return new Ct(Le.comparator)}function Ig(){return new Ct(Le.comparator)}const SP={asc:"ASCENDING",desc:"DESCENDING"},DP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MP={and:"AND",or:"OR"};class xP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zd(t,e){return t.useProto3Json||oc(e)?e:{value:e}}function Iu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OP(t,e){return Iu(t,e.toTimestamp())}function xr(t){return dt(!!t,49232),ze.fromTimestamp(function(n){const r=Hs(n);return new _t(r.seconds,r.nanos)}(t))}function tf(t,e){return eh(t,e).canonicalString()}function eh(t,e){const n=function(s){return new bt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function c0(t){const e=bt.fromString(t);return dt(m0(e),10190,{key:e.toString()}),e}function th(t,e){return tf(t.databaseId,e.path)}function ad(t,e){const n=c0(e);if(n.get(1)!==t.databaseId.projectId)throw new Ce(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ce(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Le(h0(n))}function d0(t,e){return tf(t.databaseId,e)}function NP(t){const e=c0(t);return e.length===4?bt.emptyPath():h0(e)}function nh(t){return new bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function h0(t){return dt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Pg(t,e,n){return{name:th(t,e),fields:n.value.mapValue.fields}}function VP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:je(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(dt(d===void 0||typeof d=="string",58123),hn.fromBase64String(d||"")):(dt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),hn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?he.UNKNOWN:o0(c.code);return new Ce(d,c.message||"")}(o);n=new l0(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ad(t,r.document.name),i=xr(r.document.updateTime),o=r.document.createTime?xr(r.document.createTime):ze.min(),a=new jn({mapValue:{fields:r.document.fields}}),u=An.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new ru(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ad(t,r.document),i=r.readTime?xr(r.readTime):ze.min(),o=An.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ru([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ad(t,r.document),i=r.removedTargetIds||[];n=new ru([],i,s,null)}else{if(!("filter"in e))return je(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new PP(s,i),a=r.targetId;n=new a0(a,o)}}return n}function LP(t,e){let n;if(e instanceof nl)n={update:Pg(t,e.key,e.value)};else if(e instanceof Jh)n={delete:th(t,e.key)};else if(e instanceof ni)n={update:Pg(t,e.key,e.data),updateMask:zP(e.fieldMask)};else{if(!(e instanceof EP))return je(16599,{Rt:e.type});n={verify:th(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof qa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ha)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Au)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw je(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:OP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:je(27497)}(t,e.precondition)),n}function FP(t,e){return t&&t.length>0?(dt(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?xr(s.updateTime):xr(i);return o.isEqual(ze.min())&&(o=xr(i)),new wP(o,s.transformResults||[])}(n,e))):[]}function UP(t,e){return{documents:[d0(t,e.path)]}}function $P(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=d0(t,s);const i=function(c){if(c.length!==0)return p0(vr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Zi(p.field),direction:qP(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Zd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:s}}function BP(t){let e=NP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){dt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const p=f0(f);return p instanceof vr&&q_(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(P){return new ja(eo(P.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,oc(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,_=f.values||[];return new Eu(_,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,_=f.values||[];return new Eu(_,p)}(n.endAt)),oP(e,s,o,i,a,"F",u,c)}function jP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function f0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=eo(n.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=eo(n.unaryFilter.field);return zt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=eo(n.unaryFilter.field);return zt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=eo(n.unaryFilter.field);return zt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}}(t):t.fieldFilter!==void 0?function(n){return zt.create(eo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vr.create(n.compositeFilter.filters.map(r=>f0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return je(1026)}}(n.compositeFilter.op))}(t):je(30097,{filter:t})}function qP(t){return SP[t]}function HP(t){return DP[t]}function WP(t){return MP[t]}function Zi(t){return{fieldPath:t.canonicalString()}}function eo(t){return dn.fromServerFormat(t.fieldPath)}function p0(t){return t instanceof zt?function(n){if(n.op==="=="){if(fg(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NAN"}};if(hg(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fg(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NOT_NAN"}};if(hg(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zi(n.field),op:HP(n.op),value:n.value}}}(t):t instanceof vr?function(n){const r=n.getFilters().map(s=>p0(s));return r.length===1?r[0]:{compositeFilter:{op:WP(n.op),filters:r}}}(t):je(54877,{filter:t})}function zP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function m0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n,r,s,i=ze.min(),o=ze.min(),a=hn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.gt=e}}function KP(t){const e=BP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.Dn=new QP}addToCollectionParentIndex(e,n){return this.Dn.add(n),ge.resolve()}getCollectionParents(e,n){return ge.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ge.resolve()}deleteFieldIndex(e,n){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,n){return ge.resolve()}getDocumentsMatchingTarget(e,n){return ge.resolve(null)}getIndexType(e,n){return ge.resolve(0)}getFieldIndexes(e,n){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,n){return ge.resolve(qs.min())}getMinOffsetFromCollectionGroup(e,n){return ge.resolve(qs.min())}updateCollectionGroup(e,n,r){return ge.resolve()}updateIndexEntries(e,n){return ge.resolve()}}class QP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xt(bt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xt(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},g0=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(g0,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Eo(0)}static ur(){return new Eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="LruGarbageCollector",XP=1048576;function Cg([t,e],[n,r]){const s=Je(t,n);return s===0?Je(e,r):s}class JP{constructor(e){this.Tr=e,this.buffer=new Xt(Cg),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Cg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){De(Rg,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vo(n)?De(Rg,"Ignoring IndexedDB error during garbage collection: ",n):await No(n)}await this.Rr(3e5)})}}class ek{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ge.resolve(ic.ue);const r=new JP(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(De("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(kg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kg):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(De("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Xi()<=nt.DEBUG&&De("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function tk(t,e){return new ek(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.changes=new Fi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ge.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ea(r.mutation,s,Kn.empty(),_t.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,rt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=rt()){const s=_i();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ua();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=_i();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,rt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=as();const o=Ta(),a=function(){return Ta()}();return n.forEach((u,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ni)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ea(d.mutation,c,d.mutation.getFieldMask(),_t.now())):o.set(c.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new rk(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ta();let s=new Ct((o,a)=>o-a),i=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||Kn.empty();d=a.applyToLocalView(c,d),r.set(u,d);const f=(s.get(a.batchId)||rt()).add(u);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,f=J_();d.forEach(p=>{if(!i.has(p)){const _=s0(n.get(p),r.get(p));_!==null&&f.set(p,_),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return ge.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Y_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ge.resolve(_i());let a=Fa,u=i;return o.next(c=>ge.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?ge.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{u=u.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,rt())).next(d=>({batchId:a,changes:X_(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Le(n)).next(r=>{let s=ua();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ua();return this.indexManager.getCollectionParents(e,i).next(a=>ge.forEach(a,u=>{const c=function(f,p){return new Lo(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,An.newInvalidDocument(d)))});let a=ua();return o.forEach((u,c)=>{const d=i.get(u);d!==void 0&&Ea(d.mutation,c,Kn.empty(),_t.now()),cc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ge.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xr(s.createTime)}}(n)),ge.resolve()}getNamedQuery(e,n){return ge.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:KP(s.bundledQuery),readTime:xr(s.readTime)}}(n)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.overlays=new Ct(Le.comparator),this.kr=new Map}getOverlay(e,n){return ge.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_i();return ge.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),ge.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),ge.resolve()}getOverlaysForCollection(e,n,r){const s=_i(),i=n.length+1,o=new Le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return ge.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ct((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=_i(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=_i(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return ge.resolve(a)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new IP(n,r));let i=this.kr.get(n);i===void 0&&(i=rt(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(){this.qr=new Xt(en.Qr),this.$r=new Xt(en.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new en(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new en(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Le(new bt([])),r=new en(n,e),s=new en(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Le(new bt([])),r=new en(n,e),s=new en(n,e+1);let i=rt();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new en(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Le.comparator(e.key,n.key)||Je(e.Hr,n.Hr)}static Ur(e,n){return Je(e.Hr,n.Hr)||Le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Xt(en.Qr)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AP(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Yr=this.Yr.add(new en(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ge.resolve(o)}lookupMutationBatch(e,n){return ge.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return ge.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?zh:this.er-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new en(n,0),s=new en(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),ge.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(Je);return n.forEach(s=>{const i=new en(s,0),o=new en(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),ge.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Le.isDocumentKey(i)||(i=i.child(""));const o=new en(new Le(i),0);let a=new Xt(Je);return this.Yr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.Hr)),!0)},o),ge.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){dt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ge.forEach(n.mutations,s=>{const i=new en(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new en(n,0),s=this.Yr.firstAfterOrEqual(r);return ge.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.ni=e,this.docs=function(){return new Ct(Le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ge.resolve(r?r.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let r=as();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():An.newInvalidDocument(s))}),ge.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=as();const o=n.path,a=new Le(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||FI(LI(d),r)<=0||(s.has(d.key)||cc(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return ge.resolve(i)}getAllFromCollectionGroup(e,n,r,s){je(9500)}ri(e,n){return ge.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ck(this)}getSize(e){return ge.resolve(this.size)}}class ck extends nk{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),ge.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.persistence=e,this.ii=new Fi(n=>Gh(n),Qh),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.si=0,this.oi=new nf,this.targetCount=0,this._i=Eo.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),ge.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Eo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ge.resolve()}updateTargetData(e,n){return this.hr(n),ge.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),ge.waitFor(i).next(()=>s)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return ge.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),ge.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ge.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ge.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return ge.resolve(r)}containsKey(e,n){return ge.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n){this.ai={},this.overlays={},this.ui=new ic(0),this.ci=!1,this.ci=!0,this.li=new ak,this.referenceDelegate=e(this),this.hi=new dk(this),this.indexManager=new GP,this.remoteDocumentCache=function(s){return new uk(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new YP(n),this.Ti=new ik(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ok,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new lk(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){De("MemoryPersistence","Starting transaction:",e);const s=new hk(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return ge.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class hk extends $I{constructor(e){super(),this.currentSequenceNumber=e}}class rf{constructor(e){this.persistence=e,this.Ai=new nf,this.Ri=null}static Vi(e){return new rf(e)}get mi(){if(this.Ri)return this.Ri;throw je(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),ge.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ge.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.mi,r=>{const s=Le.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,ze.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return ge.or([()=>ge.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Pu{constructor(e,n){this.persistence=e,this.gi=new Fi(r=>qI(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=tk(this,n)}static Vi(e,n){return new Pu(e,n)}Ii(){}di(e){return ge.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return ge.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?ge.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ze.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ge.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ge.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ge.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eu(e.data.value)),n}Sr(e,n,r){return ge.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return ge.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=rt(),s=rt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new sf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return lA()?8:BI(Rn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new fk;return this.ws(e,n,o).next(a=>{if(i.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Xi()<=nt.DEBUG&&De("QueryEngine","SDK will not create cache indexes for query:",Ji(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ge.resolve()):(Xi()<=nt.DEBUG&&De("QueryEngine","Query:",Ji(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Xi()<=nt.DEBUG&&De("QueryEngine","The SDK decides to create cache indexes for query:",Ji(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(n))):ge.resolve())}ps(e,n){if(vg(n))return ge.resolve(null);let r=Mr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Jd(n,null,"F"),r=Mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=rt(...i);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.bs(n,a);return this.Ds(n,c,o,u.readTime)?this.ps(e,Jd(n,null,"F")):this.vs(e,c,n,u)}))})))}ys(e,n,r,s){return vg(n)||s.isEqual(ze.min())?ge.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?ge.resolve(null):(Xi()<=nt.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ji(n)),this.vs(e,o,n,VI(s,Fa)).next(a=>a))})}bs(e,n){let r=new Xt(G_(e));return n.forEach((s,i)=>{cc(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Xi()<=nt.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",Ji(n)),this.gs.getDocumentsMatchingQuery(e,n,qs.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="LocalStore",mk=3e8;class gk{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Ct(Je),this.Ms=new Fi(i=>Gh(i),Qh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function vk(t,e,n,r){return new gk(t,e,n,r)}async function y0(t,e){const n=Ke(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=rt();for(const c of s){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function yk(t,e){const n=Ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const f=c.batch,p=f.keys();let _=ge.resolve();return p.forEach(P=>{_=_.next(()=>d.getEntry(u,P)).next(D=>{const S=c.docVersions.get(P);dt(S!==null,48541),D.version.compareTo(S)<0&&(f.applyToRemoteDocument(D,c),D.isValidDocument()&&(D.setReadTime(c.commitVersion),d.addEntry(D)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=rt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function _0(t){const e=Ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function _k(t,e){const n=Ke(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];e.targetChanges.forEach((d,f)=>{const p=s.get(f);if(!p)return;a.push(n.hi.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.hi.addMatchingKeys(i,d.addedDocuments,f)));let _=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(hn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),s=s.insert(f,_),function(D,S,O){return D.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=mk?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(p,_,d)&&a.push(n.hi.updateTargetData(i,_))});let u=as(),c=rt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(wk(i,o,e.documentUpdates).next(d=>{u=d.Ls,c=d.ks})),!r.isEqual(ze.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next(f=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return ge.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Fs=s,i))}function wk(t,e,n){let r=rt(),s=rt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=as();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(ze.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):De(of,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ls:o,ks:s}})}function bk(t,e){const n=Ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tk(t,e){const n=Ke(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,ge.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new Cs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function rh(t,e,n){const r=Ke(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Vo(o))throw o;De(of,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Sg(t,e,n){const r=Ke(t);let s=ze.min(),i=rt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const f=Ke(u),p=f.Ms.get(d);return p!==void 0?ge.resolve(f.Fs.get(p)):f.hi.getTargetData(c,d)}(r,o,Mr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ze.min(),n?i:rt())).next(a=>(Ek(r,lP(e),a),{documents:a,qs:i})))}function Ek(t,e,n){let r=t.xs.get(e)||ze.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Dg{constructor(){this.activeTargetIds=pP()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ak{constructor(){this.Fo=new Dg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Dg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="ConnectivityMonitor";class xg{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){De(Mg,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){De(Mg,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=null;function sh(){return Ul===null?Ul=function(){return 268435456+Math.round(2147483648*Math.random())}():Ul++,"0x"+Ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="RestConnection",Pk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kk{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===bu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=sh(),a=this.Go(e,n.toUriEncodedString());De(ld,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:c}=new URL(a),d=ei(c);return this.jo(e,a,u,r,d).then(f=>(De(ld,`Received RPC '${e}' ${o}: `,f),f),f=>{throw js(ld,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=Pk[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class Ck extends kk{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=sh();return new Promise((a,u)=>{const c=new b_;c.setWithCredentials(!0),c.listenOnce(T_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Zl.NO_ERROR:const f=c.getResponseJson();De(yn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Zl.TIMEOUT:De(yn,`RPC '${e}' ${o} timed out`),u(new Ce(he.DEADLINE_EXCEEDED,"Request time out"));break;case Zl.HTTP_ERROR:const p=c.getStatus();if(De(yn,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const P=_?.error;if(P&&P.status&&P.message){const D=function(O){const $=O.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf($)>=0?$:he.UNKNOWN}(P.status);u(new Ce(D,P.message))}else u(new Ce(he.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Ce(he.UNAVAILABLE,"Connection failed."));break;default:je(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{De(yn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);De(yn,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",d,r,15)})}P_(e,n,r){const s=sh(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I_(),a=A_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");De(yn,`Creating RPC '${e}' stream ${s}: ${d}`,u);const f=o.createWebChannel(d,u);this.T_(f);let p=!1,_=!1;const P=new Rk({Ho:S=>{_?De(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(p||(De(yn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),De(yn,`RPC '${e}' stream ${s} sending:`,S),f.send(S))},Yo:()=>f.close()}),D=(S,O,$)=>{S.listen(O,F=>{try{$(F)}catch(U){setTimeout(()=>{throw U},0)}})};return D(f,la.EventType.OPEN,()=>{_||(De(yn,`RPC '${e}' stream ${s} transport opened.`),P.s_())}),D(f,la.EventType.CLOSE,()=>{_||(_=!0,De(yn,`RPC '${e}' stream ${s} transport closed`),P.__(),this.I_(f))}),D(f,la.EventType.ERROR,S=>{_||(_=!0,js(yn,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),P.__(new Ce(he.UNAVAILABLE,"The operation could not be completed")))}),D(f,la.EventType.MESSAGE,S=>{var O;if(!_){const $=S.data[0];dt(!!$,16349);const F=$,U=F?.error||((O=F[0])===null||O===void 0?void 0:O.error);if(U){De(yn,`RPC '${e}' stream ${s} received error:`,U);const ee=U.status;let W=function(g){const w=Wt[g];if(w!==void 0)return o0(w)}(ee),T=U.message;W===void 0&&(W=he.INTERNAL,T="Unknown error status: "+ee+" with message "+U.message),_=!0,P.__(new Ce(W,T)),f.close()}else De(yn,`RPC '${e}' stream ${s} received:`,$),P.a_($)}}),D(a,E_.STAT_EVENT,S=>{S.stat===Wd.PROXY?De(yn,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Wd.NOPROXY&&De(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.o_()},0),P}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function ud(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){return new xP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&De("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="PersistentStream";class b0{constructor(e,n,r,s,i,o,a,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new w0(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===he.RESOURCE_EXHAUSTED?(os(n.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new Ce(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return De(Og,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(De(Og,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sk extends b0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=VP(this.serializer,e),r=function(i){if(!("targetChange"in i))return ze.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ze.min():o.readTime?xr(o.readTime):ze.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=nh(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=Qd(u)?{documents:UP(i,u)}:{query:$P(i,u).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=u0(i,o.resumeToken);const c=Zd(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ze.min())>0){a.readTime=Iu(i,o.snapshotVersion.toTimestamp());const c=Zd(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=jP(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=nh(this.serializer),n.removeTarget=e,this.k_(n)}}class Dk extends b0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=FP(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=nh(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>LP(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{}class xk extends Mk{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ce(he.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,eh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ce(he.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,eh(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ce(he.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Ok{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(os(n),this._a=!1):De("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="RemoteStore";class Nk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Ui(this)&&(De(Di,"Restarting streams for network reachability change."),await async function(u){const c=Ke(u);c.Ia.add(4),await sl(c),c.Aa.set("Unknown"),c.Ia.delete(4),await mc(c)}(this))})}),this.Aa=new Ok(r,s)}}async function mc(t){if(Ui(t))for(const e of t.da)await e(!0)}async function sl(t){for(const e of t.da)await e(!1)}function T0(t,e){const n=Ke(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),cf(n)?uf(n):Fo(n).x_()&&lf(n,e))}function af(t,e){const n=Ke(t),r=Fo(n);n.Ta.delete(e),r.x_()&&E0(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ui(n)&&n.Aa.set("Unknown"))}function lf(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fo(t).H_(e)}function E0(t,e){t.Ra.$e(e),Fo(t).Y_(e)}function uf(t){t.Ra=new CP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Fo(t).start(),t.Aa.aa()}function cf(t){return Ui(t)&&!Fo(t).M_()&&t.Ta.size>0}function Ui(t){return Ke(t).Ia.size===0}function A0(t){t.Ra=void 0}async function Vk(t){t.Aa.set("Online")}async function Lk(t){t.Ta.forEach((e,n)=>{lf(t,e)})}async function Fk(t,e){A0(t),cf(t)?(t.Aa.la(e),uf(t)):t.Aa.set("Unknown")}async function Uk(t,e,n){if(t.Aa.set("Online"),e instanceof l0&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ta.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ta.delete(a),s.Ra.removeTarget(a))}(t,e)}catch(r){De(Di,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ku(t,r)}else if(e instanceof ru?t.Ra.Ye(e):e instanceof a0?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ze.min()))try{const r=await _0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Ra.Pt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ta.get(c);d&&i.Ta.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=i.Ta.get(u);if(!d)return;i.Ta.set(u,d.withResumeToken(hn.EMPTY_BYTE_STRING,d.snapshotVersion)),E0(i,u);const f=new Cs(d.target,u,c,d.sequenceNumber);lf(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){De(Di,"Failed to raise snapshot:",r),await ku(t,r)}}async function ku(t,e,n){if(!Vo(e))throw e;t.Ia.add(1),await sl(t),t.Aa.set("Offline"),n||(n=()=>_0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{De(Di,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await mc(t)})}function I0(t,e){return e().catch(n=>ku(t,n,e))}async function gc(t){const e=Ke(t),n=Ys(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:zh;for(;$k(e);)try{const s=await bk(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,Bk(e,s)}catch(s){await ku(e,s)}P0(e)&&k0(e)}function $k(t){return Ui(t)&&t.Pa.length<10}function Bk(t,e){t.Pa.push(e);const n=Ys(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function P0(t){return Ui(t)&&!Ys(t).M_()&&t.Pa.length>0}function k0(t){Ys(t).start()}async function jk(t){Ys(t).na()}async function qk(t){const e=Ys(t);for(const n of t.Pa)e.X_(n.mutations)}async function Hk(t,e,n){const r=t.Pa.shift(),s=Zh.from(r,e,n);await I0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await gc(t)}async function Wk(t,e){e&&Ys(t).Z_&&await async function(r,s){if(function(o){return kP(o)&&o!==he.ABORTED}(s.code)){const i=r.Pa.shift();Ys(r).N_(),await I0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await gc(r)}}(t,e),P0(t)&&k0(t)}async function Ng(t,e){const n=Ke(t);n.asyncQueue.verifyOperationInProgress(),De(Di,"RemoteStore received new credentials");const r=Ui(n);n.Ia.add(3),await sl(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await mc(n)}async function zk(t,e){const n=Ke(t);e?(n.Ia.delete(2),await mc(n)):e||(n.Ia.add(2),await sl(n),n.Aa.set("Unknown"))}function Fo(t){return t.Va||(t.Va=function(n,r,s){const i=Ke(n);return i.ia(),new Sk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Vk.bind(null,t),e_:Lk.bind(null,t),n_:Fk.bind(null,t),J_:Uk.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),cf(t)?uf(t):t.Aa.set("Unknown")):(await t.Va.stop(),A0(t))})),t.Va}function Ys(t){return t.ma||(t.ma=function(n,r,s){const i=Ke(n);return i.ia(),new Dk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:jk.bind(null,t),n_:Wk.bind(null,t),ea:qk.bind(null,t),ta:Hk.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await gc(t)):(await t.ma.stop(),t.Pa.length>0&&(De(Di,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new df(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hf(t,e){if(os("AsyncQueue",`${e}: ${t}`),Vo(t))return new Ce(he.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{static emptySet(e){return new fo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Le.comparator(n.key,r.key):(n,r)=>Le.comparator(n.key,r.key),this.keyedMap=ua(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this.fa=new Ct(Le.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):je(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ao{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ao(e,n,fo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Kk{constructor(){this.queries=Lg(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Ke(n),i=s.queries;s.queries=Lg(),i.forEach((o,a)=>{for(const u of a.wa)u.onError(r)})})(this,new Ce(he.ABORTED,"Firestore shutting down"))}}function Lg(){return new Fi(t=>K_(t),uc)}async function ff(t,e){const n=Ke(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new Yk,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=hf(o,`Initialization of query '${Ji(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&mf(n)}async function pf(t,e){const n=Ke(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Gk(t,e){const n=Ke(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.wa)a.Ca(s)&&(r=!0);o.ya=s}}r&&mf(n)}function Qk(t,e,n){const r=Ke(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function mf(t){t.Da.forEach(e=>{e.next()})}var ih,Fg;(Fg=ih||(ih={})).Fa="default",Fg.Cache="cache";class gf{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ih.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this.key=e}}class C0{constructor(e){this.key=e}}class Xk{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=rt(),this.mutatedKeys=rt(),this.Xa=G_(e),this.eu=new fo(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Vg,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const p=s.get(d),_=cc(this.query,f)?f:null,P=!!p&&this.mutatedKeys.has(p.key),D=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;p&&_?p.data.isEqual(_.data)?P!==D&&(r.track({type:3,doc:_}),S=!0):this.iu(p,_)||(r.track({type:2,doc:_}),S=!0,(u&&this.Xa(_,u)>0||c&&this.Xa(_,c)<0)&&(a=!0)):!p&&_?(r.track({type:0,doc:_}),S=!0):p&&!_&&(r.track({type:1,doc:p}),S=!0,(u||c)&&(a=!0)),S&&(_?(o=o.add(_),i=D?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,f)=>function(_,P){const D=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{At:S})}};return D(_)-D(P)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),s=s!=null&&s;const a=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,c=u!==this.Ya;return this.Ya=u,o.length!==0||c?{snapshot:new Ao(this.query,e.eu,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Vg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=rt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new C0(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new R0(r))}),n}uu(e){this.Ha=e.qs,this.Za=rt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ao.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const vf="SyncEngine";class Jk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Zk{constructor(e){this.key=e,this.lu=!1}}class eR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Fi(a=>K_(a),uc),this.Tu=new Map,this.Iu=new Set,this.du=new Ct(Le.comparator),this.Eu=new Map,this.Au=new nf,this.Ru={},this.Vu=new Map,this.mu=Eo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function tR(t,e,n=!0){const r=N0(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await S0(r,e,n,!0),s}async function nR(t,e){const n=N0(t);await S0(n,e,!0,!1)}async function S0(t,e,n,r){const s=await Tk(t.localStore,Mr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await rR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&T0(t.remoteStore,s),a}async function rR(t,e,n,r,s){t.gu=(f,p,_)=>async function(D,S,O,$){let F=S.view.nu(O);F.Ds&&(F=await Sg(D.localStore,S.query,!1).then(({documents:T})=>S.view.nu(T,F)));const U=$&&$.targetChanges.get(S.targetId),ee=$&&$.targetMismatches.get(S.targetId)!=null,W=S.view.applyChanges(F,D.isPrimaryClient,U,ee);return $g(D,S.targetId,W._u),W.snapshot}(t,f,p,_);const i=await Sg(t.localStore,e,!0),o=new Xk(e,i.qs),a=o.nu(i.documents),u=rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);$g(t,n,c._u);const d=new Jk(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function sR(t,e,n){const r=Ke(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!uc(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&af(r.remoteStore,s.targetId),oh(r,s.targetId)}).catch(No)):(oh(r,s.targetId),await rh(r.localStore,s.targetId,!0))}async function iR(t,e){const n=Ke(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),af(n.remoteStore,r.targetId))}async function oR(t,e,n){const r=fR(t);try{const s=await function(o,a){const u=Ke(o),c=_t.now(),d=a.reduce((_,P)=>_.add(P.key),rt());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let P=as(),D=rt();return u.Os.getEntries(_,d).next(S=>{P=S,P.forEach((O,$)=>{$.isValidDocument()||(D=D.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,P)).next(S=>{f=S;const O=[];for(const $ of a){const F=TP($,f.get($.key).overlayedDocument);F!=null&&O.push(new ni($.key,F,$_(F.value.mapValue),fr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,O,a)}).next(S=>{p=S;const O=S.applyToLocalDocumentSet(f,D);return u.documentOverlayCache.saveOverlays(_,S.batchId,O)})}).then(()=>({batchId:p.batchId,changes:X_(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Ru[o.currentUser.toKey()];c||(c=new Ct(Je)),c=c.insert(a,u),o.Ru[o.currentUser.toKey()]=c}(r,s.batchId,n),await il(r,s.changes),await gc(r.remoteStore)}catch(s){const i=hf(s,"Failed to persist write");n.reject(i)}}async function D0(t,e){const n=Ke(t);try{const r=await _k(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(dt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?dt(o.lu,14607):s.removedDocuments.size>0&&(dt(o.lu,42227),o.lu=!1))}),await il(n,r,e)}catch(r){await No(r)}}function Ug(t,e,n){const r=Ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=Ke(o);u.onlineState=a;let c=!1;u.queries.forEach((d,f)=>{for(const p of f.wa)p.va(a)&&(c=!0)}),c&&mf(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aR(t,e,n){const r=Ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Ct(Le.comparator);o=o.insert(i,An.newNoDocument(i,ze.min()));const a=rt().add(i),u=new fc(ze.min(),new Map,new Ct(Je),o,a);await D0(r,u),r.du=r.du.remove(i),r.Eu.delete(e),yf(r)}else await rh(r.localStore,e,!1).then(()=>oh(r,e,n)).catch(No)}async function lR(t,e){const n=Ke(t),r=e.batch.batchId;try{const s=await yk(n.localStore,e);x0(n,r,null),M0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await il(n,s)}catch(s){await No(s)}}async function uR(t,e,n){const r=Ke(t);try{const s=await function(o,a){const u=Ke(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(dt(f!==null,37113),d=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);x0(r,e,n),M0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await il(r,s)}catch(s){await No(s)}}function M0(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function x0(t,e,n){const r=Ke(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function oh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||O0(t,r)})}function O0(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(af(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),yf(t))}function $g(t,e,n){for(const r of n)r instanceof R0?(t.Au.addReference(r.key,e),cR(t,r)):r instanceof C0?(De(vf,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||O0(t,r.key)):je(19791,{yu:r})}function cR(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(De(vf,"New document in limbo: "+n),t.Iu.add(r),yf(t))}function yf(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Le(bt.fromString(e)),r=t.mu.next();t.Eu.set(r,new Zk(n)),t.du=t.du.insert(n,r),T0(t.remoteStore,new Cs(Mr(lc(n.path)),r,"TargetPurposeLimboResolution",ic.ue))}}async function il(t,e,n){const r=Ke(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{o.push(r.gu(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=sf.Es(u.targetId,c);i.push(f)}}))}),await Promise.all(o),r.hu.J_(s),await async function(u,c){const d=Ke(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ge.forEach(c,p=>ge.forEach(p.Is,_=>d.persistence.referenceDelegate.addReference(f,p.targetId,_)).next(()=>ge.forEach(p.ds,_=>d.persistence.referenceDelegate.removeReference(f,p.targetId,_)))))}catch(f){if(!Vo(f))throw f;De(of,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const _=d.Fs.get(p),P=_.snapshotVersion,D=_.withLastLimboFreeSnapshotVersion(P);d.Fs=d.Fs.insert(p,D)}}}(r.localStore,i))}async function dR(t,e){const n=Ke(t);if(!n.currentUser.isEqual(e)){De(vf,"User change. New user:",e.toKey());const r=await y0(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(a=>{a.forEach(u=>{u.reject(new Ce(he.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await il(n,r.Bs)}}function hR(t,e){const n=Ke(t),r=n.Eu.get(e);if(r&&r.lu)return rt().add(r.key);{let s=rt();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const a=n.Pu.get(o);s=s.unionWith(a.view.tu)}return s}}function N0(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=D0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aR.bind(null,e),e.hu.J_=Gk.bind(null,e.eventManager),e.hu.pu=Qk.bind(null,e.eventManager),e}function fR(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uR.bind(null,e),e}class Ru{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return vk(this.persistence,new pk,e.initialUser,this.serializer)}Du(e){return new v0(rf.Vi,this.serializer)}bu(e){return new Ak}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ru.provider={build:()=>new Ru};class pR extends Ru{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){dt(this.persistence.referenceDelegate instanceof Pu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZP(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new v0(r=>Pu.Vi(r,n),this.serializer)}}class ah{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ug(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dR.bind(null,this.syncEngine),await zk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Kk}()}createDatastore(e){const n=pc(e.databaseInfo.databaseId),r=function(i){return new Ck(i)}(e.databaseInfo);return function(i,o,a,u){return new xk(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new Nk(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ug(this.syncEngine,n,0),function(){return xg.C()?new xg:new Ik}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,d){const f=new eR(s,i,o,a,u,c);return d&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ke(s);De(Di,"RemoteStore shutting down."),i.Ia.add(5),await sl(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ah.provider={build:()=>new ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):os("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="FirestoreClient";class mR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=bn.UNAUTHENTICATED,this.clientId=Wh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{De(Ks,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(De(Ks,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cd(t,e){t.asyncQueue.verifyOperationInProgress(),De(Ks,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await y0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{js("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{De("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{js("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Bg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gR(t);De(Ks,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ng(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ng(e.remoteStore,s)),t._onlineComponents=e}async function gR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){De(Ks,"Using user provided OfflineComponentProvider");try{await cd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===he.FAILED_PRECONDITION||s.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;js("Error using user provided cache. Falling back to memory cache: "+n),await cd(t,new Ru)}}else De(Ks,"Using default OfflineComponentProvider"),await cd(t,new pR(void 0));return t._offlineComponents}async function V0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(De(Ks,"Using user provided OnlineComponentProvider"),await Bg(t,t._uninitializedComponentsProvider._online)):(De(Ks,"Using default OnlineComponentProvider"),await Bg(t,new ah))),t._onlineComponents}function vR(t){return V0(t).then(e=>e.syncEngine)}async function Cu(t){const e=await V0(t),n=e.eventManager;return n.onListen=tR.bind(null,e.syncEngine),n.onUnlisten=sR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iR.bind(null,e.syncEngine),n}function yR(t,e,n={}){const r=new ts;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const d=new _f({next:p=>{d.Ou(),o.enqueueAndForget(()=>pf(i,f));const _=p.docs.has(a);!_&&p.fromCache?c.reject(new Ce(he.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&u&&u.source==="server"?c.reject(new Ce(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new gf(lc(a.path),d,{includeMetadataChanges:!0,ka:!0});return ff(i,f)}(await Cu(t),t.asyncQueue,e,n,r)),r.promise}function _R(t,e,n={}){const r=new ts;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const d=new _f({next:p=>{d.Ou(),o.enqueueAndForget(()=>pf(i,f)),p.fromCache&&u.source==="server"?c.reject(new Ce(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new gf(a,d,{includeMetadataChanges:!0,ka:!0});return ff(i,f)}(await Cu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="firestore.googleapis.com",qg=!0;class Hg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F0,this.ssl=qg}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:qg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=g0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XP)throw new Ce(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ce(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ce(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ce(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PI;switch(r.type){case"firstParty":return new SI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jg.get(n);r&&(De("ComponentProvider","Removing Datastore"),jg.delete(n),r.terminate())}(this),Promise.resolve()}}function wR(t,e,n,r={}){var s;t=ir(t,vc);const i=ei(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(Uh(`https://${u}`),$h("Firestore",!0)),o.host!==F0&&o.host!==u&&js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!Ri(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=bn.MOCK_USER;else{d=p_(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ce(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new bn(p)}t._authCredentials=new kI(new k_(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ri(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(tl(n,jt._jsonSchema))return new jt(e,r||null,new Le(bt.fromString(n.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Kt("string",jt._jsonSchemaVersion),referencePath:Kt("string")};class Ns extends ri{constructor(e,n,r){super(e,n,lc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Le(e))}withConverter(e){return new Ns(this.firestore,e,this._path)}}function Xr(t,e,...n){if(t=It(t),C_("collection","path",e),t instanceof vc){const r=bt.fromString(e,...n);return rg(r),new Ns(t,null,r)}{if(!(t instanceof jt||t instanceof Ns))throw new Ce(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(bt.fromString(e,...n));return rg(r),new Ns(t.firestore,null,r)}}function Uo(t,e,...n){if(t=It(t),arguments.length===1&&(e=Wh.newId()),C_("doc","path",e),t instanceof vc){const r=bt.fromString(e,...n);return ng(r),new jt(t,null,new Le(r))}{if(!(t instanceof jt||t instanceof Ns))throw new Ce(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(bt.fromString(e,...n));return ng(r),new jt(t.firestore,t instanceof Ns?t.converter:null,new Le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="AsyncQueue";class zg{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new w0(this,"async_queue_retry"),this.oc=()=>{const r=ud();r&&De(Wg,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=ud();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=ud();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ts;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Vo(e))throw e;De(Wg,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,os("INTERNAL UNHANDLED ERROR: ",Yg(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=df.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&je(47125,{hc:Yg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Yg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Gs extends vc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new zg,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zg(e),this._firestoreClient=void 0,await e}}}function bR(t,e){const n=typeof t=="object"?t:qh(),r=typeof t=="string"?t:bu,s=rc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=d_("firestore");i&&wR(s,...i)}return s}function yc(t){if(t._terminated)throw new Ce(he.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TR(t),t._firestoreClient}function TR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,c,d){return new zI(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,L0(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new mR(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new er(hn.fromBase64String(e))}catch(n){throw new Ce(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new er(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tl(e,er._jsonSchema))return er.fromBase64String(e.bytes)}}er._jsonSchemaVersion="firestore/bytes/1.0",er._jsonSchema={type:Kt("string",er._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ce(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ce(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ce(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Or._jsonSchemaVersion}}static fromJSON(e){if(tl(e,Or._jsonSchema))return new Or(e.latitude,e.longitude)}}Or._jsonSchemaVersion="firestore/geoPoint/1.0",Or._jsonSchema={type:Kt("string",Or._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tl(e,Nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nr(e.vectorValues);throw new Ce(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nr._jsonSchemaVersion="firestore/vectorValue/1.0",Nr._jsonSchema={type:Kt("string",Nr._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=/^__.*__$/;class AR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new nl(e,this.data,n,this.fieldTransforms)}}class U0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ni(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ec:t})}}class wf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new wf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Su(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if($0(this.Ec)&&ER.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class IR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pc(e)}Dc(e,n,r,s=!1){return new wf({Ec:e,methodName:n,bc:r,path:dn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bf(t){const e=t._freezeSettings(),n=pc(t._databaseId);return new IR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PR(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);Ef("Data must be an object, but it was:",o,r);const a=B0(r,o);let u,c;if(i.merge)u=new Kn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=lh(e,f,n);if(!o.contains(p))throw new Ce(he.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);q0(d,p)||d.push(p)}u=new Kn(d),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new AR(new jn(a),u,c)}class bc extends wc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bc}}class Tf extends wc{_toFieldTransform(e){return new yP(e.path,new qa)}isEqual(e){return e instanceof Tf}}function kR(t,e,n,r){const s=t.Dc(1,e,n);Ef("Data must be an object, but it was:",s,r);const i=[],o=jn.empty();ti(r,(u,c)=>{const d=Af(e,u,n);c=It(c);const f=s.gc(d);if(c instanceof bc)i.push(d);else{const p=ol(c,f);p!=null&&(i.push(d),o.set(d,p))}});const a=new Kn(i);return new U0(o,a,s.fieldTransforms)}function RR(t,e,n,r,s,i){const o=t.Dc(1,e,n),a=[lh(e,r,n)],u=[s];if(i.length%2!=0)throw new Ce(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(lh(e,i[p])),u.push(i[p+1]);const c=[],d=jn.empty();for(let p=a.length-1;p>=0;--p)if(!q0(c,a[p])){const _=a[p];let P=u[p];P=It(P);const D=o.gc(_);if(P instanceof bc)c.push(_);else{const S=ol(P,D);S!=null&&(c.push(_),d.set(_,S))}}const f=new Kn(c);return new U0(d,f,o.fieldTransforms)}function CR(t,e,n,r=!1){return ol(n,t.Dc(r?4:3,e))}function ol(t,e){if(j0(t=It(t)))return Ef("Unsupported field value:",e,t),B0(t,e);if(t instanceof wc)return function(r,s){if(!$0(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=ol(a,s.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_t.fromDate(r);return{timestampValue:Iu(s.serializer,i)}}if(r instanceof _t){const i=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Iu(s.serializer,i)}}if(r instanceof Or)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof er)return{bytesValue:u0(s.serializer,r._byteString)};if(r instanceof jt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Nr)return function(o,a){return{mapValue:{fields:{[F_]:{stringValue:U_},[Tu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return Xh(a.serializer,c)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${sc(r)}`)}(t,e)}function B0(t,e){const n={};return M_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ti(t,(r,s)=>{const i=ol(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function j0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Or||t instanceof er||t instanceof jt||t instanceof wc||t instanceof Nr)}function Ef(t,e,n){if(!j0(n)||!S_(n)){const r=sc(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function lh(t,e,n){if((e=It(e))instanceof _c)return e._internalPath;if(typeof e=="string")return Af(t,e);throw Su("Field path arguments must be of type string or ",t,!1,void 0,n)}const SR=new RegExp("[~\\*/\\[\\]]");function Af(t,e,n){if(e.search(SR)>=0)throw Su(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _c(...e.split("."))._internalPath}catch{throw Su(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Su(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Ce(he.INVALID_ARGUMENT,a+t+u)}function q0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DR extends H0{data(){return super.data()}}function Tc(t,e){return typeof e=="string"?Af(t,e):e instanceof _c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ce(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class If{}class z0 extends If{}function ro(t,e,...n){let r=[];e instanceof If&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Pf).length,a=i.filter(u=>u instanceof Ec).length;if(o>1||o>0&&a>0)throw new Ce(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ec extends z0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ec(e,n,r)}_apply(e){const n=this._parse(e);return Y0(e._query,n),new ri(e.firestore,e.converter,Xd(e._query,n))}_parse(e){const n=bf(e.firestore);return function(i,o,a,u,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ce(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Qg(f,d);const P=[];for(const D of f)P.push(Gg(u,i,D));p={arrayValue:{values:P}}}else p=Gg(u,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Qg(f,d),p=CR(a,o,f,d==="in"||d==="not-in");return zt.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function MR(t,e,n){const r=e,s=Tc("where",t);return Ec._create(s,r,n)}class Pf extends If{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)Y0(o,u),o=Xd(o,u)}(e._query,n),new ri(e.firestore,e.converter,Xd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kf extends z0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Ce(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ce(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ja(i,o)}(e._query,this._field,this._direction);return new ri(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Lo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function to(t,e="asc"){const n=e,r=Tc("orderBy",t);return kf._create(r,n)}function Gg(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new Ce(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y_(e)&&n.indexOf("/")!==-1)throw new Ce(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(bt.fromString(n));if(!Le.isDocumentKey(r))throw new Ce(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dg(t,new Le(r))}if(n instanceof jt)return dg(t,n._key);throw new Ce(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sc(n)}.`)}function Qg(t,e){if(!Array.isArray(t)||t.length===0)throw new Ce(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y0(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ce(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xR{convertValue(e,n="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ti(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Tu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>$t(o.doubleValue));return new Nr(i)}convertGeoPoint(e){return new Or($t(e.latitude),$t(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ac(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ua(e));default:return null}}convertTimestamp(e){const n=Hs(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=bt.fromString(e);dt(m0(r),9688,{name:e});const s=new $a(r.get(1),r.get(3)),i=new Le(r.popFirst(5));return s.isEqual(n)||os(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class da{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ti extends H0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ti._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ti._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ti._jsonSchema={type:Kt("string",Ti._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class su extends Ti{data(e={}){return super.data(e)}}class Ei{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new da(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new su(this._firestore,this._userDataWriter,r.key,r,new da(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ce(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:NR(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ei._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){t=ir(t,jt);const e=ir(t.firestore,Gs);return yR(yc(e),t._key).then(n=>Q0(e,t,n))}Ei._jsonSchemaVersion="firestore/querySnapshot/1.0",Ei._jsonSchema={type:Kt("string",Ei._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Rf extends xR{constructor(e){super(),this.firestore=e}convertBytes(e){return new er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function K0(t){t=ir(t,ri);const e=ir(t.firestore,Gs),n=yc(e),r=new Rf(e);return W0(t._query),_R(n,t._query).then(s=>new Ei(e,r,t,s))}function G0(t,e,n,...r){t=ir(t,jt);const s=ir(t.firestore,Gs),i=bf(s);let o;return o=typeof(e=It(e))=="string"||e instanceof _c?RR(i,"updateDoc",t._key,e,n,r):kR(i,"updateDoc",t._key,e),Sf(s,[o.toMutation(t._key,fr.exists(!0))])}function Du(t){return Sf(ir(t.firestore,Gs),[new Jh(t._key,fr.none())])}function Cf(t,e){const n=ir(t.firestore,Gs),r=Uo(t),s=OR(t.converter,e);return Sf(n,[PR(bf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,fr.exists(!1))]).then(()=>r)}function $l(t,...e){var n,r,s;t=It(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Kg(e[o])||(i=e[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Kg(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let u,c,d;if(t instanceof jt)c=ir(t.firestore,Gs),d=lc(t._key.path),u={next:f=>{e[o]&&e[o](Q0(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=ir(t,ri);c=ir(f.firestore,Gs),d=f._query;const p=new Rf(c);u={next:_=>{e[o]&&e[o](new Ei(c,p,f,_))},error:e[o+1],complete:e[o+2]},W0(t._query)}return function(p,_,P,D){const S=new _f(D),O=new gf(_,S,P);return p.asyncQueue.enqueueAndForget(async()=>ff(await Cu(p),O)),()=>{S.Ou(),p.asyncQueue.enqueueAndForget(async()=>pf(await Cu(p),O))}}(yc(c),d,a,u)}function Sf(t,e){return function(r,s){const i=new ts;return r.asyncQueue.enqueueAndForget(async()=>oR(await vR(r),s,i)),i.promise}(yc(t),e)}function Q0(t,e,n){const r=n.docs.get(e._key),s=new Rf(t);return new Ti(t,s,e._key,r,new da(n.hasPendingWrites,n.fromCache),e.converter)}function X0(){return new Tf("serverTimestamp")}(function(e,n=!0){(function(s){Oo=s})(Li),Ci(new Bs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Gs(new RI(r.getProvider("auth-internal")),new DI(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ce(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Dr(Xm,Jm,e),Dr(Xm,Jm,"esm2017")})();function Df(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function J0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LR=J0,Z0=new Za("auth","Firebase",J0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new Bh("@firebase/auth");function FR(t,...e){Mu.logLevel<=nt.WARN&&Mu.warn(`Auth (${Li}): ${t}`,...e)}function iu(t,...e){Mu.logLevel<=nt.ERROR&&Mu.error(`Auth (${Li}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,...e){throw Mf(t,...e)}function Vr(t,...e){return Mf(t,...e)}function ew(t,e,n){const r=Object.assign(Object.assign({},LR()),{[e]:n});return new Za("auth","Firebase",r).create(e,{appName:t.name})}function ns(t){return ew(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Z0.create(t,...e)}function Be(t,e,...n){if(!t)throw Mf(e,...n)}function Jr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iu(e),new Error(e)}function ls(t,e){t||Jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function UR(){return Xg()==="http:"||Xg()==="https:"}function Xg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UR()||iA()||"connection"in navigator)?navigator.onLine:!0}function BR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n){this.shortDelay=e,this.longDelay=n,ls(n>e,"Short delay should be less than long delay!"),this.isMobile=nA()||oA()}get(){return $R()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e){ls(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HR=new al(3e4,6e4);function si(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ds(t,e,n,r,s={}){return nw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=el(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return sA()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ei(t.emulatorConfig.host)&&(c.credentials="include"),tw.fetch()(await rw(t,t.config.apiHost,n,a),c)})}async function nw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},jR),e);try{const s=new zR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Bl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Bl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Bl(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ew(t,d,c);yr(t,d)}}catch(s){if(s instanceof $r)throw s;yr(t,"network-request-failed",{message:String(s)})}}async function ll(t,e,n,r,s={}){const i=await ds(t,e,n,r,s);return"mfaPendingCredential"in i&&yr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function rw(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?xf(t.config,s):`${t.config.apiScheme}://${s}`;return qR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function WR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vr(this.auth,"network-request-failed")),HR.get())})}}function Bl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Vr(t,e,r);return s.customData._tokenResponse=n,s}function Jg(t){return t!==void 0&&t.enterprise!==void 0}class YR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KR(t,e){return ds(t,"GET","/v2/recaptchaConfig",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e){return ds(t,"POST","/v1/accounts:delete",e)}async function xu(t,e){return ds(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QR(t,e=!1){const n=It(t),r=await n.getIdToken(e),s=Of(r);Be(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Aa(dd(s.auth_time)),issuedAtTime:Aa(dd(s.iat)),expirationTime:Aa(dd(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function dd(t){return Number(t)*1e3}function Of(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return iu("JWT malformed, contained fewer than 3 sections"),null;try{const s=u_(n);return s?JSON.parse(s):(iu("Failed to decode base64 JWT payload"),null)}catch(s){return iu("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Zg(t){const e=Of(t);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $r&&XR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Aa(this.lastLoginAt),this.creationTime=Aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Io(t,xu(n,{idToken:r}));Be(s?.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?sw(i.providerUserInfo):[],a=eC(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!a?.length,d=u?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ch(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function ZR(t){const e=It(t);await Ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eC(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function sw(t){return t.map(e=>{var{providerId:n}=e,r=Df(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(t,e){const n=await nw(t,{},async()=>{const r=el({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await rw(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&ei(t.emulatorConfig.host)&&(u.credentials="include"),tw.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nC(t,e){return ds(t,"POST","/v2/accounts:revokeToken",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const n=Zg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await tC(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new po;return r&&(Be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Be(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Be(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new po,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t,e){Be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Df(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ch(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Io(this,this.stsTokenManager.getToken(this.auth,e));return Be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QR(this,e)}reload(){return ZR(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ou(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await Io(this,GR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,D=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(c=n.createdAt)!==null&&c!==void 0?c:void 0,$=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:F,emailVerified:U,isAnonymous:ee,providerData:W,stsTokenManager:T}=n;Be(F&&T,e,"internal-error");const b=po.fromJSON(this.name,T);Be(typeof F=="string",e,"internal-error"),vs(f,e.name),vs(p,e.name),Be(typeof U=="boolean",e,"internal-error"),Be(typeof ee=="boolean",e,"internal-error"),vs(_,e.name),vs(P,e.name),vs(D,e.name),vs(S,e.name),vs(O,e.name),vs($,e.name);const g=new dr({uid:F,auth:e,email:p,emailVerified:U,displayName:f,isAnonymous:ee,photoURL:P,phoneNumber:_,tenantId:D,stsTokenManager:b,createdAt:O,lastLoginAt:$});return W&&Array.isArray(W)&&(g.providerData=W.map(w=>Object.assign({},w))),S&&(g._redirectEventId=S),g}static async _fromIdTokenResponse(e,n,r=!1){const s=new po;s.updateFromServerResponse(n);const i=new dr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ou(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Be(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?sw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new po;a.updateFromIdToken(r);const u=new dr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ch(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;function Zr(t){ls(t instanceof Function,"Expected a class definition");let e=ev.get(t);return e?(ls(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ev.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iw.type="NONE";const tv=iw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t,e,n){return`firebase:${t}:${e}:${n}`}class mo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ou(this.userKey,s.apiKey,i),this.fullPersistenceKey=ou("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xu(this.auth,{idToken:e}).catch(()=>{});return n?dr._fromGetAccountInfoResponse(this.auth,n,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new mo(Zr(tv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Zr(tv);const o=ou(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let f;if(typeof d=="string"){const p=await xu(e,{idToken:d}).catch(()=>{});if(!p)break;f=await dr._fromGetAccountInfoResponse(e,p,d)}else f=dr._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new mo(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new mo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ow(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dw(e))return"Blackberry";if(hw(e))return"Webos";if(aw(e))return"Safari";if((e.includes("chrome/")||lw(e))&&!e.includes("edge/"))return"Chrome";if(cw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function ow(t=Rn()){return/firefox\//i.test(t)}function aw(t=Rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lw(t=Rn()){return/crios\//i.test(t)}function uw(t=Rn()){return/iemobile/i.test(t)}function cw(t=Rn()){return/android/i.test(t)}function dw(t=Rn()){return/blackberry/i.test(t)}function hw(t=Rn()){return/webos/i.test(t)}function Nf(t=Rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rC(t=Rn()){var e;return Nf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sC(){return aA()&&document.documentMode===10}function fw(t=Rn()){return Nf(t)||cw(t)||hw(t)||dw(t)||/windows phone/i.test(t)||uw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e=[]){let n;switch(t){case"Browser":n=nv(Rn());break;case"Worker":n=`${nv(Rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Li}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(t,e={}){return ds(t,"GET","/v2/passwordPolicy",si(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=6;class lC{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:aC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rv(this),this.idTokenSubscription=new rv(this),this.beforeStateQueue=new iC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await mo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xu(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ou(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(ns(this));const n=e?It(e):null;return n&&Be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oC(this),n=new lC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Za("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await nC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zr(e)||this._popupRedirectResolver;Be(n,this,"argument-error"),this.redirectPersistenceManager=await mo.create(this,[Zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&FR(`Error while retrieving App Check token: ${n.error}`),n?.token}}function $i(t){return It(t)}class rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=mA(n=>this.observer=n)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cC(t){Ac=t}function mw(t){return Ac.loadJS(t)}function dC(){return Ac.recaptchaEnterpriseScript}function hC(){return Ac.gapiScript}function fC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class pC{constructor(){this.enterprise=new mC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class mC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const gC="recaptcha-enterprise",gw="NO_RECAPTCHA";class vC{constructor(e){this.type=gC,this.auth=$i(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{KR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new YR(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;Jg(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(gw)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pC().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Jg(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=dC();u.length!==0&&(u+=a),mw(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function sv(t,e,n,r=!1,s=!1){const i=new vC(t);let o;if(s)o=gw;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function dh(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await sv(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await sv(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t,e){const n=rc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ri(i,e??{}))return s;yr(s,"already-initialized")}return n.initialize({options:e})}function _C(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Zr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function wC(t,e,n){const r=$i(t);Be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=vw(e),{host:o,port:a}=bC(e),u=a===null?"":`:${a}`,c={url:`${i}//${o}${u}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Be(Ri(c,r.config.emulator)&&Ri(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ei(o)?(Uh(`${i}//${o}${u}`),$h("Auth",!0)):TC()}function vw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bC(t){const e=vw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:iv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:iv(o)}}}function iv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,n){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}async function EC(t,e){return ds(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(t,e){return ll(t,"POST","/v1/accounts:signInWithPassword",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(t,e){return ll(t,"POST","/v1/accounts:signInWithEmailLink",si(t,e))}async function PC(t,e){return ll(t,"POST","/v1/accounts:signInWithEmailLink",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends Vf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new za(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new za(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dh(e,n,"signInWithPassword",AC);case"emailLink":return IC(e,{email:this._email,oobCode:this._password});default:yr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dh(e,r,"signUpPassword",EC);case"emailLink":return PC(e,{idToken:n,email:this._email,oobCode:this._password});default:yr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(t,e){return ll(t,"POST","/v1/accounts:signInWithIdp",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="http://localhost";class Mi extends Vf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Mi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Df(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Mi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return go(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,go(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,go(e,n)}buildRequest(){const e={requestUri:kC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=el(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CC(t){const e=oa(aa(t)).link,n=e?oa(aa(e)).deep_link_id:null,r=oa(aa(t)).deep_link_id;return(r?oa(aa(r)).link:null)||r||n||e||t}class Lf{constructor(e){var n,r,s,i,o,a;const u=oa(aa(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,f=RC((s=u.mode)!==null&&s!==void 0?s:null);Be(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=CC(e);try{return new Lf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.providerId=$o.PROVIDER_ID}static credential(e,n){return za._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Lf.parseLink(n);return Be(r,"argument-error"),za._fromEmailAndCode(e,r.code,r.tenantId)}}$o.PROVIDER_ID="password";$o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends yw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends ul{constructor(){super("facebook.com")}static credential(e){return Mi._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends ul{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Mi._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Is.credential(n,r)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends ul{constructor(){super("github.com")}static credential(e){return Mi._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends ul{constructor(){super("twitter.com")}static credential(e,n){return Mi._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ks.credential(n,r)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(t,e){return ll(t,"POST","/v1/accounts:signUp",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await dr._fromIdTokenResponse(e,r,s),o=ov(r);return new xi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ov(r);return new xi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ov(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends $r{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nu(e,n,r,s)}}function _w(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nu._fromErrorAndOperation(t,i,e,r):i})}async function DC(t,e,n=!1){const r=await Io(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(t,e,n=!1){const{auth:r}=t;if(zn(r.app))return Promise.reject(ns(r));const s="reauthenticate";try{const i=await Io(t,_w(r,s,e,t),n);Be(i.idToken,r,"internal-error");const o=Of(i.idToken);Be(o,r,"internal-error");const{sub:a}=o;return Be(t.uid===a,r,"user-mismatch"),xi._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&yr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ww(t,e,n=!1){if(zn(t.app))return Promise.reject(ns(t));const r="signIn",s=await _w(t,r,e),i=await xi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function xC(t,e){return ww($i(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bw(t){const e=$i(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OC(t,e,n){if(zn(t.app))return Promise.reject(ns(t));const r=$i(t),o=await dh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&bw(t),u}),a=await xi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function NC(t,e,n){return zn(t.app)?Promise.reject(ns(t)):xC(It(t),$o.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bw(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,e){return ds(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=It(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Io(r,VC(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function FC(t,e,n,r){return It(t).onIdTokenChanged(e,n,r)}function UC(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function $C(t,e,n,r){return It(t).onAuthStateChanged(e,n,r)}function BC(t){return It(t).signOut()}const Vu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vu,"1"),this.storage.removeItem(Vu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=1e3,qC=10;class Ew extends Tw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);sC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ew.type="LOCAL";const HC=Ew;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw extends Tw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Aw.type="SESSION";const Iw=Aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ic(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await WC(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ic.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Ff("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function YC(t){Lr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function KC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GC(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function QC(){return Pw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firebaseLocalStorageDb",XC=1,Lu="firebaseLocalStorage",Rw="fbase_key";class cl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pc(t,e){return t.transaction([Lu],e?"readwrite":"readonly").objectStore(Lu)}function JC(){const t=indexedDB.deleteDatabase(kw);return new cl(t).toPromise()}function hh(){const t=indexedDB.open(kw,XC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lu,{keyPath:Rw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lu)?e(r):(r.close(),await JC(),e(await hh()))})})}async function av(t,e,n){const r=Pc(t,!0).put({[Rw]:e,value:n});return new cl(r).toPromise()}async function ZC(t,e){const n=Pc(t,!1).get(e),r=await new cl(n).toPromise();return r===void 0?null:r.value}function lv(t,e){const n=Pc(t,!0).delete(e);return new cl(n).toPromise()}const eS=800,tS=3;class Cw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ic._getInstance(QC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await KC(),!this.activeServiceWorker)return;this.sender=new zC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hh();return await av(e,Vu,"1"),await lv(e,Vu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>av(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Pc(s,!1).getAll();return new cl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cw.type="LOCAL";const nS=Cw;new al(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t,e){return e?Zr(e):(Be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf extends Vf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return go(e,this._buildIdpRequest())}_linkToIdToken(e,n){return go(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return go(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sS(t){return ww(t.auth,new Uf(t),t.bypassAuthState)}function iS(t){const{auth:e,user:n}=t;return Be(n,e,"internal-error"),MC(n,new Uf(t),t.bypassAuthState)}async function oS(t){const{auth:e,user:n}=t;return Be(n,e,"internal-error"),DC(n,new Uf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sS;case"linkViaPopup":case"linkViaRedirect":return oS;case"reauthViaPopup":case"reauthViaRedirect":return iS;default:yr(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=new al(2e3,1e4);class so extends Sw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,so.currentPopupAction&&so.currentPopupAction.cancel(),so.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=Ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,so.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aS.get())};e()}}so.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="pendingRedirect",au=new Map;class uS extends Sw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=au.get(this.auth._key());if(!e){try{const r=await cS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}au.set(this.auth._key(),e)}return this.bypassAuthState||au.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cS(t,e){const n=fS(e),r=hS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function dS(t,e){au.set(t._key(),e)}function hS(t){return Zr(t._redirectPersistence)}function fS(t){return ou(lS,t.config.apiKey,t.name)}async function pS(t,e,n=!1){if(zn(t.app))return Promise.reject(ns(t));const r=$i(t),s=rS(r,e),o=await new uS(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=10*60*1e3;class gS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Dw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mS&&this.cachedEventUids.clear(),this.cachedEventUids.has(uv(e))}saveEventToCache(e){this.cachedEventUids.add(uv(e)),this.lastProcessedEventTime=Date.now()}}function uv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Dw({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function vS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e={}){return ds(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wS=/^https?/;async function bS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yS(t);for(const n of e)try{if(TS(n))return}catch{}yr(t,"unauthorized-domain")}function TS(t){const e=uh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wS.test(n))return!1;if(_S.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new al(3e4,6e4);function cv(){const t=Lr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AS(t){return new Promise((e,n)=>{var r,s,i;function o(){cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cv(),n(Vr(t,"network-request-failed"))},timeout:ES.get()})}if(!((s=(r=Lr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Lr().gapi)===null||i===void 0)&&i.load)o();else{const a=fC("iframefcb");return Lr()[a]=()=>{gapi.load?o():n(Vr(t,"network-request-failed"))},mw(`${hC()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw lu=null,e})}let lu=null;function IS(t){return lu=lu||AS(t),lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new al(5e3,15e3),kS="__/auth/iframe",RS="emulator/auth/iframe",CS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DS(t){const e=t.config;Be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xf(e,RS):`https://${t.config.authDomain}/${kS}`,r={apiKey:e.apiKey,appName:t.name,v:Li},s=SS.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${el(r).slice(1)}`}async function MS(t){const e=await IS(t),n=Lr().gapi;return Be(n,t,"internal-error"),e.open({where:document.body,url:DS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CS,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Vr(t,"network-request-failed"),a=Lr().setTimeout(()=>{i(o)},PS.get());function u(){Lr().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OS=500,NS=600,VS="_blank",LS="http://localhost";class dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FS(t,e,n,r=OS,s=NS){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},xS),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Rn().toLowerCase();n&&(a=lw(c)?VS:n),ow(c)&&(e=e||LS,u.scrollbars="yes");const d=Object.entries(u).reduce((p,[_,P])=>`${p}${_}=${P},`,"");if(rC(c)&&a!=="_self")return US(e||"",a),new dv(null);const f=window.open(e||"",a,d);Be(f,t,"popup-blocked");try{f.focus()}catch{}return new dv(f)}function US(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="__/auth/handler",BS="emulator/auth/handler",jS=encodeURIComponent("fac");async function hv(t,e,n,r,s,i){Be(t.config.authDomain,t,"auth-domain-config-required"),Be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Li,eventId:s};if(e instanceof yw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof ul){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${jS}=${encodeURIComponent(u)}`:"";return`${qS(t)}?${el(a).slice(1)}${c}`}function qS({config:t}){return t.emulator?xf(t,BS):`https://${t.authDomain}/${$S}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="webStorageSupport";class HS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Iw,this._completeRedirectFn=pS,this._overrideRedirectResult=dS}async _openPopup(e,n,r,s){var i;ls((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await hv(e,n,r,uh(),s);return FS(e,o,Ff())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await hv(e,n,r,uh(),s);return YC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ls(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await MS(e),r=new gS(e);return n.register("authEvent",s=>(Be(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hd,{type:hd},s=>{var i;const o=(i=s?.[0])===null||i===void 0?void 0:i[hd];o!==void 0&&n(!!o),yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fw()||aw()||Nf()}}const WS=HS;var fv="@firebase/auth",pv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KS(t){Ci(new Bs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pw(t)},c=new uC(r,s,i,u);return _C(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ci(new Bs("auth-internal",e=>{const n=$i(e.getProvider("auth").getImmediate());return(r=>new zS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dr(fv,pv,YS(t)),Dr(fv,pv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=5*60,QS=f_("authIdTokenMaxAge")||GS;let mv=null;const XS=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QS)return;const s=n?.token;mv!==s&&(mv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function JS(t=qh()){const e=rc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yC(t,{popupRedirectResolver:WS,persistence:[nS,HC,Iw]}),r=f_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=XS(i.toString());UC(n,o,()=>o(n.currentUser)),FC(n,a=>o(a))}}const s=c_("auth");return s&&wC(n,`http://${s}`),n}function ZS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Vr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",ZS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KS("Browser");var eD="firebase",tD="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr(eD,tD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="firebasestorage.googleapis.com",xw="storageBucket",nD=2*60*1e3,rD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt extends $r{constructor(e,n,r=0){super(fd(e),`Firebase Storage: ${n} (${fd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xt||(xt={}));function fd(t){return"storage/"+t}function $f(){const t="An unknown error occurred, please check the error payload for server response.";return new Nt(xt.UNKNOWN,t)}function sD(t){return new Nt(xt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function iD(t){return new Nt(xt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function oD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nt(xt.UNAUTHENTICATED,t)}function aD(){return new Nt(xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function lD(t){return new Nt(xt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uD(){return new Nt(xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cD(){return new Nt(xt.CANCELED,"User canceled the upload/download.")}function dD(t){return new Nt(xt.INVALID_URL,"Invalid URL '"+t+"'.")}function hD(t){return new Nt(xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function fD(){return new Nt(xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xw+"' property when initializing the app?")}function pD(){return new Nt(xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function mD(){return new Nt(xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function gD(t){return new Nt(xt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fh(t){return new Nt(xt.INVALID_ARGUMENT,t)}function Ow(){return new Nt(xt.APP_DELETED,"The Firebase app was deleted.")}function vD(t){return new Nt(xt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ia(t,e){return new Nt(xt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ta(t){throw new Nt(xt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gn.makeFromUrl(e,n)}catch{return new Gn(e,"")}if(r.path==="")return r;throw hD(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(U){U.path_=decodeURIComponent(U.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${s}/o${p}`,"i"),P={bucket:1,path:3},D=n===Mw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",O=new RegExp(`^https?://${D}/${s}/${S}`,"i"),F=[{regex:a,indices:u,postModify:i},{regex:_,indices:P,postModify:c},{regex:O,indices:{bucket:1,path:2},postModify:c}];for(let U=0;U<F.length;U++){const ee=F[U],W=ee.regex.exec(e);if(W){const T=W[ee.indices.bucket];let b=W[ee.indices.path];b||(b=""),r=new Gn(T,b),ee.postModify(r);break}}if(r==null)throw dD(e);return r}}class yD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function d(...S){c||(c=!0,e.apply(null,S))}function f(S){s=setTimeout(()=>{s=null,t(_,u())},S)}function p(){i&&clearTimeout(i)}function _(S,...O){if(c){p();return}if(S){p(),d.call(null,S,...O);return}if(u()||o){p(),d.call(null,S,...O);return}r<64&&(r*=2);let F;a===1?(a=2,F=0):F=(r+Math.random())*1e3,f(F)}let P=!1;function D(S){P||(P=!0,p(),!c&&(s!==null?(S||(a=2),clearTimeout(s),f(0)):S||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,D(!0)},n),D}function wD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){return t!==void 0}function TD(t){return typeof t=="object"&&!Array.isArray(t)}function Bf(t){return typeof t=="string"||t instanceof String}function gv(t){return jf()&&t instanceof Blob}function jf(){return typeof Blob<"u"}function vv(t,e,n,r){if(r<e)throw fh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw fh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Nw(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ai;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ai||(Ai={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n,r,s,i,o,a,u,c,d,f,p=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,D)=>{this.resolve_=P,this.reject_=D,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new jl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ai.NO_ERROR,u=i.getStatus();if(!a||ED(u,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ai.ABORT;r(!1,new jl(!1,null,d));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new jl(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());bD(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=$f();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?Ow():cD();o(u)}else{const u=uD();o(u)}};this.canceled_?n(!1,new jl(!1,null,!0)):this.backoffId_=_D(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function ID(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function PD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function RD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function CD(t,e,n,r,s,i,o=!0,a=!1){const u=Nw(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return kD(d,e),ID(d,n),PD(d,i),RD(d,r),new AD(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function DD(...t){const e=SD();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(jf())return new Blob(t);throw new Nt(xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function MD(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){if(typeof atob>"u")throw gD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pd{constructor(e,n){this.data=e,this.contentType=n||null}}function OD(t,e){switch(t){case Rr.RAW:return new pd(Vw(e));case Rr.BASE64:case Rr.BASE64URL:return new pd(Lw(t,e));case Rr.DATA_URL:return new pd(VD(e),LD(e))}throw $f()}function Vw(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function ND(t){let e;try{e=decodeURIComponent(t)}catch{throw Ia(Rr.DATA_URL,"Malformed data URL.")}return Vw(e)}function Lw(t,e){switch(t){case Rr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ia(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Rr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ia(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xD(e)}catch(s){throw s.message.includes("polyfill")?s:Ia(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Fw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ia(Rr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=FD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function VD(t){const e=new Fw(t);return e.base64?Lw(Rr.BASE64,e.rest):ND(e.rest)}function LD(t){return new Fw(t).contentType}function FD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n){let r=0,s="";gv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(gv(this.data_)){const r=this.data_,s=MD(r,e,n);return s===null?null:new Rs(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Rs(r,!0)}}static getBlob(...e){if(jf()){const n=e.map(r=>r instanceof Rs?r.data_:r);return new Rs(DD.apply(null,n))}else{const n=e.map(o=>Bf(o)?OD(Rr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Rs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t){let e;try{e=JSON.parse(t)}catch{return null}return TD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $D(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function $w(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t,e){return e}class Sn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||BD}}let ql=null;function jD(t){return!Bf(t)||t.length<2?t:$w(t)}function Bw(){if(ql)return ql;const t=[];t.push(new Sn("bucket")),t.push(new Sn("generation")),t.push(new Sn("metageneration")),t.push(new Sn("name","fullPath",!0));function e(i,o){return jD(o)}const n=new Sn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Sn("size");return s.xform=r,t.push(s),t.push(new Sn("timeCreated")),t.push(new Sn("updated")),t.push(new Sn("md5Hash",null,!0)),t.push(new Sn("cacheControl",null,!0)),t.push(new Sn("contentDisposition",null,!0)),t.push(new Sn("contentEncoding",null,!0)),t.push(new Sn("contentLanguage",null,!0)),t.push(new Sn("contentType",null,!0)),t.push(new Sn("metadata","customMetadata",!0)),ql=t,ql}function qD(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Gn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function HD(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return qD(r,t),r}function jw(t,e,n){const r=Uw(e);return r===null?null:HD(t,r,n)}function WD(t,e,n,r){const s=Uw(e);if(s===null||!Bf(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),_=kc(p,n,r),P=Nw({alt:"media",token:c});return _+P})[0]}function zD(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class qf{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t){if(!t)throw $f()}function YD(t,e){function n(r,s){const i=jw(t,s,e);return qw(i!==null),i}return n}function KD(t,e){function n(r,s){const i=jw(t,s,e);return qw(i!==null),WD(i,s,t.host,t._protocol)}return n}function Hw(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=aD():s=oD():n.getStatus()===402?s=iD(t.bucket):n.getStatus()===403?s=lD(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Ww(t){const e=Hw(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=sD(t.path)),i.serverResponse=s.serverResponse,i}return n}function GD(t,e,n){const r=e.fullServerUrl(),s=kc(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new qf(s,i,KD(t,n),o);return a.errorHandler=Ww(e),a}function QD(t,e){const n=e.fullServerUrl(),r=kc(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,c){}const a=new qf(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=Ww(e),a}function XD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function JD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=XD(null,e)),r}function ZD(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let F="";for(let U=0;U<2;U++)F=F+Math.random().toString().slice(2);return F}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=JD(e,r,s),d=zD(c,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+u+"--",_=Rs.getBlob(f,r,p);if(_===null)throw pD();const P={name:c.fullPath},D=kc(i,t.host,t._protocol),S="POST",O=t.maxUploadRetryTime,$=new qf(D,S,YD(t,n),O);return $.urlParams=P,$.headers=o,$.body=_.uploadData(),$.errorHandler=Hw(e),$}class e2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ai.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ai.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ai.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw ta("cannot .send() more than once");if(ei(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ta("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ta("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ta("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ta("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class t2 extends e2{initXhr(){this.xhr_.responseType="text"}}function Hf(){return new t2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Oi(e,n)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $w(this._location.path)}get storage(){return this._service}get parent(){const e=UD(this._location.path);if(e===null)return null;const n=new Gn(this._location.bucket,e);return new Oi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw vD(e)}}function n2(t,e,n){t._throwIfRoot("uploadBytes");const r=ZD(t.storage,t._location,Bw(),new Rs(e,!0),n);return t.storage.makeRequestWithTokens(r,Hf).then(s=>({metadata:s,ref:t}))}function r2(t){t._throwIfRoot("getDownloadURL");const e=GD(t.storage,t._location,Bw());return t.storage.makeRequestWithTokens(e,Hf).then(n=>{if(n===null)throw mD();return n})}function s2(t){t._throwIfRoot("deleteObject");const e=QD(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Hf)}function i2(t,e){const n=$D(t._location.path,e),r=new Gn(t._location.bucket,n);return new Oi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){return/^[A-Za-z]+:\/\//.test(t)}function a2(t,e){return new Oi(t,e)}function zw(t,e){if(t instanceof Wf){const n=t;if(n._bucket==null)throw fD();const r=new Oi(n,n._bucket);return e!=null?zw(r,e):r}else return e!==void 0?i2(t,e):t}function l2(t,e){if(e&&o2(e)){if(t instanceof Wf)return a2(t,e);throw fh("To use ref(service, url), the first argument must be a Storage instance.")}else return zw(t,e)}function yv(t,e){const n=e?.[xw];return n==null?null:Gn.makeFromBucketSpec(n,t)}function u2(t,e,n,r={}){t.host=`${e}:${n}`;const s=ei(e);s&&(Uh(`https://${t.host}/b`),$h("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:p_(i,t.app.options.projectId))}class Wf{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Mw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nD,this._maxUploadRetryTime=rD,this._requests=new Set,s!=null?this._bucket=Gn.makeFromBucketSpec(s,this._host):this._bucket=yv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=yv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new yD(Ow());{const o=CD(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const _v="@firebase/storage",wv="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="storage";function Kw(t,e,n){return t=It(t),n2(t,e,n)}function Gw(t){return t=It(t),r2(t)}function Qw(t){return t=It(t),s2(t)}function Fu(t,e){return t=It(t),l2(t,e)}function c2(t=qh(),e){t=It(t);const r=rc(t,Yw).getImmediate({identifier:e}),s=d_("storage");return s&&d2(r,...s),r}function d2(t,e,n,r={}){u2(t,e,n,r)}function h2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Wf(n,r,s,e,Li)}function f2(){Ci(new Bs(Yw,h2,"PUBLIC").setMultipleInstances(!0)),Dr(_v,wv,""),Dr(_v,wv,"esm2017")}f2();const p2={apiKey:"AIzaSyAAcDF0bF_5H9L7kMLl8ROE-zXEyGeiOWY",authDomain:"hrboarddemo.firebaseapp.com",projectId:"hrboarddemo",storageBucket:"hrboarddemo.firebasestorage.app",messagingSenderId:"81529152712",appId:"1:81529152712:web:2c370d2e3aa9b2edf1b1fd",measurementId:"G-05T5BT7CHX"},zf=v_(p2),qn=bR(zf),Uu=JS(zf),$u=c2(zf),Xw=6048e5,m2=864e5,g2=6e4,Jw=36e5,v2=1e3,bv=Symbol.for("constructDateFrom");function ft(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&bv in t?t[bv](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ue(t,e){return ft(e||t,t)}function tr(t,e,n){const r=Ue(t,n?.in);return isNaN(e)?ft(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function pr(t,e,n){const r=Ue(t,n?.in);if(isNaN(e))return ft(t,NaN);if(!e)return r;const s=r.getDate(),i=ft(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const o=i.getDate();return s>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function Zw(t,e,n){const{years:r=0,months:s=0,weeks:i=0,days:o=0,hours:a=0,minutes:u=0,seconds:c=0}=e,d=Ue(t,n?.in),f=s||r?pr(d,s+r*12):d,p=o||i?tr(f,o+i*7):f,_=u+a*60,D=(c+_*60)*1e3;return ft(t,+p+D)}function y2(t,e,n){return ft(t,+Ue(t)+e)}function _2(t,e,n){return y2(t,e*Jw)}let w2={};function Bi(){return w2}function _r(t,e){const n=Bi(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Ue(t,e?.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Po(t,e){return _r(t,{...e,weekStartsOn:1})}function eb(t,e){const n=Ue(t,e?.in),r=n.getFullYear(),s=ft(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Po(s),o=ft(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Po(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Bu(t){const e=Ue(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function dl(t,...e){const n=ft.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Tv(t,e){const n=Ue(t,e?.in);return n.setHours(0,0,0,0),n}function tb(t,e,n){const[r,s]=dl(n?.in,t,e),i=Tv(r),o=Tv(s),a=+i-Bu(i),u=+o-Bu(o);return Math.round((a-u)/m2)}function b2(t,e){const n=eb(t,e),r=ft(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Po(r)}function T2(t,e,n){return pr(t,e*3,n)}function Yf(t,e,n){return pr(t,e*12,n)}function Ev(t,e){const n=+Ue(t)-+Ue(e);return n<0?-1:n>0?1:n}function nb(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Pa(t){return!(!nb(t)&&typeof t!="number"||isNaN(+Ue(t)))}function Av(t,e){const n=Ue(t,e?.in);return Math.trunc(n.getMonth()/3)+1}function E2(t,e,n){const[r,s]=dl(n?.in,t,e);return r.getFullYear()-s.getFullYear()}function A2(t,e,n){const[r,s]=dl(n?.in,t,e),i=Ev(r,s),o=Math.abs(E2(r,s));r.setFullYear(1584),s.setFullYear(1584);const a=Ev(r,s)===-i,u=i*(o-+a);return u===0?0:u}function rb(t,e){const[n,r]=dl(t,e.start,e.end);return{start:n,end:r}}function sb(t,e){const{start:n,end:r}=rb(e?.in,t);let s=+n>+r;const i=s?+n:+r,o=s?r:n;o.setHours(0,0,0,0);let a=1;const u=[];for(;+o<=i;)u.push(ft(n,o)),o.setDate(o.getDate()+a),o.setHours(0,0,0,0);return s?u.reverse():u}function wi(t,e){const n=Ue(t,e?.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}function I2(t,e){const{start:n,end:r}=rb(e?.in,t);let s=+n>+r;const i=s?+wi(n):+wi(r);let o=wi(s?r:n),a=1;const u=[];for(;+o<=i;)u.push(ft(n,o)),o=T2(o,a);return s?u.reverse():u}function P2(t,e){const n=Ue(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function ib(t,e){const n=Ue(t,e?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Ya(t,e){const n=Ue(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function ob(t,e){const n=Bi(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Ue(t,e?.in),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function Iv(t,e){const n=Ue(t,e?.in),r=n.getMonth(),s=r-r%3+3;return n.setMonth(s,0),n.setHours(23,59,59,999),n}const k2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},R2=(t,e,n)=>{let r;const s=k2[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function md(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const C2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},S2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},D2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M2={date:md({formats:C2,defaultWidth:"full"}),time:md({formats:S2,defaultWidth:"full"}),dateTime:md({formats:D2,defaultWidth:"full"})},x2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},O2=(t,e,n,r)=>x2[t];function na(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const N2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},V2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},L2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},F2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},U2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},B2=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},j2={ordinalNumber:B2,era:na({values:N2,defaultWidth:"wide"}),quarter:na({values:V2,defaultWidth:"wide",argumentCallback:t=>t-1}),month:na({values:L2,defaultWidth:"wide"}),day:na({values:F2,defaultWidth:"wide"}),dayPeriod:na({values:U2,defaultWidth:"wide",formattingValues:$2,defaultFormattingWidth:"wide"})};function ra(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?H2(a,f=>f.test(o)):q2(a,f=>f.test(o));let c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function q2(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function H2(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function W2(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const z2=/^(\d+)(th|st|nd|rd)?/i,Y2=/\d+/i,K2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},G2={any:[/^b/i,/^(a|c)/i]},Q2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},X2={any:[/1/i,/2/i,/3/i,/4/i]},J2={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Z2={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sM={ordinalNumber:W2({matchPattern:z2,parsePattern:Y2,valueCallback:t=>parseInt(t,10)}),era:ra({matchPatterns:K2,defaultMatchWidth:"wide",parsePatterns:G2,defaultParseWidth:"any"}),quarter:ra({matchPatterns:Q2,defaultMatchWidth:"wide",parsePatterns:X2,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ra({matchPatterns:J2,defaultMatchWidth:"wide",parsePatterns:Z2,defaultParseWidth:"any"}),day:ra({matchPatterns:eM,defaultMatchWidth:"wide",parsePatterns:tM,defaultParseWidth:"any"}),dayPeriod:ra({matchPatterns:nM,defaultMatchWidth:"any",parsePatterns:rM,defaultParseWidth:"any"})},ab={code:"en-US",formatDistance:R2,formatLong:M2,formatRelative:O2,localize:j2,match:sM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function iM(t,e){const n=Ue(t,e?.in);return tb(n,Ya(n))+1}function Kf(t,e){const n=Ue(t,e?.in),r=+Po(n)-+b2(n);return Math.round(r/Xw)+1}function Gf(t,e){const n=Ue(t,e?.in),r=n.getFullYear(),s=Bi(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=ft(e?.in||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=_r(o,e),u=ft(e?.in||t,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=_r(u,e);return+n>=+a?r+1:+n>=+c?r:r-1}function oM(t,e){const n=Bi(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=Gf(t,e),i=ft(e?.in||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),_r(i,e)}function Qf(t,e){const n=Ue(t,e?.in),r=+_r(n,e)-+oM(n,e);return Math.round(r/Xw)+1}function ht(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ys={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ht(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ht(n+1,2)},d(t,e){return ht(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ht(t.getHours()%12||12,e.length)},H(t,e){return ht(t.getHours(),e.length)},m(t,e){return ht(t.getMinutes(),e.length)},s(t,e){return ht(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ht(s,e.length)}},Ki={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Pv={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ys.y(t,e)},Y:function(t,e,n,r){const s=Gf(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return ht(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):ht(i,e.length)},R:function(t,e){const n=eb(t);return ht(n,e.length)},u:function(t,e){const n=t.getFullYear();return ht(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ht(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ht(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ys.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ht(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=Qf(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):ht(s,e.length)},I:function(t,e,n){const r=Kf(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ht(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ys.d(t,e)},D:function(t,e,n){const r=iM(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ht(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ht(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ht(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ht(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Ki.noon:r===0?s=Ki.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Ki.evening:r>=12?s=Ki.afternoon:r>=4?s=Ki.morning:s=Ki.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ys.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ys.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ht(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ht(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ys.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ys.s(t,e)},S:function(t,e){return ys.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Rv(r);case"XXXX":case"XX":return vi(r);case"XXXXX":case"XXX":default:return vi(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Rv(r);case"xxxx":case"xx":return vi(r);case"xxxxx":case"xxx":default:return vi(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+kv(r,":");case"OOOO":default:return"GMT"+vi(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+kv(r,":");case"zzzz":default:return"GMT"+vi(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ht(r,e.length)},T:function(t,e,n){return ht(+t,e.length)}};function kv(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+ht(i,2)}function Rv(t,e){return t%60===0?(t>0?"-":"+")+ht(Math.abs(t)/60,2):vi(t,e)}function vi(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=ht(Math.trunc(r/60),2),i=ht(r%60,2);return n+s+e+i}const Cv=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},lb=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},aM=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Cv(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Cv(r,e)).replace("{{time}}",lb(s,e))},ph={p:lb,P:aM},lM=/^D+$/,uM=/^Y+$/,cM=["D","DD","YY","YYYY"];function ub(t){return lM.test(t)}function cb(t){return uM.test(t)}function mh(t,e,n){const r=dM(t,e,n);if(console.warn(r),cM.includes(t))throw new RangeError(r)}function dM(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pM=/^'([^]*?)'?$/,mM=/''/g,gM=/[a-zA-Z]/;function Fr(t,e,n){const r=Bi(),s=n?.locale??r.locale??ab,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Ue(t,n?.in);if(!Pa(a))throw new RangeError("Invalid time value");let u=e.match(fM).map(d=>{const f=d[0];if(f==="p"||f==="P"){const p=ph[f];return p(d,s.formatLong)}return d}).join("").match(hM).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const f=d[0];if(f==="'")return{isToken:!1,value:vM(d)};if(Pv[f])return{isToken:!0,value:d};if(f.match(gM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});s.localize.preprocessor&&(u=s.localize.preprocessor(a,u));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return u.map(d=>{if(!d.isToken)return d.value;const f=d.value;(!n?.useAdditionalWeekYearTokens&&cb(f)||!n?.useAdditionalDayOfYearTokens&&ub(f))&&mh(f,e,String(t));const p=Pv[f[0]];return p(a,f,s.localize,c)}).join("")}function vM(t){const e=t.match(pM);return e?e[1].replace(mM,"'"):t}function yM(t,e){return Ue(t,e?.in).getDay()}function _M(t,e){const n=Ue(t,e?.in),r=n.getFullYear(),s=n.getMonth(),i=ft(n,0);return i.setFullYear(r,s+1,0),i.setHours(0,0,0,0),i.getDate()}function wM(){return Object.assign({},Bi())}function us(t,e){return Ue(t,e?.in).getHours()}function bM(t,e){const n=Ue(t,e?.in).getDay();return n===0?7:n}function Qs(t,e){return Ue(t,e?.in).getMinutes()}function et(t,e){return Ue(t,e?.in).getMonth()}function ko(t){return Ue(t).getSeconds()}function qe(t,e){return Ue(t,e?.in).getFullYear()}function Ni(t,e){return+Ue(t)>+Ue(e)}function Ro(t,e){return+Ue(t)<+Ue(e)}function io(t,e){return+Ue(t)==+Ue(e)}function TM(t,e){const n=EM(e)?new e(0):ft(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function EM(t){return typeof t=="function"&&t.prototype?.constructor===t}const AM=10;class db{subPriority=0;validate(e,n){return!0}}class IM extends db{constructor(e,n,r,s,i){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class PM extends db{priority=AM;subPriority=-1;constructor(e,n){super(),this.context=e||(r=>ft(n,r))}set(e,n){return n.timestampIsSet?e:ft(e,TM(e,this.context))}}class ut{run(e,n,r,s){const i=this.parse(e,n,r,s);return i?{setter:new IM(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,n,r){return!0}}class kM extends ut{priority=140;parse(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,n,r){return n.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const qt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Pr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ht(t,e){return t&&{value:e(t.value),rest:t.rest}}function Rt(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function kr(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*Jw+i*g2+o*v2),rest:e.slice(n[0].length)}}function hb(t){return Rt(qt.anyDigitsSigned,t)}function Ot(t,e){switch(t){case 1:return Rt(qt.singleDigit,e);case 2:return Rt(qt.twoDigits,e);case 3:return Rt(qt.threeDigits,e);case 4:return Rt(qt.fourDigits,e);default:return Rt(new RegExp("^\\d{1,"+t+"}"),e)}}function ju(t,e){switch(t){case 1:return Rt(qt.singleDigitSigned,e);case 2:return Rt(qt.twoDigitsSigned,e);case 3:return Rt(qt.threeDigitsSigned,e);case 4:return Rt(qt.fourDigitsSigned,e);default:return Rt(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Xf(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function fb(t,e){const n=e>0,r=n?e:1-e;let s;if(r<=50)s=t||100;else{const i=r+50,o=Math.trunc(i/100)*100,a=t>=i%100;s=t+o-(a?100:0)}return n?s:1-s}function pb(t){return t%400===0||t%4===0&&t%100!==0}class RM extends ut{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,r){const s=i=>({year:i,isTwoDigitYear:n==="yy"});switch(n){case"y":return Ht(Ot(4,e),s);case"yo":return Ht(r.ordinalNumber(e,{unit:"year"}),s);default:return Ht(Ot(n.length,e),s)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r){const s=e.getFullYear();if(r.isTwoDigitYear){const o=fb(r.year,s);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const i=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class CM extends ut{priority=130;parse(e,n,r){const s=i=>({year:i,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Ht(Ot(4,e),s);case"Yo":return Ht(r.ordinalNumber(e,{unit:"year"}),s);default:return Ht(Ot(n.length,e),s)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r,s){const i=Gf(e,s);if(r.isTwoDigitYear){const a=fb(r.year,i);return e.setFullYear(a,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),_r(e,s)}const o=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),_r(e,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class SM extends ut{priority=130;parse(e,n){return ju(n==="R"?4:n.length,e)}set(e,n,r){const s=ft(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Po(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class DM extends ut{priority=130;parse(e,n){return ju(n==="u"?4:n.length,e)}set(e,n,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class MM extends ut{priority=120;parse(e,n,r){switch(n){case"Q":case"QQ":return Ot(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class xM extends ut{priority=120;parse(e,n,r){switch(n){case"q":case"qq":return Ot(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class OM extends ut{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,r){const s=i=>i-1;switch(n){case"M":return Ht(Rt(qt.month,e),s);case"MM":return Ht(Ot(2,e),s);case"Mo":return Ht(r.ordinalNumber(e,{unit:"month"}),s);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class NM extends ut{priority=110;parse(e,n,r){const s=i=>i-1;switch(n){case"L":return Ht(Rt(qt.month,e),s);case"LL":return Ht(Ot(2,e),s);case"Lo":return Ht(r.ordinalNumber(e,{unit:"month"}),s);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function VM(t,e,n){const r=Ue(t,n?.in),s=Qf(r,n)-e;return r.setDate(r.getDate()-s*7),Ue(r,n?.in)}class LM extends ut{priority=100;parse(e,n,r){switch(n){case"w":return Rt(qt.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Ot(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r,s){return _r(VM(e,r,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function FM(t,e,n){const r=Ue(t,n?.in),s=Kf(r,n)-e;return r.setDate(r.getDate()-s*7),r}class UM extends ut{priority=100;parse(e,n,r){switch(n){case"I":return Rt(qt.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Ot(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r){return Po(FM(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const $M=[31,28,31,30,31,30,31,31,30,31,30,31],BM=[31,29,31,30,31,30,31,31,30,31,30,31];class jM extends ut{priority=90;subPriority=1;parse(e,n,r){switch(n){case"d":return Rt(qt.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Ot(n.length,e)}}validate(e,n){const r=e.getFullYear(),s=pb(r),i=e.getMonth();return s?n>=1&&n<=BM[i]:n>=1&&n<=$M[i]}set(e,n,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class qM extends ut{priority=90;subpriority=1;parse(e,n,r){switch(n){case"D":case"DD":return Rt(qt.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Ot(n.length,e)}}validate(e,n){const r=e.getFullYear();return pb(r)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Jf(t,e,n){const r=Bi(),s=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Ue(t,n?.in),o=i.getDay(),u=(e%7+7)%7,c=7-s,d=e<0||e>6?e-(o+c)%7:(u+c)%7-(o+c)%7;return tr(i,d,n)}class HM extends ut{priority=90;parse(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=Jf(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class WM extends ut{priority=90;parse(e,n,r,s){const i=o=>{const a=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+a};switch(n){case"e":case"ee":return Ht(Ot(n.length,e),i);case"eo":return Ht(r.ordinalNumber(e,{unit:"day"}),i);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=Jf(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class zM extends ut{priority=90;parse(e,n,r,s){const i=o=>{const a=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+a};switch(n){case"c":case"cc":return Ht(Ot(n.length,e),i);case"co":return Ht(r.ordinalNumber(e,{unit:"day"}),i);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=Jf(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function YM(t,e,n){const r=Ue(t,n?.in),s=bM(r,n),i=e-s;return tr(r,i,n)}class KM extends ut{priority=90;parse(e,n,r){const s=i=>i===0?7:i;switch(n){case"i":case"ii":return Ot(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Ht(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return Ht(r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Ht(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Ht(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,n){return n>=1&&n<=7}set(e,n,r){return e=YM(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class GM extends ut{priority=80;parse(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Xf(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class QM extends ut{priority=80;parse(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Xf(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class XM extends ut{priority=80;parse(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Xf(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class JM extends ut{priority=70;parse(e,n,r){switch(n){case"h":return Rt(qt.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Ot(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,r){const s=e.getHours()>=12;return s&&r<12?e.setHours(r+12,0,0,0):!s&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class ZM extends ut{priority=70;parse(e,n,r){switch(n){case"H":return Rt(qt.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Ot(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class ex extends ut{priority=70;parse(e,n,r){switch(n){case"K":return Rt(qt.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Ot(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class tx extends ut{priority=70;parse(e,n,r){switch(n){case"k":return Rt(qt.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Ot(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,r){const s=r<=24?r%24:r;return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class nx extends ut{priority=60;parse(e,n,r){switch(n){case"m":return Rt(qt.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Ot(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class rx extends ut{priority=50;parse(e,n,r){switch(n){case"s":return Rt(qt.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Ot(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class sx extends ut{priority=30;parse(e,n){const r=s=>Math.trunc(s*Math.pow(10,-n.length+3));return Ht(Ot(n.length,e),r)}set(e,n,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class ix extends ut{priority=10;parse(e,n){switch(n){case"X":return kr(Pr.basicOptionalMinutes,e);case"XX":return kr(Pr.basic,e);case"XXXX":return kr(Pr.basicOptionalSeconds,e);case"XXXXX":return kr(Pr.extendedOptionalSeconds,e);case"XXX":default:return kr(Pr.extended,e)}}set(e,n,r){return n.timestampIsSet?e:ft(e,e.getTime()-Bu(e)-r)}incompatibleTokens=["t","T","x"]}class ox extends ut{priority=10;parse(e,n){switch(n){case"x":return kr(Pr.basicOptionalMinutes,e);case"xx":return kr(Pr.basic,e);case"xxxx":return kr(Pr.basicOptionalSeconds,e);case"xxxxx":return kr(Pr.extendedOptionalSeconds,e);case"xxx":default:return kr(Pr.extended,e)}}set(e,n,r){return n.timestampIsSet?e:ft(e,e.getTime()-Bu(e)-r)}incompatibleTokens=["t","T","X"]}class ax extends ut{priority=40;parse(e){return hb(e)}set(e,n,r){return[ft(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class lx extends ut{priority=20;parse(e){return hb(e)}set(e,n,r){return[ft(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const ux={G:new kM,y:new RM,Y:new CM,R:new SM,u:new DM,Q:new MM,q:new xM,M:new OM,L:new NM,w:new LM,I:new UM,d:new jM,D:new qM,E:new HM,e:new WM,c:new zM,i:new KM,a:new GM,b:new QM,B:new XM,h:new JM,H:new ZM,K:new ex,k:new tx,m:new nx,s:new rx,S:new sx,X:new ix,x:new ox,t:new ax,T:new lx},cx=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dx=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hx=/^'([^]*?)'?$/,fx=/''/g,px=/\S/,mx=/[a-zA-Z]/;function gh(t,e,n,r){const s=()=>ft(r?.in||n,NaN),i=wM(),o=r?.locale??i.locale??ab,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,u=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(!e)return t?s():Ue(n,r?.in);const c={firstWeekContainsDate:a,weekStartsOn:u,locale:o},d=[new PM(r?.in,n)],f=e.match(dx).map(S=>{const O=S[0];if(O in ph){const $=ph[O];return $(S,o.formatLong)}return S}).join("").match(cx),p=[];for(let S of f){!r?.useAdditionalWeekYearTokens&&cb(S)&&mh(S,e,t),!r?.useAdditionalDayOfYearTokens&&ub(S)&&mh(S,e,t);const O=S[0],$=ux[O];if($){const{incompatibleTokens:F}=$;if(Array.isArray(F)){const ee=p.find(W=>F.includes(W.token)||W.token===O);if(ee)throw new RangeError(`The format string mustn't contain \`${ee.fullToken}\` and \`${S}\` at the same time`)}else if($.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${S}\` and any other token at the same time`);p.push({token:O,fullToken:S});const U=$.run(t,S,o.match,c);if(!U)return s();d.push(U.setter),t=U.rest}else{if(O.match(mx))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");if(S==="''"?S="'":O==="'"&&(S=gx(S)),t.indexOf(S)===0)t=t.slice(S.length);else return s()}}if(t.length>0&&px.test(t))return s();const _=d.map(S=>S.priority).sort((S,O)=>O-S).filter((S,O,$)=>$.indexOf(S)===O).map(S=>d.filter(O=>O.priority===S).sort((O,$)=>$.subPriority-O.subPriority)).map(S=>S[0]);let P=Ue(n,r?.in);if(isNaN(+P))return s();const D={};for(const S of _){if(!S.validate(P,c))return s();const O=S.set(P,D,c);Array.isArray(O)?(P=O[0],Object.assign(D,O[1])):P=O}return P}function gx(t){return t.match(hx)[1].replace(fx,"'")}function Sv(t,e,n){const[r,s]=dl(n?.in,t,e);return+wi(r)==+wi(s)}function mb(t,e,n){return tr(t,-e,n)}function gb(t,e,n){const r=Ue(t,n?.in),s=r.getFullYear(),i=r.getDate(),o=ft(t,0);o.setFullYear(s,e,15),o.setHours(0,0,0,0);const a=_M(o);return r.setMonth(e,Math.min(i,a)),r}function mt(t,e,n){let r=Ue(t,n?.in);return isNaN(+r)?ft(t,NaN):(e.year!=null&&r.setFullYear(e.year),e.month!=null&&(r=gb(r,e.month)),e.date!=null&&r.setDate(e.date),e.hours!=null&&r.setHours(e.hours),e.minutes!=null&&r.setMinutes(e.minutes),e.seconds!=null&&r.setSeconds(e.seconds),e.milliseconds!=null&&r.setMilliseconds(e.milliseconds),r)}function vx(t,e,n){const r=Ue(t,n?.in);return r.setHours(e),r}function vb(t,e,n){const r=Ue(t,n?.in);return r.setMilliseconds(e),r}function yx(t,e,n){const r=Ue(t,n?.in);return r.setMinutes(e),r}function yb(t,e,n){const r=Ue(t,n?.in);return r.setSeconds(e),r}function Cr(t,e,n){const r=Ue(t,n?.in);return isNaN(+r)?ft(t,NaN):(r.setFullYear(e),r)}function Co(t,e,n){return pr(t,-e,n)}function _x(t,e,n){const{years:r=0,months:s=0,weeks:i=0,days:o=0,hours:a=0,minutes:u=0,seconds:c=0}=e,d=Co(t,s+r*12,n),f=mb(d,o+i*7,n),p=u+a*60,P=(c+p*60)*1e3;return ft(t,+f-P)}function _b(t,e,n){return Yf(t,-e,n)}function Bo(){const t=AE();return B(),X("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img",...t},[M("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),M("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),M("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),M("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}Bo.compatConfig={MODE:3};function wb(){return B(),X("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[M("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),M("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}wb.compatConfig={MODE:3};function Zf(){return B(),X("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[M("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Zf.compatConfig={MODE:3};function ep(){return B(),X("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[M("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}ep.compatConfig={MODE:3};function tp(){return B(),X("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[M("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),M("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}tp.compatConfig={MODE:3};function np(){return B(),X("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[M("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}np.compatConfig={MODE:3};function rp(){return B(),X("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[M("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}rp.compatConfig={MODE:3};const Hn=(t,e)=>e?new Date(t.toLocaleString("en-US",{timeZone:e})):new Date(t),sp=(t,e,n)=>vh(t,e,n)||ve(),wx=(t,e,n)=>{const r=e.dateInTz?Hn(new Date(t),e.dateInTz):ve(t);return n?sn(r,!0):r},vh=(t,e,n)=>{if(!t)return null;const r=n?sn(ve(t),!0):ve(t);return e?e.exactMatch?wx(t,e,n):Hn(r,e.timezone):r},bx=t=>{const e=new Date(t.getFullYear(),0,1).getTimezoneOffset();return t.getTimezoneOffset()<e},Tx=(t,e)=>{if(!t)return 0;const n=new Date,r=new Date(n.toLocaleString("en-US",{timeZone:"UTC"})),s=new Date(n.toLocaleString("en-US",{timeZone:t})),i=(bx(e??s)?s:e??s).getTimezoneOffset()/60;return(+r-+s)/(1e3*60*60)-i};var lr=(t=>(t.month="month",t.year="year",t))(lr||{}),ur=(t=>(t.top="top",t.bottom="bottom",t))(ur||{}),Ii=(t=>(t.header="header",t.calendar="calendar",t.timePicker="timePicker",t))(Ii||{}),Tn=(t=>(t.month="month",t.year="year",t.calendar="calendar",t.time="time",t.minutes="minutes",t.hours="hours",t.seconds="seconds",t))(Tn||{});const Ex=["timestamp","date","iso"];var Mn=(t=>(t.up="up",t.down="down",t.left="left",t.right="right",t))(Mn||{}),At=(t=>(t.arrowUp="ArrowUp",t.arrowDown="ArrowDown",t.arrowLeft="ArrowLeft",t.arrowRight="ArrowRight",t.enter="Enter",t.space=" ",t.esc="Escape",t.tab="Tab",t.home="Home",t.end="End",t.pageUp="PageUp",t.pageDown="PageDown",t))(At||{}),vo=(t=>(t.MONTH_AND_YEAR="MM-yyyy",t.YEAR="yyyy",t.DATE="dd-MM-yyyy",t))(vo||{});function Dv(t){return e=>{const n=new Intl.DateTimeFormat(t,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${e}T00:00:00+00:00`));return t==="ar"?n.slice(2,5):n.slice(0,2)}}function Ax(t){return e=>Fr(Hn(new Date(`2017-01-0${e}T00:00:00+00:00`),"UTC"),"EEEEEE",{locale:t})}const Ix=(t,e,n)=>{const r=[1,2,3,4,5,6,7];let s;if(t!==null)try{s=r.map(Ax(t))}catch{s=r.map(Dv(e))}else s=r.map(Dv(e));const i=s.slice(0,n),o=s.slice(n+1,s.length);return[s[n]].concat(...o).concat(...i)},ip=(t,e,n)=>{const r=[];for(let s=+t[0];s<=+t[1];s++)r.push({value:+s,text:Ab(s,e)});return n?r.reverse():r},bb=(t,e,n)=>{const r=[1,2,3,4,5,6,7,8,9,10,11,12].map(i=>{const o=i<10?`0${i}`:i;return new Date(`2017-${o}-01T00:00:00+00:00`)});if(t!==null)try{const i=n==="long"?"LLLL":"LLL";return r.map((o,a)=>{const u=Fr(Hn(o,"UTC"),i,{locale:t});return{text:u.charAt(0).toUpperCase()+u.substring(1),value:a}})}catch{}const s=new Intl.DateTimeFormat(e,{month:n,timeZone:"UTC"});return r.map((i,o)=>{const a=s.format(i);return{text:a.charAt(0).toUpperCase()+a.substring(1),value:o}})},Px=t=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][t],Yt=t=>{const e=N(t);return e!=null&&e.$el?e?.$el:e},kx=t=>({type:"dot",...t??{}}),Tb=t=>Array.isArray(t)?!!t[0]&&!!t[1]:!1,op={prop:t=>`"${t}" prop must be enabled!`,dateArr:t=>`You need to use array as "model-value" binding in order to support "${t}"`},Zt=t=>t,Mv=t=>t===0?t:!t||isNaN(+t)?null:+t,xv=t=>t===null,Eb=t=>{if(t)return[...t.querySelectorAll("input, button, select, textarea, a[href]")][0]},Rx=t=>{const e=[],n=r=>r.filter(s=>s);for(let r=0;r<t.length;r+=3){const s=[t[r],t[r+1],t[r+2]];e.push(n(s))}return e},Ka=(t,e,n)=>{const r=n!=null,s=e!=null;if(!r&&!s)return!1;const i=+n,o=+e;return r&&s?+t>i||+t<o:r?+t>i:s?+t<o:!1},So=(t,e)=>Rx(t).map(n=>n.map(r=>{const{active:s,disabled:i,isBetween:o,highlighted:a}=e(r);return{...r,active:s,disabled:i,className:{dp__overlay_cell_active:s,dp__overlay_cell:!s,dp__overlay_cell_disabled:i,dp__overlay_cell_pad:!0,dp__overlay_cell_active_disabled:i&&s,dp__cell_in_between:o,"dp--highlighted":a}}})),Vs=(t,e,n=!1)=>{t&&e.allowStopPropagation&&(n&&t.stopImmediatePropagation(),t.stopPropagation())},Cx=()=>["a[href]","area[href]","input:not([disabled]):not([type='hidden'])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex='-1'])","[data-datepicker-instance]"].join(", ");function Sx(t,e){let n=[...document.querySelectorAll(Cx())];n=n.filter(s=>!t.contains(s)||s.hasAttribute("data-datepicker-instance"));const r=n.indexOf(t);if(r>=0&&(e?r-1>=0:r+1<=n.length))return n[r+(e?-1:1)]}const yh=(t,e)=>t?.querySelector(`[data-dp-element="${e}"]`),Ab=(t,e)=>new Intl.NumberFormat(e,{useGrouping:!1,style:"decimal"}).format(t),ap=(t,e)=>Fr(t,e??vo.DATE),gd=t=>Array.isArray(t),qu=(t,e,n)=>e.get(ap(t,n)),Dx=(t,e)=>t?e?e instanceof Map?!!qu(t,e):e(ve(t)):!1:!0,Vn=(t,e,n=!1,r)=>{if(t.key===At.enter||t.key===At.space)return n&&t.preventDefault(),e();if(r)return r(t)},Mx=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,Ib=(t,e)=>t?vo.MONTH_AND_YEAR:e?vo.YEAR:vo.DATE,Pb=t=>t<10?`0${t}`:t,Ov=(t,e,n,r,s,i)=>{const o=gh(t,e.slice(0,t.length),new Date,{locale:i});return Pa(o)&&nb(o)?r||s?o:mt(o,{hours:+n.hours,minutes:+n?.minutes,seconds:+n?.seconds,milliseconds:0}):null},xx=(t,e,n,r,s,i)=>{const o=Array.isArray(n)?n[0]:n;if(typeof e=="string")return Ov(t,e,o,r,s,i);if(Array.isArray(e)){let a=null;for(const u of e)if(a=Ov(t,u,o,r,s,i),a)break;return a}return typeof e=="function"?e(t):null},ve=t=>t?new Date(t):new Date,Ox=(t,e,n)=>{if(e){const s=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0"),o=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0"),u=n?t.getSeconds().toString().padStart(2,"0"):"00";return`${t.getFullYear()}-${s}-${i}T${o}:${a}:${u}.000Z`}const r=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds());return new Date(r).toISOString()},sn=(t,e)=>{const n=ve(JSON.parse(JSON.stringify(t))),r=mt(n,{hours:0,minutes:0,seconds:0,milliseconds:0});return e?P2(r):r},Ls=(t,e,n,r)=>{let s=t?ve(t):ve();return(e||e===0)&&(s=vx(s,+e)),(n||n===0)&&(s=yx(s,+n)),(r||r===0)&&(s=yb(s,+r)),vb(s,0)},Dt=(t,e)=>!t||!e?!1:Ro(sn(t),sn(e)),tt=(t,e)=>!t||!e?!1:io(sn(t),sn(e)),Ut=(t,e)=>!t||!e?!1:Ni(sn(t),sn(e)),Ga=(t,e,n)=>t!=null&&t[0]&&t!=null&&t[1]?Ut(n,t[0])&&Dt(n,t[1]):t!=null&&t[0]&&e?Ut(n,t[0])&&Dt(n,e)||Dt(n,t[0])&&Ut(n,e):!1,cr=t=>{const e=mt(new Date(t),{date:1});return sn(e)},vd=(t,e,n)=>e&&(n||n===0)?Object.fromEntries(["hours","minutes","seconds"].map(r=>r===e?[r,n]:[r,isNaN(+t[r])?void 0:+t[r]])):{hours:isNaN(+t.hours)?void 0:+t.hours,minutes:isNaN(+t.minutes)?void 0:+t.minutes,seconds:isNaN(+t.seconds)?void 0:+t.seconds},Pi=t=>({hours:us(t),minutes:Qs(t),seconds:ko(t)}),kb=(t,e)=>{if(e){const n=qe(ve(e));if(n>t)return 12;if(n===t)return et(ve(e))}},Rb=(t,e)=>{if(e){const n=qe(ve(e));return n<t?-1:n===t?et(ve(e)):void 0}},Do=t=>{if(t)return qe(ve(t))},Cb=(t,e)=>{const n=Ut(t,e)?e:t,r=Ut(e,t)?e:t;return sb({start:n,end:r})},Nx=t=>{const e=pr(t,1);return{month:et(e),year:qe(e)}},Yr=(t,e)=>{const n=_r(t,{weekStartsOn:+e}),r=ob(t,{weekStartsOn:+e});return[n,r]},Sb=(t,e)=>{const n={hours:us(ve()),minutes:Qs(ve()),seconds:e?ko(ve()):0};return Object.assign(n,t)},Ss=(t,e,n)=>[mt(ve(t),{date:1}),mt(ve(),{month:e,year:n,date:1})],es=(t,e,n)=>{let r=t?ve(t):ve();return(e||e===0)&&(r=gb(r,e)),n&&(r=Cr(r,n)),r},Db=(t,e,n,r,s)=>{if(!r||s&&!e||!s&&!n)return!1;const i=s?pr(t,1):Co(t,1),o=[et(i),qe(i)];return s?!Lx(...o,e):!Vx(...o,n)},Vx=(t,e,n)=>Dt(...Ss(n,t,e))||tt(...Ss(n,t,e)),Lx=(t,e,n)=>Ut(...Ss(n,t,e))||tt(...Ss(n,t,e)),Mb=(t,e,n,r,s,i,o)=>{if(typeof e=="function"&&!o)return e(t);const a=n?{locale:n}:void 0;return Array.isArray(t)?`${Fr(t[0],i,a)}${s&&!t[1]?"":r}${t[1]?Fr(t[1],i,a):""}`:Fr(t,i,a)},Gi=t=>{if(t)return null;throw new Error(op.prop("partial-range"))},Hl=(t,e)=>{if(e)return t();throw new Error(op.prop("range"))},_h=t=>Array.isArray(t)?Pa(t[0])&&(t[1]?Pa(t[1]):!0):t?Pa(t):!1,Fx=(t,e)=>mt(e??ve(),{hours:+t.hours||0,minutes:+t.minutes||0,seconds:+t.seconds||0}),yd=(t,e,n,r)=>{if(!t)return!0;if(r){const s=n==="max"?Ro(t,e):Ni(t,e),i={seconds:0,milliseconds:0};return s||io(mt(t,i),mt(e,i))}return n==="max"?t.getTime()<=e.getTime():t.getTime()>=e.getTime()},_d=(t,e,n)=>t?Fx(t,e):ve(n??e),Nv=(t,e,n,r,s)=>{if(Array.isArray(r)){const o=_d(t,r[0],e),a=_d(t,r[1],e);return yd(r[0],o,n,!!e)&&yd(r[1],a,n,!!e)&&s}const i=_d(t,r,e);return yd(r,i,n,!!e)&&s},wd=t=>mt(ve(),Pi(t)),Ux=(t,e,n)=>{if(t instanceof Map){const r=`${Pb(n+1)}-${e}`;return t.size?t.has(r):!1}return typeof t=="function"?t(sn(mt(ve(),{month:n,year:e}),!0)):!1},$x=(t,e,n)=>{if(t instanceof Map){const r=`${Pb(n+1)}-${e}`;return t.size?t.has(r):!0}return!0},xb=(t,e,n)=>typeof t=="function"?t({month:e,year:n}):!!t.months.find(r=>r.month===e&&r.year===n),lp=(t,e)=>typeof t=="function"?t(e):t.years.includes(e),wh=t=>`dp-${Fr(t,"yyyy-MM-dd")}`,Vv=(t,e)=>{const n=mb(sn(e),t),r=tr(sn(e),t);return{before:n,after:r}},sa=Js({menuFocused:!1,shiftKeyInMenu:!1}),Ob=()=>{const t=n=>{sa.menuFocused=n},e=n=>{sa.shiftKeyInMenu!==n&&(sa.shiftKeyInMenu=n)};return{control:ye(()=>({shiftKeyInMenu:sa.shiftKeyInMenu,menuFocused:sa.menuFocused})),setMenuFocused:t,setShiftKey:e}},Et=Js({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),bd=_e(null),Wl=_e(!1),Td=_e(!1),Ed=_e(!1),Ad=_e(!1),_n=_e(0),Ft=_e(0),ii=()=>{const t=ye(()=>Wl.value?[...Et.selectionGrid,Et.actionRow].filter(f=>f.length):Td.value?[...Et.timePicker[0],...Et.timePicker[1],Ad.value?[]:[bd.value],Et.actionRow].filter(f=>f.length):Ed.value?[...Et.monthPicker,Et.actionRow]:[Et.monthYear,...Et.calendar,Et.time,Et.actionRow].filter(f=>f.length)),e=f=>{_n.value=f?_n.value+1:_n.value-1;let p=null;t.value[Ft.value]&&(p=t.value[Ft.value][_n.value]),!p&&t.value[Ft.value+(f?1:-1)]?(Ft.value=Ft.value+(f?1:-1),_n.value=f?0:t.value[Ft.value].length-1):p||(_n.value=f?_n.value-1:_n.value+1)},n=f=>{Ft.value===0&&!f||Ft.value===t.value.length&&f||(Ft.value=f?Ft.value+1:Ft.value-1,t.value[Ft.value]?t.value[Ft.value]&&!t.value[Ft.value][_n.value]&&_n.value!==0&&(_n.value=t.value[Ft.value].length-1):Ft.value=f?Ft.value-1:Ft.value+1)},r=f=>{let p=null;t.value[Ft.value]&&(p=t.value[Ft.value][_n.value]),p?p.focus({preventScroll:!Wl.value}):_n.value=f?_n.value-1:_n.value+1},s=()=>{e(!0),r(!0)},i=()=>{e(!1),r(!1)},o=()=>{n(!1),r(!0)},a=()=>{n(!0),r(!0)},u=(f,p)=>{Et[p]=f},c=(f,p)=>{Et[p]=f},d=()=>{_n.value=0,Ft.value=0};return{buildMatrix:u,buildMultiLevelMatrix:c,setTimePickerBackRef:f=>{bd.value=f},setSelectionGrid:f=>{Wl.value=f,d(),f||(Et.selectionGrid=[])},setTimePicker:(f,p=!1)=>{Td.value=f,Ad.value=p,d(),f||(Et.timePicker[0]=[],Et.timePicker[1]=[])},setTimePickerElements:(f,p=0)=>{Et.timePicker[p]=f},arrowRight:s,arrowLeft:i,arrowUp:o,arrowDown:a,clearArrowNav:()=>{Et.monthYear=[],Et.calendar=[],Et.time=[],Et.actionRow=[],Et.selectionGrid=[],Et.timePicker[0]=[],Et.timePicker[1]=[],Wl.value=!1,Td.value=!1,Ad.value=!1,Ed.value=!1,d(),bd.value=null},setMonthPicker:f=>{Ed.value=f,d()},refSets:Et}},Lv=t=>({menuAppearTop:"dp-menu-appear-top",menuAppearBottom:"dp-menu-appear-bottom",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down",...t??{}}),Bx=t=>({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:e=>`Increment ${e}`,decrementValue:e=>`Decrement ${e}`,openTpOverlay:e=>`Open ${e} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",nextYear:"Next year",prevYear:"Previous year",day:void 0,weekDay:void 0,clearInput:"Clear value",calendarIcon:"Calendar icon",timePicker:"Time picker",monthPicker:e=>`Month picker${e?" overlay":""}`,yearPicker:e=>`Year picker${e?" overlay":""}`,timeOverlay:e=>`${e} overlay`,...t??{}}),Fv=t=>t?typeof t=="boolean"?t?2:0:+t>=2?+t:2:0,jx=t=>{const e=typeof t=="object"&&t,n={static:!0,solo:!1};if(!t)return{...n,count:Fv(!1)};const r=e?t:{},s=e?r.count??!0:t,i=Fv(s);return Object.assign(n,r,{count:i})},qx=(t,e,n)=>t||(typeof n=="string"?n:e),Hx=t=>typeof t=="boolean"?t?Lv({}):!1:Lv(t),Wx=t=>{const e={enterSubmit:!0,tabSubmit:!0,openMenu:"open",selectOnFocus:!1,rangeSeparator:" - ",escClose:!0};return typeof t=="object"?{...e,...t??{},enabled:!0}:{...e,enabled:t}},zx=t=>({months:[],years:[],times:{hours:[],minutes:[],seconds:[]},...t??{}}),Yx=t=>({showSelect:!0,showCancel:!0,showNow:!1,showPreview:!0,...t??{}}),Kx=t=>{const e={input:!1};return typeof t=="object"?{...e,...t??{},enabled:!0}:{enabled:t,...e}},Gx=t=>({allowStopPropagation:!0,closeOnScroll:!1,modeHeight:255,allowPreventDefault:!1,closeOnClearValue:!0,closeOnAutoApply:!0,noSwipe:!1,keepActionRow:!1,onClickOutside:void 0,tabOutClosesMenu:!0,arrowLeft:void 0,keepViewOnOffsetClick:!1,timeArrowHoldThreshold:0,shadowDom:!1,mobileBreakpoint:600,setDateOnMenuClose:!1,...t??{}}),Qx=t=>{const e={dates:Array.isArray(t)?t.map(n=>ve(n)):[],years:[],months:[],quarters:[],weeks:[],weekdays:[],options:{highlightDisabled:!1}};return typeof t=="function"?t:{...e,...t??{}}},Xx=t=>typeof t=="object"?{type:t?.type??"local",hideOnOffsetDates:t?.hideOnOffsetDates??!1}:{type:t,hideOnOffsetDates:!1},Jx=t=>{const e={noDisabledRange:!1,showLastInRange:!0,minMaxRawRange:!1,partialRange:!0,disableTimeRangeValidation:!1,maxRange:void 0,minRange:void 0,autoRange:void 0,fixedStart:!1,fixedEnd:!1};return typeof t=="object"?{enabled:!0,...e,...t}:{enabled:t,...e}},Zx=t=>t?typeof t=="string"?{timezone:t,exactMatch:!1,dateInTz:void 0,emitTimezone:void 0,convertModel:!0}:{timezone:t.timezone,exactMatch:t.exactMatch??!1,dateInTz:t.dateInTz??void 0,emitTimezone:t.emitTimezone??void 0,convertModel:t.convertModel??!0}:{timezone:void 0,exactMatch:!1,emitTimezone:void 0},Id=(t,e,n,r)=>new Map(t.map(s=>{const i=sp(s,e,r);return[ap(i,n),i]})),eO=(t,e)=>t.length?new Map(t.map(n=>{const r=sp(n.date,e);return[ap(r,vo.DATE),n]})):null,tO=t=>{var e;const n=Ib(t.isMonthPicker,t.isYearPicker);return{minDate:vh(t.minDate,t.timezone,t.isSpecific),maxDate:vh(t.maxDate,t.timezone,t.isSpecific),disabledDates:gd(t.disabledDates)?Id(t.disabledDates,t.timezone,n,t.isSpecific):t.disabledDates,allowedDates:gd(t.allowedDates)?Id(t.allowedDates,t.timezone,n,t.isSpecific):null,highlight:typeof t.highlight=="object"&&gd((e=t.highlight)==null?void 0:e.dates)?Id(t.highlight.dates,t.timezone,n):t.highlight,markers:eO(t.markers,t.timezone)}},nO=t=>typeof t=="boolean"?{enabled:t,dragSelect:!0,limit:null}:{enabled:!!t,limit:t.limit?+t.limit:null,dragSelect:t.dragSelect??!0},rO=t=>({...Object.fromEntries(Object.keys(t).map(e=>{const n=e,r=t[n],s=typeof t[n]=="string"?{[r]:!0}:Object.fromEntries(r.map(i=>[i,!0]));return[e,s]}))}),kt=t=>{const e=()=>{const W=t.enableSeconds?":ss":"",T=t.enableMinutes?":mm":"";return t.is24?`HH${T}${W}`:`hh${T}${W} aa`},n=()=>{var W;return t.format?t.format:t.monthPicker?"MM/yyyy":t.timePicker?e():t.weekPicker?`${((W=S.value)==null?void 0:W.type)==="iso"?"II":"ww"}-RR`:t.yearPicker?"yyyy":t.quarterPicker?"QQQ/yyyy":t.enableTimePicker?`MM/dd/yyyy, ${e()}`:"MM/dd/yyyy"},r=W=>Sb(W,t.enableSeconds),s=()=>U.value.enabled?t.startTime&&Array.isArray(t.startTime)?[r(t.startTime[0]),r(t.startTime[1])]:null:t.startTime&&!Array.isArray(t.startTime)?r(t.startTime):null,i=ye(()=>jx(t.multiCalendars)),o=ye(()=>s()),a=ye(()=>Bx(t.ariaLabels)),u=ye(()=>zx(t.filters)),c=ye(()=>Hx(t.transitions)),d=ye(()=>Yx(t.actionRow)),f=ye(()=>qx(t.previewFormat,t.format,n())),p=ye(()=>Wx(t.textInput)),_=ye(()=>Kx(t.inline)),P=ye(()=>Gx(t.config)),D=ye(()=>Qx(t.highlight)),S=ye(()=>Xx(t.weekNumbers)),O=ye(()=>Zx(t.timezone)),$=ye(()=>nO(t.multiDates)),F=ye(()=>tO({minDate:t.minDate,maxDate:t.maxDate,disabledDates:t.disabledDates,allowedDates:t.allowedDates,highlight:D.value,markers:t.markers,timezone:O.value,isSpecific:t.monthPicker||t.yearPicker||t.quarterPicker,isMonthPicker:t.monthPicker,isYearPicker:t.yearPicker})),U=ye(()=>Jx(t.range)),ee=ye(()=>rO(t.ui));return{defaultedTransitions:c,defaultedMultiCalendars:i,defaultedStartTime:o,defaultedAriaLabels:a,defaultedFilters:u,defaultedActionRow:d,defaultedPreviewFormat:f,defaultedTextInput:p,defaultedInline:_,defaultedConfig:P,defaultedHighlight:D,defaultedWeekNumbers:S,defaultedRange:U,propDates:F,defaultedTz:O,defaultedMultiDates:$,defaultedUI:ee,getDefaultPattern:n,getDefaultStartTime:s,handleEventPropagation:W=>{P.value.allowStopPropagation&&W.stopPropagation(),P.value.allowPreventDefault&&W.preventDefault()}}},sO=(t,e,n)=>{const r=_e(),{defaultedTextInput:s,defaultedRange:i,defaultedTz:o,defaultedMultiDates:a,getDefaultPattern:u}=kt(e),c=_e(""),d=Sa(e,"format"),f=Sa(e,"formatLocale");Ln(r,()=>{typeof e.onInternalModelChange=="function"&&t("internal-model-change",r.value,me(!0))},{deep:!0}),Ln(i,(v,J)=>{v.enabled!==J.enabled&&(r.value=null)}),Ln(d,()=>{fe()});const p=v=>o.value.timezone&&o.value.convertModel?Hn(v,o.value.timezone):v,_=v=>{if(o.value.timezone&&o.value.convertModel){const J=Tx(o.value.timezone,v);return _2(v,J)}return v},P=(v,J,Ae=!1)=>Mb(v,e.format,e.formatLocale,s.value.rangeSeparator,e.modelAuto,J??u(),Ae),D=v=>v?e.modelType?be(v):{hours:us(v),minutes:Qs(v),seconds:e.enableSeconds?ko(v):0}:null,S=v=>e.modelType?be(v):{month:et(v),year:qe(v)},O=v=>Array.isArray(v)?a.value.enabled?v.map(J=>$(J,Cr(ve(),J))):Hl(()=>[Cr(ve(),v[0]),v[1]?Cr(ve(),v[1]):Gi(i.value.partialRange)],i.value.enabled):Cr(ve(),+v),$=(v,J)=>(typeof v=="string"||typeof v=="number")&&e.modelType?oe(v):J,F=v=>Array.isArray(v)?[$(v[0],Ls(null,+v[0].hours,+v[0].minutes,v[0].seconds)),$(v[1],Ls(null,+v[1].hours,+v[1].minutes,v[1].seconds))]:$(v,Ls(null,v.hours,v.minutes,v.seconds)),U=v=>{const J=mt(ve(),{date:1});return Array.isArray(v)?a.value.enabled?v.map(Ae=>$(Ae,es(J,+Ae.month,+Ae.year))):Hl(()=>[$(v[0],es(J,+v[0].month,+v[0].year)),$(v[1],v[1]?es(J,+v[1].month,+v[1].year):Gi(i.value.partialRange))],i.value.enabled):$(v,es(J,+v.month,+v.year))},ee=v=>{if(Array.isArray(v))return v.map(J=>oe(J));throw new Error(op.dateArr("multi-dates"))},W=v=>{if(Array.isArray(v)&&i.value.enabled){const J=v[0],Ae=v[1];return[ve(Array.isArray(J)?J[0]:null),Array.isArray(Ae)&&Ae.length?ve(Ae[0]):null]}return ve(v[0])},T=v=>e.modelAuto?Array.isArray(v)?[oe(v[0]),oe(v[1])]:e.autoApply?[oe(v)]:[oe(v),null]:Array.isArray(v)?Hl(()=>v[1]?[oe(v[0]),v[1]?oe(v[1]):Gi(i.value.partialRange)]:[oe(v[0])],i.value.enabled):oe(v),b=()=>{Array.isArray(r.value)&&i.value.enabled&&r.value.length===1&&r.value.push(Gi(i.value.partialRange))},g=()=>{const v=r.value;return[be(v[0]),v[1]?be(v[1]):Gi(i.value.partialRange)]},w=()=>Array.isArray(r.value)?r.value[1]?g():be(Zt(r.value[0])):[],R=()=>(r.value||[]).map(v=>be(v)),k=(v=!1)=>(v||b(),e.modelAuto?w():a.value.enabled?R():Array.isArray(r.value)?Hl(()=>g(),i.value.enabled):be(Zt(r.value))),I=v=>!v||Array.isArray(v)&&!v.length?null:e.timePicker?F(Zt(v)):e.monthPicker?U(Zt(v)):e.yearPicker?O(Zt(v)):a.value.enabled?ee(Zt(v)):e.weekPicker?W(Zt(v)):T(Zt(v)),j=v=>{const J=I(v);_h(Zt(J))?(r.value=Zt(J),fe()):(r.value=null,c.value="")},K=()=>{const v=J=>Fr(J,s.value.format);return`${v(r.value[0])} ${s.value.rangeSeparator} ${r.value[1]?v(r.value[1]):""}`},z=()=>n.value&&r.value?Array.isArray(r.value)?K():Fr(r.value,s.value.format):P(r.value),ne=()=>r.value?a.value.enabled?r.value.map(v=>P(v)).join("; "):s.value.enabled&&typeof s.value.format=="string"?z():P(r.value):"",fe=()=>{!e.format||typeof e.format=="string"||s.value.enabled&&typeof s.value.format=="string"?c.value=ne():c.value=e.format(r.value)},oe=v=>{if(e.utc){const J=new Date(v);return e.utc==="preserve"?new Date(J.getTime()+J.getTimezoneOffset()*6e4):J}return e.modelType?Ex.includes(e.modelType)?p(new Date(v)):e.modelType==="format"&&(typeof e.format=="string"||!e.format)?p(gh(v,u(),new Date,{locale:f.value})):p(gh(v,e.modelType,new Date,{locale:f.value})):p(new Date(v))},be=v=>v?e.utc?Ox(v,e.utc==="preserve",e.enableSeconds):e.modelType?e.modelType==="timestamp"?+_(v):e.modelType==="iso"?_(v).toISOString():e.modelType==="format"&&(typeof e.format=="string"||!e.format)?P(_(v)):P(_(v),e.modelType,!0):_(v):"",te=(v,J=!1,Ae=!1)=>{if(Ae)return v;if(t("update:model-value",v),o.value.emitTimezone&&J){const Ge=Array.isArray(v)?v.map(se=>Hn(Zt(se),o.value.emitTimezone)):Hn(Zt(v),o.value.emitTimezone);t("update:model-timezone-value",Ge)}},Ee=v=>Array.isArray(r.value)?a.value.enabled?r.value.map(J=>v(J)):[v(r.value[0]),r.value[1]?v(r.value[1]):Gi(i.value.partialRange)]:v(Zt(r.value)),L=()=>{if(Array.isArray(r.value)){const v=Yr(r.value[0],e.weekStart),J=r.value[1]?Yr(r.value[1],e.weekStart):[];return[v.map(Ae=>ve(Ae)),J.map(Ae=>ve(Ae))]}return Yr(r.value,e.weekStart).map(v=>ve(v))},Z=(v,J)=>te(Zt(Ee(v)),!1,J),ae=v=>{const J=L();return v?J:t("update:model-value",L())},me=(v=!1)=>(v||fe(),e.monthPicker?Z(S,v):e.timePicker?Z(D,v):e.yearPicker?Z(qe,v):e.weekPicker?ae(v):te(k(v),!0,v));return{inputValue:c,internalModelValue:r,checkBeforeEmit:()=>r.value?i.value.enabled?i.value.partialRange?r.value.length>=1:r.value.length===2:!!r.value:!1,parseExternalModelValue:j,formatInputValue:fe,emitModelValue:me}},iO=(t,e)=>{const{defaultedFilters:n,propDates:r}=kt(t),{validateMonthYearInRange:s}=oi(t),i=(d,f)=>{let p=d;return n.value.months.includes(et(p))?(p=f?pr(d,1):Co(d,1),i(p,f)):p},o=(d,f)=>{let p=d;return n.value.years.includes(qe(p))?(p=f?Yf(d,1):_b(d,1),o(p,f)):p},a=(d,f=!1)=>{const p=mt(ve(),{month:t.month,year:t.year});let _=d?pr(p,1):Co(p,1);t.disableYearSelect&&(_=Cr(_,t.year));let P=et(_),D=qe(_);n.value.months.includes(P)&&(_=i(_,d),P=et(_),D=qe(_)),n.value.years.includes(D)&&(_=o(_,d),D=qe(_)),s(P,D,d,t.preventMinMaxNavigation)&&u(P,D,f)},u=(d,f,p)=>{e("update-month-year",{month:d,year:f,fromNav:p})},c=ye(()=>d=>Db(mt(ve(),{month:t.month,year:t.year}),r.value.maxDate,r.value.minDate,t.preventMinMaxNavigation,d));return{handleMonthYearChange:a,isDisabled:c,updateMonthYear:u}},Rc={multiCalendars:{type:[Boolean,Number,String,Object],default:void 0},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},autoPosition:{type:[Boolean,String],default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:[String,Object],default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},disableYearSelect:{type:Boolean,default:!1},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:null},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetDates:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},reverseYears:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},highlight:{type:[Function,Object],default:null},teleport:{type:[Boolean,String,Object],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function,Object],default:null},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:[Object,Boolean],default:!1},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},alwaysClearable:{type:Boolean,default:!1},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:[Boolean,Object],default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:[Boolean,Object],default:!1},textInput:{type:[Boolean,Object],default:!1},sixWeeks:{type:[Boolean,String],default:!1},actionRow:{type:Object,default:()=>({})},focusStartDate:{type:Boolean,default:!1},disabledTimes:{type:[Function,Array],default:void 0},timePickerInline:{type:Boolean,default:!1},calendar:{type:Function,default:null},config:{type:Object,default:void 0},quarterPicker:{type:Boolean,default:!1},yearFirst:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},onInternalModelChange:{type:[Function,Object],default:null},enableMinutes:{type:Boolean,default:!0},ui:{type:Object,default:()=>({})}},wr={...Rc,shadow:{type:Boolean,default:!1},flowStep:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null},noOverlayFocus:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},menuWrapRef:{type:Object,default:null},getInputRect:{type:Function,default:()=>({})},isTextInputDate:{type:Boolean,default:!1},isMobile:{type:Boolean,default:void 0}},oO=["title"],aO=["disabled"],lO=fn({compatConfig:{MODE:3},__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},...wr},emits:["close-picker","select-date","select-now","invalid-select"],setup(t,{emit:e}){const n=e,r=t,{defaultedActionRow:s,defaultedPreviewFormat:i,defaultedMultiCalendars:o,defaultedTextInput:a,defaultedInline:u,defaultedRange:c,defaultedMultiDates:d}=kt(r),{isTimeValid:f,isMonthValid:p}=oi(r),{buildMatrix:_}=ii(),P=_e(null),D=_e(null),S=_e(!1),O=_e({}),$=_e(null),F=_e(null);Jt(()=>{r.arrowNavigation&&_([Yt(P),Yt(D)],"actionRow"),U(),window.addEventListener("resize",U)}),Zs(()=>{window.removeEventListener("resize",U)});const U=()=>{S.value=!1,setTimeout(()=>{var j,K;const z=(j=$.value)==null?void 0:j.getBoundingClientRect(),ne=(K=F.value)==null?void 0:K.getBoundingClientRect();z&&ne&&(O.value.maxWidth=`${ne.width-z.width-20}px`),S.value=!0},0)},ee=ye(()=>c.value.enabled&&!c.value.partialRange&&r.internalModelValue?r.internalModelValue.length===2:!0),W=ye(()=>!f.value(r.internalModelValue)||!p.value(r.internalModelValue)||!ee.value),T=()=>{const j=i.value;return r.timePicker||r.monthPicker,j(Zt(r.internalModelValue))},b=()=>{const j=r.internalModelValue;return o.value.count>0?`${g(j[0])} - ${g(j[1])}`:[g(j[0]),g(j[1])]},g=j=>Mb(j,i.value,r.formatLocale,a.value.rangeSeparator,r.modelAuto,i.value),w=ye(()=>!r.internalModelValue||!r.menuMount?"":typeof i.value=="string"?Array.isArray(r.internalModelValue)?r.internalModelValue.length===2&&r.internalModelValue[1]?b():d.value.enabled?r.internalModelValue.map(j=>`${g(j)}`):r.modelAuto?`${g(r.internalModelValue[0])}`:`${g(r.internalModelValue[0])} -`:g(r.internalModelValue):T()),R=()=>d.value.enabled?"; ":" - ",k=ye(()=>Array.isArray(w.value)?w.value.join(R()):w.value),I=()=>{f.value(r.internalModelValue)&&p.value(r.internalModelValue)&&ee.value?n("select-date"):n("invalid-select")};return(j,K)=>(B(),X("div",{ref_key:"actionRowRef",ref:F,class:"dp__action_row"},[j.$slots["action-row"]?Me(j.$slots,"action-row",tn(Qt({key:0},{internalModelValue:j.internalModelValue,disabled:W.value,selectDate:()=>j.$emit("select-date"),closePicker:()=>j.$emit("close-picker")}))):(B(),X(Oe,{key:1},[N(s).showPreview?(B(),X("div",{key:0,class:"dp__selection_preview",title:k.value,style:Pn(O.value)},[j.$slots["action-preview"]&&S.value?Me(j.$slots,"action-preview",{key:0,value:j.internalModelValue}):ce("",!0),!j.$slots["action-preview"]&&S.value?(B(),X(Oe,{key:1},[Un($e(k.value),1)],64)):ce("",!0)],12,oO)):ce("",!0),M("div",{ref_key:"actionBtnContainer",ref:$,class:"dp__action_buttons","data-dp-element":"action-row"},[j.$slots["action-buttons"]?Me(j.$slots,"action-buttons",{key:0,value:j.internalModelValue}):ce("",!0),j.$slots["action-buttons"]?ce("",!0):(B(),X(Oe,{key:1},[!N(u).enabled&&N(s).showCancel?(B(),X("button",{key:0,ref_key:"cancelButtonRef",ref:P,type:"button",class:"dp__action_button dp__action_cancel",onClick:K[0]||(K[0]=z=>j.$emit("close-picker")),onKeydown:K[1]||(K[1]=z=>N(Vn)(z,()=>j.$emit("close-picker")))},$e(j.cancelText),545)):ce("",!0),N(s).showNow?(B(),X("button",{key:1,type:"button",class:"dp__action_button dp__action_cancel",onClick:K[2]||(K[2]=z=>j.$emit("select-now")),onKeydown:K[3]||(K[3]=z=>N(Vn)(z,()=>j.$emit("select-now")))},$e(j.nowButtonLabel),33)):ce("",!0),N(s).showSelect?(B(),X("button",{key:2,ref_key:"selectButtonRef",ref:D,type:"button",class:"dp__action_button dp__action_select",disabled:W.value,"data-test-id":"select-button",onKeydown:K[4]||(K[4]=z=>N(Vn)(z,()=>I())),onClick:I},$e(j.selectText),41,aO)):ce("",!0)],64))],512)],64))],512))}}),uO=["role","aria-label","tabindex"],cO={class:"dp__selection_grid_header"},dO=["aria-selected","aria-disabled","data-test-id","onClick","onKeydown","onMouseover"],hO=["aria-label"],hl=fn({__name:"SelectionOverlay",props:{items:{},type:{},isLast:{type:Boolean},arrowNavigation:{type:Boolean},skipButtonRef:{type:Boolean},headerRefs:{},hideNavigation:{},escClose:{type:Boolean},useRelative:{type:Boolean},height:{},textInput:{type:[Boolean,Object]},config:{},noOverlayFocus:{type:Boolean},focusValue:{},menuWrapRef:{},ariaLabels:{},overlayLabel:{}},emits:["selected","toggle","reset-flow","hover-value"],setup(t,{expose:e,emit:n}){const{setSelectionGrid:r,buildMultiLevelMatrix:s,setMonthPicker:i}=ii(),o=n,a=t,{defaultedAriaLabels:u,defaultedTextInput:c,defaultedConfig:d,handleEventPropagation:f}=kt(a),{hideNavigationButtons:p}=Dc(),_=_e(!1),P=_e(null),D=_e(null),S=_e([]),O=_e(),$=_e(null),F=_e(0),U=_e(null);Py(()=>{P.value=null}),Jt(()=>{Fn().then(()=>k()),a.noOverlayFocus||W(),ee(!0)}),Zs(()=>ee(!1));const ee=L=>{var Z;a.arrowNavigation&&((Z=a.headerRefs)!=null&&Z.length?i(L):r(L))},W=()=>{var L;const Z=Yt(D);Z&&(c.value.enabled||(P.value?(L=P.value)==null||L.focus({preventScroll:!0}):Z.focus({preventScroll:!0})),_.value=Z.clientHeight<Z.scrollHeight)},T=ye(()=>({dp__overlay:!0,"dp--overlay-absolute":!a.useRelative,"dp--overlay-relative":a.useRelative})),b=ye(()=>a.useRelative?{height:`${a.height}px`,width:"var(--dp-menu-min-width)"}:void 0),g=ye(()=>({dp__overlay_col:!0})),w=ye(()=>({dp__btn:!0,dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:_.value,dp__button_bottom:a.isLast})),R=ye(()=>{var L,Z;return{dp__overlay_container:!0,dp__container_flex:((L=a.items)==null?void 0:L.length)<=6,dp__container_block:((Z=a.items)==null?void 0:Z.length)>6}});Ln(()=>a.items,()=>k(!1),{deep:!0});const k=(L=!0)=>{Fn().then(()=>{const Z=Yt(P),ae=Yt(D),me=Yt($),v=Yt(U),J=me?me.getBoundingClientRect().height:0;ae&&(ae.getBoundingClientRect().height?F.value=ae.getBoundingClientRect().height-J:F.value=d.value.modeHeight-J),Z&&v&&L&&(v.scrollTop=Z.offsetTop-v.offsetTop-(F.value/2-Z.getBoundingClientRect().height)-J)})},I=L=>{L.disabled||o("selected",L.value)},j=()=>{o("toggle"),o("reset-flow")},K=L=>{a.escClose&&(j(),f(L))},z=(L,Z,ae,me)=>{L&&((Z.active||Z.value===a.focusValue)&&(P.value=L),a.arrowNavigation&&(Array.isArray(S.value[ae])?S.value[ae][me]=L:S.value[ae]=[L],ne()))},ne=()=>{var L,Z;const ae=(L=a.headerRefs)!=null&&L.length?[a.headerRefs].concat(S.value):S.value.concat([a.skipButtonRef?[]:[$.value]]);s(Zt(ae),(Z=a.headerRefs)!=null&&Z.length?"monthPicker":"selectionGrid")},fe=L=>{a.arrowNavigation||Vs(L,d.value,!0)},oe=L=>{O.value=L,o("hover-value",L)},be=()=>{if(j(),!a.isLast){const L=yh(a.menuWrapRef??null,"action-row");if(L){const Z=Eb(L);Z?.focus()}}},te=L=>{switch(L.key){case At.esc:return K(L);case At.arrowLeft:return fe(L);case At.arrowRight:return fe(L);case At.arrowUp:return fe(L);case At.arrowDown:return fe(L);default:return}},Ee=L=>{if(L.key===At.enter)return j();if(L.key===At.tab)return be()};return e({focusGrid:W}),(L,Z)=>{var ae;return B(),X("div",{ref_key:"gridWrapRef",ref:D,class:Ye(T.value),style:Pn(b.value),role:L.useRelative?void 0:"dialog","aria-label":L.overlayLabel,tabindex:L.useRelative?void 0:"0",onKeydown:te,onClick:Z[0]||(Z[0]=Bt(()=>{},["prevent"]))},[M("div",{ref_key:"containerRef",ref:U,class:Ye(R.value),style:Pn({"--dp-overlay-height":`${F.value}px`}),role:"grid"},[M("div",cO,[Me(L.$slots,"header")]),L.$slots.overlay?Me(L.$slots,"overlay",{key:0}):(B(!0),X(Oe,{key:1},lt(L.items,(me,v)=>(B(),X("div",{key:v,class:Ye(["dp__overlay_row",{dp__flex_row:L.items.length>=3}]),role:"row"},[(B(!0),X(Oe,null,lt(me,(J,Ae)=>(B(),X("div",{key:J.value,ref_for:!0,ref:Ge=>z(Ge,J,v,Ae),role:"gridcell",class:Ye(g.value),"aria-selected":J.active||void 0,"aria-disabled":J.disabled||void 0,tabindex:"0","data-test-id":J.text,onClick:Bt(Ge=>I(J),["prevent"]),onKeydown:Ge=>N(Vn)(Ge,()=>I(J),!0),onMouseover:Ge=>oe(J.value)},[M("div",{class:Ye(J.className)},[L.$slots.item?Me(L.$slots,"item",{key:0,item:J}):ce("",!0),L.$slots.item?ce("",!0):(B(),X(Oe,{key:1},[Un($e(J.text),1)],64))],2)],42,dO))),128))],2))),128))],6),L.$slots["button-icon"]?Mt((B(),X("button",{key:0,ref_key:"toggleButton",ref:$,type:"button","aria-label":(ae=N(u))==null?void 0:ae.toggleOverlay,class:Ye(w.value),tabindex:"0",onClick:j,onKeydown:Ee},[Me(L.$slots,"button-icon")],42,hO)),[[Xl,!N(p)(L.hideNavigation,L.type)]]):ce("",!0)],46,uO)}}}),fO=["data-dp-mobile"],Cc=fn({__name:"InstanceWrap",props:{multiCalendars:{},stretch:{type:Boolean},collapse:{type:Boolean},isMobile:{type:Boolean}},setup(t){const e=t,n=ye(()=>e.multiCalendars>0?[...Array(e.multiCalendars).keys()]:[0]),r=ye(()=>({dp__instance_calendar:e.multiCalendars>0}));return(s,i)=>(B(),X("div",{class:Ye({dp__menu_inner:!s.stretch,"dp--menu--inner-stretched":s.stretch,dp__flex_display:s.multiCalendars>0,"dp--flex-display-collapsed":s.collapse}),"data-dp-mobile":s.isMobile},[(B(!0),X(Oe,null,lt(n.value,(o,a)=>(B(),X("div",{key:o,class:Ye(r.value)},[Me(s.$slots,"default",{instance:o,index:a})],2))),128))],10,fO))}}),pO=["data-dp-element","aria-label","aria-disabled"],ka=fn({compatConfig:{MODE:3},__name:"ArrowBtn",props:{ariaLabel:{},elName:{},disabled:{type:Boolean}},emits:["activate","set-ref"],setup(t,{emit:e}){const n=e,r=_e(null);return Jt(()=>n("set-ref",r)),(s,i)=>(B(),X("button",{ref_key:"elRef",ref:r,type:"button","data-dp-element":s.elName,class:"dp__btn dp--arrow-btn-nav",tabindex:"0","aria-label":s.ariaLabel,"aria-disabled":s.disabled||void 0,onClick:i[0]||(i[0]=o=>s.$emit("activate")),onKeydown:i[1]||(i[1]=o=>N(Vn)(o,()=>s.$emit("activate"),!0))},[M("span",{class:Ye(["dp__inner_nav",{dp__inner_nav_disabled:s.disabled}])},[Me(s.$slots,"default")],2)],40,pO))}}),mO=["aria-label","data-test-id"],Nb=fn({__name:"YearModePicker",props:{...wr,showYearPicker:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},instance:{type:Number,default:0},year:{type:Number,default:0},isDisabled:{type:Function,default:()=>!1}},emits:["toggle-year-picker","year-select","handle-year"],setup(t,{emit:e}){const n=e,r=t,{showRightIcon:s,showLeftIcon:i}=Dc(),{defaultedConfig:o,defaultedMultiCalendars:a,defaultedAriaLabels:u,defaultedTransitions:c,defaultedUI:d}=kt(r),{showTransition:f,transitionName:p}=fl(c),_=_e(!1),P=(O=!1,$)=>{_.value=!_.value,n("toggle-year-picker",{flow:O,show:$})},D=O=>{_.value=!1,n("year-select",O)},S=(O=!1)=>{n("handle-year",O)};return(O,$)=>{var F,U,ee,W,T;return B(),X(Oe,null,[M("div",{class:Ye(["dp--year-mode-picker",{"dp--hidden-el":_.value}])},[N(i)(N(a),t.instance)?(B(),Xe(ka,{key:0,ref:"mpPrevIconRef","aria-label":(F=N(u))==null?void 0:F.prevYear,disabled:t.isDisabled(!1),class:Ye((U=N(d))==null?void 0:U.navBtnPrev),onActivate:$[0]||($[0]=b=>S(!1))},{default:Qe(()=>[O.$slots["arrow-left"]?Me(O.$slots,"arrow-left",{key:0}):ce("",!0),O.$slots["arrow-left"]?ce("",!0):(B(),Xe(N(Zf),{key:1}))]),_:3},8,["aria-label","disabled","class"])):ce("",!0),M("button",{ref:"mpYearButtonRef",class:"dp__btn dp--year-select",type:"button","aria-label":`${t.year}-${(ee=N(u))==null?void 0:ee.openYearsOverlay}`,"data-test-id":`year-mode-btn-${t.instance}`,onClick:$[1]||($[1]=()=>P(!1)),onKeydown:$[2]||($[2]=$1(()=>P(!1),["enter"]))},[O.$slots.year?Me(O.$slots,"year",{key:0,year:t.year}):ce("",!0),O.$slots.year?ce("",!0):(B(),X(Oe,{key:1},[Un($e(t.year),1)],64))],40,mO),N(s)(N(a),t.instance)?(B(),Xe(ka,{key:1,ref:"mpNextIconRef","aria-label":(W=N(u))==null?void 0:W.nextYear,disabled:t.isDisabled(!0),class:Ye((T=N(d))==null?void 0:T.navBtnNext),onActivate:$[3]||($[3]=b=>S(!0))},{default:Qe(()=>[O.$slots["arrow-right"]?Me(O.$slots,"arrow-right",{key:0}):ce("",!0),O.$slots["arrow-right"]?ce("",!0):(B(),Xe(N(ep),{key:1}))]),_:3},8,["aria-label","disabled","class"])):ce("",!0)],2),it(xo,{name:N(p)(t.showYearPicker),css:N(f)},{default:Qe(()=>{var b,g;return[t.showYearPicker?(B(),Xe(hl,{key:0,items:t.items,"text-input":O.textInput,"esc-close":O.escClose,config:O.config,"is-last":O.autoApply&&!N(o).keepActionRow,"hide-navigation":O.hideNavigation,"aria-labels":O.ariaLabels,"overlay-label":(g=(b=N(u))==null?void 0:b.yearPicker)==null?void 0:g.call(b,!0),type:"year",onToggle:P,onSelected:$[4]||($[4]=w=>D(w))},kn({"button-icon":Qe(()=>[O.$slots["calendar-icon"]?Me(O.$slots,"calendar-icon",{key:0}):ce("",!0),O.$slots["calendar-icon"]?ce("",!0):(B(),Xe(N(Bo),{key:1}))]),_:2},[O.$slots["year-overlay-value"]?{name:"item",fn:Qe(({item:w})=>[Me(O.$slots,"year-overlay-value",{text:w.text,value:w.value})]),key:"0"}:void 0]),1032,["items","text-input","esc-close","config","is-last","hide-navigation","aria-labels","overlay-label"])):ce("",!0)]}),_:3},8,["name","css"])],64)}}}),up=(t,e,n)=>{if(e.value&&Array.isArray(e.value))if(e.value.some(r=>tt(t,r))){const r=e.value.filter(s=>!tt(s,t));e.value=r.length?r:null}else(n&&+n>e.value.length||!n)&&e.value.push(t);else e.value=[t]},cp=(t,e,n)=>{let r=t.value?t.value.slice():[];return r.length===2&&r[1]!==null&&(r=[]),r.length?(Dt(e,r[0])?r.unshift(e):r[1]=e,n("range-end",e)):(r=[e],n("range-start",e)),r},Sc=(t,e,n,r)=>{t&&(t[0]&&t[1]&&n&&e("auto-apply"),t[0]&&!t[1]&&r&&n&&e("auto-apply"))},Vb=t=>{Array.isArray(t.value)&&t.value.length<=2&&t.range?t.modelValue.value=t.value.map(e=>Hn(ve(e),t.timezone)):Array.isArray(t.value)||(t.modelValue.value=Hn(ve(t.value),t.timezone))},Lb=(t,e,n,r)=>Array.isArray(e.value)&&(e.value.length===2||e.value.length===1&&r.value.partialRange)?r.value.fixedStart&&(Ut(t,e.value[0])||tt(t,e.value[0]))?[e.value[0],t]:r.value.fixedEnd&&(Dt(t,e.value[1])||tt(t,e.value[1]))?[t,e.value[1]]:(n("invalid-fixed-range",t),e.value):[],Fb=({multiCalendars:t,range:e,highlight:n,propDates:r,calendars:s,modelValue:i,props:o,filters:a,year:u,month:c,emit:d})=>{const f=ye(()=>ip(o.yearRange,o.locale,o.reverseYears)),p=_e([!1]),_=ye(()=>(w,R)=>{const k=mt(cr(new Date),{month:c.value(w),year:u.value(w)}),I=R?ib(k):Ya(k);return Db(I,r.value.maxDate,r.value.minDate,o.preventMinMaxNavigation,R)}),P=()=>Array.isArray(i.value)&&t.value.solo&&i.value[1],D=()=>{for(let w=0;w<t.value.count;w++)if(w===0)s.value[w]=s.value[0];else if(w===t.value.count-1&&P())s.value[w]={month:et(i.value[1]),year:qe(i.value[1])};else{const R=mt(ve(),s.value[w-1]);s.value[w]={month:et(R),year:qe(Yf(R,1))}}},S=w=>{if(!w)return D();const R=mt(ve(),s.value[w]);return s.value[0].year=qe(_b(R,t.value.count-1)),D()},O=(w,R)=>{const k=A2(R,w);return e.value.showLastInRange&&k>1?R:w},$=w=>o.focusStartDate||t.value.solo?w[0]:w[1]?O(w[0],w[1]):w[0],F=()=>{if(i.value){const w=Array.isArray(i.value)?$(i.value):i.value;s.value[0]={month:et(w),year:qe(w)}}},U=()=>{F(),t.value.count&&D()};Ln(i,(w,R)=>{o.isTextInputDate&&JSON.stringify(w??{})!==JSON.stringify(R??{})&&U()}),Jt(()=>{U()});const ee=(w,R)=>{s.value[R].year=w,d("update-month-year",{instance:R,year:w,month:s.value[R].month}),t.value.count&&!t.value.solo&&S(R)},W=ye(()=>w=>So(f.value,R=>{var k;const I=u.value(w)===R.value,j=Ka(R.value,Do(r.value.minDate),Do(r.value.maxDate))||((k=a.value.years)==null?void 0:k.includes(u.value(w))),K=lp(n.value,R.value);return{active:I,disabled:j,highlighted:K}})),T=(w,R)=>{ee(w,R),g(R)},b=(w,R=!1)=>{if(!_.value(w,R)){const k=R?u.value(w)+1:u.value(w)-1;ee(k,w)}},g=(w,R=!1,k)=>{R||d("reset-flow"),k!==void 0?p.value[w]=k:p.value[w]=!p.value[w],p.value[w]?d("overlay-toggle",{open:!0,overlay:Tn.year}):(d("overlay-closed"),d("overlay-toggle",{open:!1,overlay:Tn.year}))};return{isDisabled:_,groupedYears:W,showYearPicker:p,selectYear:ee,toggleYearPicker:g,handleYearSelect:T,handleYear:b}},gO=(t,e)=>{const{defaultedMultiCalendars:n,defaultedAriaLabels:r,defaultedTransitions:s,defaultedConfig:i,defaultedRange:o,defaultedHighlight:a,propDates:u,defaultedTz:c,defaultedFilters:d,defaultedMultiDates:f}=kt(t),p=()=>{t.isTextInputDate&&U(qe(ve(t.startDate)),0)},{modelValue:_,year:P,month:D,calendars:S}=pl(t,e,p),O=ye(()=>bb(t.formatLocale,t.locale,t.monthNameFormat)),$=_e(null),{checkMinMaxRange:F}=oi(t),{selectYear:U,groupedYears:ee,showYearPicker:W,toggleYearPicker:T,handleYearSelect:b,handleYear:g,isDisabled:w}=Fb({modelValue:_,multiCalendars:n,range:o,highlight:a,calendars:S,year:P,propDates:u,month:D,filters:d,props:t,emit:e});Jt(()=>{t.startDate&&(_.value&&t.focusStartDate||!_.value)&&U(qe(ve(t.startDate)),0)});const R=Z=>Z?{month:et(Z),year:qe(Z)}:{month:null,year:null},k=()=>_.value?Array.isArray(_.value)?_.value.map(Z=>R(Z)):R(_.value):R(),I=(Z,ae)=>{const me=S.value[Z],v=k();return Array.isArray(v)?v.some(J=>J.year===me?.year&&J.month===ae):me?.year===v.year&&ae===v.month},j=(Z,ae,me)=>{var v,J;const Ae=k();return Array.isArray(Ae)?P.value(ae)===((v=Ae[me])==null?void 0:v.year)&&Z===((J=Ae[me])==null?void 0:J.month):!1},K=(Z,ae)=>{if(o.value.enabled){const me=k();if(Array.isArray(_.value)&&Array.isArray(me)){const v=j(Z,ae,0)||j(Z,ae,1),J=es(cr(ve()),Z,P.value(ae));return Ga(_.value,$.value,J)&&!v}return!1}return!1},z=ye(()=>Z=>So(O.value,ae=>{var me;const v=I(Z,ae.value),J=Ka(ae.value,kb(P.value(Z),u.value.minDate),Rb(P.value(Z),u.value.maxDate))||Ux(u.value.disabledDates,P.value(Z),ae.value)||((me=d.value.months)==null?void 0:me.includes(ae.value))||!$x(u.value.allowedDates,P.value(Z),ae.value),Ae=K(ae.value,Z),Ge=xb(a.value,ae.value,P.value(Z));return{active:v,disabled:J,isBetween:Ae,highlighted:Ge}})),ne=(Z,ae)=>es(cr(ve()),Z,P.value(ae)),fe=(Z,ae)=>{const me=_.value?_.value:cr(new Date);_.value=es(me,Z,P.value(ae)),e("auto-apply"),e("update-flow-step")},oe=(Z,ae)=>{const me=ne(Z,ae);o.value.fixedEnd||o.value.fixedStart?_.value=Lb(me,_,e,o):_.value?F(me,_.value)&&(_.value=cp(_,ne(Z,ae),e)):_.value=[ne(Z,ae)],Fn().then(()=>{Sc(_.value,e,t.autoApply,t.modelAuto)})},be=(Z,ae)=>{up(ne(Z,ae),_,f.value.limit),e("auto-apply",!0)},te=(Z,ae)=>(S.value[ae].month=Z,L(ae,S.value[ae].year,Z),f.value.enabled?be(Z,ae):o.value.enabled?oe(Z,ae):fe(Z,ae)),Ee=(Z,ae)=>{U(Z,ae),L(ae,Z,null)},L=(Z,ae,me)=>{let v=me;if(!v&&v!==0){const J=k();v=Array.isArray(J)?J[Z].month:J.month}e("update-month-year",{instance:Z,year:ae,month:v})};return{groupedMonths:z,groupedYears:ee,year:P,isDisabled:w,defaultedMultiCalendars:n,defaultedAriaLabels:r,defaultedTransitions:s,defaultedConfig:i,showYearPicker:W,modelValue:_,presetDate:(Z,ae)=>{Vb({value:Z,modelValue:_,range:o.value.enabled,timezone:ae?void 0:c.value.timezone}),e("auto-apply")},setHoverDate:(Z,ae)=>{$.value=ne(Z,ae)},selectMonth:te,selectYear:Ee,toggleYearPicker:T,handleYearSelect:b,handleYear:g,getModelMonthYear:k}},vO=fn({compatConfig:{MODE:3},__name:"MonthPicker",props:{...wr},emits:["update:internal-model-value","overlay-closed","reset-flow","range-start","range-end","auto-apply","update-month-year","update-flow-step","mount","invalid-fixed-range","overlay-toggle"],setup(t,{expose:e,emit:n}){const r=n,s=Vi(),i=Qn(s,"yearMode"),o=t;Jt(()=>{o.shadow||r("mount",null)});const{groupedMonths:a,groupedYears:u,year:c,isDisabled:d,defaultedMultiCalendars:f,defaultedConfig:p,showYearPicker:_,modelValue:P,presetDate:D,setHoverDate:S,selectMonth:O,selectYear:$,toggleYearPicker:F,handleYearSelect:U,handleYear:ee,getModelMonthYear:W}=gO(o,r);return e({getSidebarProps:()=>({modelValue:P,year:c,getModelMonthYear:W,selectMonth:O,selectYear:$,handleYear:ee}),presetDate:D,toggleYearPicker:T=>F(0,T)}),(T,b)=>(B(),Xe(Cc,{"multi-calendars":N(f).count,collapse:T.collapse,stretch:"","is-mobile":T.isMobile},{default:Qe(({instance:g})=>[T.$slots["top-extra"]?Me(T.$slots,"top-extra",{key:0,value:T.internalModelValue}):ce("",!0),T.$slots["month-year"]?Me(T.$slots,"month-year",tn(Qt({key:1},{year:N(c),months:N(a)(g),years:N(u)(g),selectMonth:N(O),selectYear:N($),instance:g}))):(B(),Xe(hl,{key:2,items:N(a)(g),"arrow-navigation":T.arrowNavigation,"is-last":T.autoApply&&!N(p).keepActionRow,"esc-close":T.escClose,height:N(p).modeHeight,config:T.config,"no-overlay-focus":!!(T.noOverlayFocus||T.textInput),"use-relative":"",type:"month",onSelected:w=>N(O)(w,g),onHoverValue:w=>N(S)(w,g)},kn({header:Qe(()=>[it(Nb,Qt(T.$props,{items:N(u)(g),instance:g,"show-year-picker":N(_)[g],year:N(c)(g),"is-disabled":w=>N(d)(g,w),onHandleYear:w=>N(ee)(g,w),onYearSelect:w=>N(U)(w,g),onToggleYearPicker:w=>N(F)(g,w?.flow,w?.show)}),kn({_:2},[lt(N(i),(w,R)=>({name:w,fn:Qe(k=>[Me(T.$slots,w,tn(Nn(k)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),_:2},[T.$slots["month-overlay-value"]?{name:"item",fn:Qe(({item:w})=>[Me(T.$slots,"month-overlay-value",{text:w.text,value:w.value})]),key:"0"}:void 0]),1032,["items","arrow-navigation","is-last","esc-close","height","config","no-overlay-focus","onSelected","onHoverValue"]))]),_:3},8,["multi-calendars","collapse","is-mobile"]))}}),yO=(t,e)=>{const n=()=>{t.isTextInputDate&&(d.value=qe(ve(t.startDate)))},{modelValue:r}=pl(t,e,n),s=_e(null),{defaultedHighlight:i,defaultedMultiDates:o,defaultedFilters:a,defaultedRange:u,propDates:c}=kt(t),d=_e();Jt(()=>{t.startDate&&(r.value&&t.focusStartDate||!r.value)&&(d.value=qe(ve(t.startDate)))});const f=O=>Array.isArray(r.value)?r.value.some($=>qe($)===O):r.value?qe(r.value)===O:!1,p=O=>u.value.enabled&&Array.isArray(r.value)?Ga(r.value,s.value,S(O)):!1,_=O=>c.value.allowedDates instanceof Map?c.value.allowedDates.size?c.value.allowedDates.has(`${O}`):!1:!0,P=O=>c.value.disabledDates instanceof Map?c.value.disabledDates.size?c.value.disabledDates.has(`${O}`):!1:!0,D=ye(()=>So(ip(t.yearRange,t.locale,t.reverseYears),O=>{const $=f(O.value),F=Ka(O.value,Do(c.value.minDate),Do(c.value.maxDate))||a.value.years.includes(O.value)||!_(O.value)||P(O.value),U=p(O.value)&&!$,ee=lp(i.value,O.value);return{active:$,disabled:F,isBetween:U,highlighted:ee}})),S=O=>Cr(cr(Ya(new Date)),O);return{groupedYears:D,modelValue:r,focusYear:d,setHoverValue:O=>{s.value=Cr(cr(new Date),O)},selectYear:O=>{var $;if(e("update-month-year",{instance:0,year:O}),o.value.enabled)return r.value?Array.isArray(r.value)&&((($=r.value)==null?void 0:$.map(F=>qe(F))).includes(O)?r.value=r.value.filter(F=>qe(F)!==O):r.value.push(Cr(sn(ve()),O))):r.value=[Cr(sn(Ya(ve())),O)],e("auto-apply",!0);u.value.enabled?(r.value=cp(r,S(O),e),Fn().then(()=>{Sc(r.value,e,t.autoApply,t.modelAuto)})):(r.value=S(O),e("auto-apply"))}}},_O=fn({compatConfig:{MODE:3},__name:"YearPicker",props:{...wr},emits:["update:internal-model-value","reset-flow","range-start","range-end","auto-apply","update-month-year"],setup(t,{expose:e,emit:n}){const r=n,s=t,{groupedYears:i,modelValue:o,focusYear:a,selectYear:u,setHoverValue:c}=yO(s,r),{defaultedConfig:d}=kt(s);return e({getSidebarProps:()=>({modelValue:o,selectYear:u})}),(f,p)=>(B(),X("div",null,[f.$slots["top-extra"]?Me(f.$slots,"top-extra",{key:0,value:f.internalModelValue}):ce("",!0),f.$slots["month-year"]?Me(f.$slots,"month-year",tn(Qt({key:1},{years:N(i),selectYear:N(u)}))):(B(),Xe(hl,{key:2,items:N(i),"is-last":f.autoApply&&!N(d).keepActionRow,height:N(d).modeHeight,config:f.config,"no-overlay-focus":!!(f.noOverlayFocus||f.textInput),"focus-value":N(a),type:"year","use-relative":"",onSelected:N(u),onHoverValue:N(c)},kn({_:2},[f.$slots["year-overlay-value"]?{name:"item",fn:Qe(({item:_})=>[Me(f.$slots,"year-overlay-value",{text:_.text,value:_.value})]),key:"0"}:void 0]),1032,["items","is-last","height","config","no-overlay-focus","focus-value","onSelected","onHoverValue"]))]))}}),wO={key:0,class:"dp__time_input"},bO=["data-compact","data-collapsed"],TO=["data-test-id","aria-label","onKeydown","onClick","onMousedown"],EO=["aria-label","disabled","data-test-id","onKeydown","onClick"],AO=["data-test-id","aria-label","onKeydown","onClick","onMousedown"],IO={key:0},PO=["aria-label","data-compact"],kO=fn({compatConfig:{MODE:3},__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...wr},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed","overlay-opened","am-pm-change"],setup(t,{expose:e,emit:n}){const r=n,s=t,{setTimePickerElements:i,setTimePickerBackRef:o}=ii(),{defaultedAriaLabels:a,defaultedTransitions:u,defaultedFilters:c,defaultedConfig:d,defaultedRange:f,defaultedMultiCalendars:p}=kt(s),{transitionName:_,showTransition:P}=fl(u),D=Js({hours:!1,minutes:!1,seconds:!1}),S=_e("AM"),O=_e(null),$=_e([]),F=_e(),U=_e(!1);Jt(()=>{r("mounted")});const ee=y=>mt(new Date,{hours:y.hours,minutes:y.minutes,seconds:s.enableSeconds?y.seconds:0,milliseconds:0}),W=ye(()=>y=>oe(y,s[y])||b(y,s[y])),T=ye(()=>({hours:s.hours,minutes:s.minutes,seconds:s.seconds})),b=(y,q)=>f.value.enabled&&!f.value.disableTimeRangeValidation?!s.validateTime(y,q):!1,g=(y,q)=>{if(f.value.enabled&&!f.value.disableTimeRangeValidation){const H=q?+s[`${y}Increment`]:-+s[`${y}Increment`],Q=s[y]+H;return!s.validateTime(y,Q)}return!1},w=ye(()=>y=>!Z(+s[y]+ +s[`${y}Increment`],y)||g(y,!0)),R=ye(()=>y=>!Z(+s[y]-+s[`${y}Increment`],y)||g(y,!1)),k=(y,q)=>Zw(mt(ve(),y),q),I=(y,q)=>_x(mt(ve(),y),q),j=ye(()=>({dp__time_col:!0,dp__time_col_block:!s.timePickerInline,dp__time_col_reg_block:!s.enableSeconds&&s.is24&&!s.timePickerInline,dp__time_col_reg_inline:!s.enableSeconds&&s.is24&&s.timePickerInline,dp__time_col_reg_with_button:!s.enableSeconds&&!s.is24,dp__time_col_sec:s.enableSeconds&&s.is24,dp__time_col_sec_with_button:s.enableSeconds&&!s.is24})),K=ye(()=>s.timePickerInline&&f.value.enabled&&!p.value.count),z=ye(()=>{const y=[{type:"hours"}];return s.enableMinutes&&y.push({type:"",separator:!0},{type:"minutes"}),s.enableSeconds&&y.push({type:"",separator:!0},{type:"seconds"}),y}),ne=ye(()=>z.value.filter(y=>!y.separator)),fe=ye(()=>y=>{if(y==="hours"){const q=Ge(+s.hours);return{text:q<10?`0${q}`:`${q}`,value:q}}return{text:s[y]<10?`0${s[y]}`:`${s[y]}`,value:s[y]}}),oe=(y,q)=>{var H;if(!s.disabledTimesConfig)return!1;const Q=s.disabledTimesConfig(s.order,y==="hours"?q:void 0);return Q[y]?!!((H=Q[y])!=null&&H.includes(q)):!0},be=(y,q)=>q!=="hours"||S.value==="AM"?y:y+12,te=y=>{const q=s.is24?24:12,H=y==="hours"?q:60,Q=+s[`${y}GridIncrement`],de=y==="hours"&&!s.is24?Q:0,ue=[];for(let le=de;le<H;le+=Q)ue.push({value:s.is24?le:be(le,y),text:le<10?`0${le}`:`${le}`});return y==="hours"&&!s.is24&&ue.unshift({value:S.value==="PM"?12:0,text:"12"}),So(ue,le=>({active:!1,disabled:c.value.times[y].includes(le.value)||!Z(le.value,y)||oe(y,le.value)||b(y,le.value)}))},Ee=y=>y>=0?y:59,L=y=>y>=0?y:23,Z=(y,q)=>{const H=s.minTime?ee(vd(s.minTime)):null,Q=s.maxTime?ee(vd(s.maxTime)):null,de=ee(vd(T.value,q,q==="minutes"||q==="seconds"?Ee(y):L(y)));return H&&Q?(Ro(de,Q)||io(de,Q))&&(Ni(de,H)||io(de,H)):H?Ni(de,H)||io(de,H):Q?Ro(de,Q)||io(de,Q):!0},ae=y=>s[`no${y[0].toUpperCase()+y.slice(1)}Overlay`],me=y=>{ae(y)||(D[y]=!D[y],D[y]?(U.value=!0,r("overlay-opened",y)):(U.value=!1,r("overlay-closed",y)))},v=y=>y==="hours"?us:y==="minutes"?Qs:ko,J=()=>{F.value&&clearTimeout(F.value)},Ae=(y,q=!0,H)=>{const Q=q?k:I,de=q?+s[`${y}Increment`]:-+s[`${y}Increment`];Z(+s[y]+de,y)&&r(`update:${y}`,v(y)(Q({[y]:+s[y]},{[y]:+s[`${y}Increment`]}))),!(H!=null&&H.keyboard)&&d.value.timeArrowHoldThreshold&&(F.value=setTimeout(()=>{Ae(y,q)},d.value.timeArrowHoldThreshold))},Ge=y=>s.is24?y:(y>=12?S.value="PM":S.value="AM",Px(y)),se=()=>{S.value==="PM"?(S.value="AM",r("update:hours",s.hours-12)):(S.value="PM",r("update:hours",s.hours+12)),r("am-pm-change",S.value)},C=y=>{D[y]=!0},A=(y,q,H)=>{if(y&&s.arrowNavigation){Array.isArray($.value[q])?$.value[q][H]=y:$.value[q]=[y];const Q=$.value.reduce((de,ue)=>ue.map((le,ke)=>[...de[ke]||[],ue[ke]]),[]);o(s.closeTimePickerBtn),O.value&&(Q[1]=Q[1].concat(O.value)),i(Q,s.order)}},V=(y,q)=>(me(y),r(`update:${y}`,q));return e({openChildCmp:C}),(y,q)=>{var H;return y.disabled?ce("",!0):(B(),X("div",wO,[(B(!0),X(Oe,null,lt(z.value,(Q,de)=>{var ue,le,ke;return B(),X("div",{key:de,class:Ye(j.value),"data-compact":K.value&&!y.enableSeconds,"data-collapsed":K.value&&y.enableSeconds},[Q.separator?(B(),X(Oe,{key:0},[U.value?ce("",!0):(B(),X(Oe,{key:0},[Un(":")],64))],64)):(B(),X(Oe,{key:1},[M("button",{ref_for:!0,ref:x=>A(x,de,0),type:"button",class:Ye({dp__btn:!0,dp__inc_dec_button:!y.timePickerInline,dp__inc_dec_button_inline:y.timePickerInline,dp__tp_inline_btn_top:y.timePickerInline,dp__inc_dec_button_disabled:w.value(Q.type),"dp--hidden-el":U.value}),"data-test-id":`${Q.type}-time-inc-btn-${s.order}`,"aria-label":(ue=N(a))==null?void 0:ue.incrementValue(Q.type),tabindex:"0",onKeydown:x=>N(Vn)(x,()=>Ae(Q.type,!0,{keyboard:!0}),!0),onClick:x=>N(d).timeArrowHoldThreshold?void 0:Ae(Q.type,!0),onMousedown:x=>N(d).timeArrowHoldThreshold?Ae(Q.type,!0):void 0,onMouseup:J},[s.timePickerInline?(B(),X(Oe,{key:1},[y.$slots["tp-inline-arrow-up"]?Me(y.$slots,"tp-inline-arrow-up",{key:0}):(B(),X(Oe,{key:1},[q[2]||(q[2]=M("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1)),q[3]||(q[3]=M("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1))],64))],64)):(B(),X(Oe,{key:0},[y.$slots["arrow-up"]?Me(y.$slots,"arrow-up",{key:0}):ce("",!0),y.$slots["arrow-up"]?ce("",!0):(B(),Xe(N(np),{key:1}))],64))],42,TO),M("button",{ref_for:!0,ref:x=>A(x,de,1),type:"button","aria-label":`${fe.value(Q.type).text}-${(le=N(a))==null?void 0:le.openTpOverlay(Q.type)}`,class:Ye({dp__time_display:!0,dp__time_display_block:!y.timePickerInline,dp__time_display_inline:y.timePickerInline,"dp--time-invalid":W.value(Q.type),"dp--time-overlay-btn":!W.value(Q.type),"dp--hidden-el":U.value}),disabled:ae(Q.type),tabindex:"0","data-test-id":`${Q.type}-toggle-overlay-btn-${s.order}`,onKeydown:x=>N(Vn)(x,()=>me(Q.type),!0),onClick:x=>me(Q.type)},[y.$slots[Q.type]?Me(y.$slots,Q.type,{key:0,text:fe.value(Q.type).text,value:fe.value(Q.type).value}):ce("",!0),y.$slots[Q.type]?ce("",!0):(B(),X(Oe,{key:1},[Un($e(fe.value(Q.type).text),1)],64))],42,EO),M("button",{ref_for:!0,ref:x=>A(x,de,2),type:"button",class:Ye({dp__btn:!0,dp__inc_dec_button:!y.timePickerInline,dp__inc_dec_button_inline:y.timePickerInline,dp__tp_inline_btn_bottom:y.timePickerInline,dp__inc_dec_button_disabled:R.value(Q.type),"dp--hidden-el":U.value}),"data-test-id":`${Q.type}-time-dec-btn-${s.order}`,"aria-label":(ke=N(a))==null?void 0:ke.decrementValue(Q.type),tabindex:"0",onKeydown:x=>N(Vn)(x,()=>Ae(Q.type,!1,{keyboard:!0}),!0),onClick:x=>N(d).timeArrowHoldThreshold?void 0:Ae(Q.type,!1),onMousedown:x=>N(d).timeArrowHoldThreshold?Ae(Q.type,!1):void 0,onMouseup:J},[s.timePickerInline?(B(),X(Oe,{key:1},[y.$slots["tp-inline-arrow-down"]?Me(y.$slots,"tp-inline-arrow-down",{key:0}):(B(),X(Oe,{key:1},[q[4]||(q[4]=M("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1)),q[5]||(q[5]=M("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1))],64))],64)):(B(),X(Oe,{key:0},[y.$slots["arrow-down"]?Me(y.$slots,"arrow-down",{key:0}):ce("",!0),y.$slots["arrow-down"]?ce("",!0):(B(),Xe(N(rp),{key:1}))],64))],42,AO)],64))],10,bO)}),128)),y.is24?ce("",!0):(B(),X("div",IO,[y.$slots["am-pm-button"]?Me(y.$slots,"am-pm-button",{key:0,toggle:se,value:S.value}):ce("",!0),y.$slots["am-pm-button"]?ce("",!0):(B(),X("button",{key:1,ref_key:"amPmButton",ref:O,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(H=N(a))==null?void 0:H.amPmButton,tabindex:"0","data-compact":K.value,onClick:se,onKeydown:q[0]||(q[0]=Q=>N(Vn)(Q,()=>se(),!0))},$e(S.value),41,PO))])),(B(!0),X(Oe,null,lt(ne.value,(Q,de)=>(B(),Xe(xo,{key:de,name:N(_)(D[Q.type]),css:N(P)},{default:Qe(()=>{var ue,le;return[D[Q.type]?(B(),Xe(hl,{key:0,items:te(Q.type),"is-last":y.autoApply&&!N(d).keepActionRow,"esc-close":y.escClose,type:Q.type,"text-input":y.textInput,config:y.config,"arrow-navigation":y.arrowNavigation,"aria-labels":y.ariaLabels,"overlay-label":(le=(ue=N(a)).timeOverlay)==null?void 0:le.call(ue,Q.type),onSelected:ke=>V(Q.type,ke),onToggle:ke=>me(Q.type),onResetFlow:q[1]||(q[1]=ke=>y.$emit("reset-flow"))},kn({"button-icon":Qe(()=>[y.$slots["clock-icon"]?Me(y.$slots,"clock-icon",{key:0}):ce("",!0),y.$slots["clock-icon"]?ce("",!0):(B(),Xe(Ju(y.timePickerInline?N(Bo):N(tp)),{key:1}))]),_:2},[y.$slots[`${Q.type}-overlay-value`]?{name:"item",fn:Qe(({item:ke})=>[Me(y.$slots,`${Q.type}-overlay-value`,{text:ke.text,value:ke.value})]),key:"0"}:void 0,y.$slots[`${Q.type}-overlay-header`]?{name:"header",fn:Qe(()=>[Me(y.$slots,`${Q.type}-overlay-header`,{toggle:()=>me(Q.type)})]),key:"1"}:void 0]),1032,["items","is-last","esc-close","type","text-input","config","arrow-navigation","aria-labels","overlay-label","onSelected","onToggle"])):ce("",!0)]}),_:2},1032,["name","css"]))),128))]))}}}),RO=["data-dp-mobile"],CO=["aria-label","tabindex"],SO=["role","aria-label","tabindex"],DO=["aria-label"],Ub=fn({compatConfig:{MODE:3},__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...wr},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed","am-pm-change"],setup(t,{expose:e,emit:n}){const r=n,s=t,{buildMatrix:i,setTimePicker:o}=ii(),a=Vi(),{defaultedTransitions:u,defaultedAriaLabels:c,defaultedTextInput:d,defaultedConfig:f,defaultedRange:p}=kt(s),{transitionName:_,showTransition:P}=fl(u),{hideNavigationButtons:D}=Dc(),S=_e(null),O=_e(null),$=_e([]),F=_e(null),U=_e(!1);Jt(()=>{r("mount"),!s.timePicker&&s.arrowNavigation?i([Yt(S.value)],"time"):o(!0,s.timePicker)});const ee=ye(()=>p.value.enabled&&s.modelAuto?Tb(s.internalModelValue):!0),W=_e(!1),T=oe=>({hours:Array.isArray(s.hours)?s.hours[oe]:s.hours,minutes:Array.isArray(s.minutes)?s.minutes[oe]:s.minutes,seconds:Array.isArray(s.seconds)?s.seconds[oe]:s.seconds}),b=ye(()=>{const oe=[];if(p.value.enabled)for(let be=0;be<2;be++)oe.push(T(be));else oe.push(T(0));return oe}),g=(oe,be=!1,te="")=>{be||r("reset-flow"),W.value=oe,r(oe?"overlay-opened":"overlay-closed",Tn.time),s.arrowNavigation&&o(oe),Fn(()=>{te!==""&&$.value[0]&&$.value[0].openChildCmp(te)})},w=ye(()=>({dp__btn:!0,dp__button:!0,dp__button_bottom:s.autoApply&&!f.value.keepActionRow})),R=Qn(a,"timePicker"),k=(oe,be,te)=>p.value.enabled?be===0?[oe,b.value[1][te]]:[b.value[0][te],oe]:oe,I=oe=>{r("update:hours",oe)},j=oe=>{r("update:minutes",oe)},K=oe=>{r("update:seconds",oe)},z=()=>{if(F.value&&!d.value.enabled&&!s.noOverlayFocus){const oe=Eb(F.value);oe&&oe.focus({preventScroll:!0})}},ne=oe=>{U.value=!1,r("overlay-closed",oe)},fe=oe=>{U.value=!0,r("overlay-opened",oe)};return e({toggleTimePicker:g}),(oe,be)=>{var te;return B(),X("div",{class:"dp--tp-wrap","data-dp-mobile":oe.isMobile},[!oe.timePicker&&!oe.timePickerInline?Mt((B(),X("button",{key:0,ref_key:"openTimePickerBtn",ref:S,type:"button",class:Ye({...w.value,"dp--hidden-el":W.value}),"aria-label":(te=N(c))==null?void 0:te.openTimePicker,tabindex:oe.noOverlayFocus?void 0:0,"data-test-id":"open-time-picker-btn",onKeydown:be[0]||(be[0]=Ee=>N(Vn)(Ee,()=>g(!0))),onClick:be[1]||(be[1]=Ee=>g(!0))},[oe.$slots["clock-icon"]?Me(oe.$slots,"clock-icon",{key:0}):ce("",!0),oe.$slots["clock-icon"]?ce("",!0):(B(),Xe(N(tp),{key:1}))],42,CO)),[[Xl,!N(D)(oe.hideNavigation,"time")]]):ce("",!0),it(xo,{name:N(_)(W.value),css:N(P)&&!oe.timePickerInline},{default:Qe(()=>{var Ee,L;return[W.value||oe.timePicker||oe.timePickerInline?(B(),X("div",{key:0,ref_key:"overlayRef",ref:F,role:oe.timePickerInline?void 0:"dialog",class:Ye({dp__overlay:!oe.timePickerInline,"dp--overlay-absolute":!s.timePicker&&!oe.timePickerInline,"dp--overlay-relative":s.timePicker}),style:Pn(oe.timePicker?{height:`${N(f).modeHeight}px`}:void 0),"aria-label":(Ee=N(c))==null?void 0:Ee.timePicker,tabindex:oe.timePickerInline?void 0:0},[M("div",{class:Ye(oe.timePickerInline?"dp__time_picker_inline_container":"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"),style:{display:"flex"}},[oe.$slots["time-picker-overlay"]?Me(oe.$slots,"time-picker-overlay",{key:0,hours:t.hours,minutes:t.minutes,seconds:t.seconds,setHours:I,setMinutes:j,setSeconds:K}):ce("",!0),oe.$slots["time-picker-overlay"]?ce("",!0):(B(),X("div",{key:1,class:Ye(oe.timePickerInline?"dp__flex":"dp__overlay_row dp__flex_row")},[(B(!0),X(Oe,null,lt(b.value,(Z,ae)=>Mt((B(),Xe(kO,Qt({key:ae,ref_for:!0},{...oe.$props,order:ae,hours:Z.hours,minutes:Z.minutes,seconds:Z.seconds,closeTimePickerBtn:O.value,disabledTimesConfig:t.disabledTimesConfig,disabled:ae===0?N(p).fixedStart:N(p).fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:$,"validate-time":(me,v)=>t.validateTime(me,k(v,ae,me)),"onUpdate:hours":me=>I(k(me,ae,"hours")),"onUpdate:minutes":me=>j(k(me,ae,"minutes")),"onUpdate:seconds":me=>K(k(me,ae,"seconds")),onMounted:z,onOverlayClosed:ne,onOverlayOpened:fe,onAmPmChange:be[2]||(be[2]=me=>oe.$emit("am-pm-change",me))}),kn({_:2},[lt(N(R),(me,v)=>({name:me,fn:Qe(J=>[Me(oe.$slots,me,Qt({ref_for:!0},J))])}))]),1040,["validate-time","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[Xl,ae===0?!0:ee.value]])),128))],2)),!oe.timePicker&&!oe.timePickerInline?Mt((B(),X("button",{key:2,ref_key:"closeTimePickerBtn",ref:O,type:"button",class:Ye({...w.value,"dp--hidden-el":U.value}),"aria-label":(L=N(c))==null?void 0:L.closeTimePicker,tabindex:"0",onKeydown:be[3]||(be[3]=Z=>N(Vn)(Z,()=>g(!1))),onClick:be[4]||(be[4]=Z=>g(!1))},[oe.$slots["calendar-icon"]?Me(oe.$slots,"calendar-icon",{key:0}):ce("",!0),oe.$slots["calendar-icon"]?ce("",!0):(B(),Xe(N(Bo),{key:1}))],42,DO)),[[Xl,!N(D)(oe.hideNavigation,"time")]]):ce("",!0)],2)],14,SO)):ce("",!0)]}),_:3},8,["name","css"])],8,RO)}}}),$b=(t,e,n,r)=>{const{defaultedRange:s}=kt(t),i=(F,U)=>Array.isArray(e[F])?e[F][U]:e[F],o=F=>t.enableSeconds?Array.isArray(e.seconds)?e.seconds[F]:e.seconds:0,a=(F,U)=>F?U!==void 0?Ls(F,i("hours",U),i("minutes",U),o(U)):Ls(F,e.hours,e.minutes,o()):yb(ve(),o(U)),u=(F,U)=>{e[F]=U},c=ye(()=>t.modelAuto&&s.value.enabled?Array.isArray(n.value)?n.value.length>1:!1:s.value.enabled),d=(F,U)=>{const ee=Object.fromEntries(Object.keys(e).map(W=>W===F?[W,U]:[W,e[W]].slice()));if(c.value&&!s.value.disableTimeRangeValidation){const W=b=>n.value?Ls(n.value[b],ee.hours[b],ee.minutes[b],ee.seconds[b]):null,T=b=>vb(n.value[b],0);return!(tt(W(0),W(1))&&(Ni(W(0),T(1))||Ro(W(1),T(0))))}return!0},f=(F,U)=>{d(F,U)&&(u(F,U),r&&r())},p=F=>{f("hours",F)},_=F=>{f("minutes",F)},P=F=>{f("seconds",F)},D=(F,U,ee,W)=>{U&&p(F),!U&&!ee&&_(F),ee&&P(F),n.value&&W(n.value)},S=F=>{if(F){const U=Array.isArray(F),ee=U?[+F[0].hours,+F[1].hours]:+F.hours,W=U?[+F[0].minutes,+F[1].minutes]:+F.minutes,T=U?[+F[0].seconds,+F[1].seconds]:+F.seconds;u("hours",ee),u("minutes",W),t.enableSeconds&&u("seconds",T)}},O=(F,U)=>{const ee={hours:Array.isArray(e.hours)?e.hours[F]:e.hours,disabledArr:[]};return(U||U===0)&&(ee.hours=U),Array.isArray(t.disabledTimes)&&(ee.disabledArr=s.value.enabled&&Array.isArray(t.disabledTimes[F])?t.disabledTimes[F]:t.disabledTimes),ee},$=ye(()=>(F,U)=>{var ee;if(Array.isArray(t.disabledTimes)){const{disabledArr:W,hours:T}=O(F,U),b=W.filter(g=>+g.hours===T);return((ee=b[0])==null?void 0:ee.minutes)==="*"?{hours:[T],minutes:void 0,seconds:void 0}:{hours:[],minutes:b?.map(g=>+g.minutes)??[],seconds:b?.map(g=>g.seconds?+g.seconds:void 0)??[]}}return{hours:[],minutes:[],seconds:[]}});return{setTime:u,updateHours:p,updateMinutes:_,updateSeconds:P,getSetDateTime:a,updateTimeValues:D,getSecondsValue:o,assignStartTime:S,validateTime:d,disabledTimesConfig:$}},MO=(t,e)=>{const n=()=>{t.isTextInputDate&&U()},{modelValue:r,time:s}=pl(t,e,n),{defaultedStartTime:i,defaultedRange:o,defaultedTz:a}=kt(t),{updateTimeValues:u,getSetDateTime:c,setTime:d,assignStartTime:f,disabledTimesConfig:p,validateTime:_}=$b(t,s,r,P);function P(){e("update-flow-step")}const D=W=>{const{hours:T,minutes:b,seconds:g}=W;return{hours:+T,minutes:+b,seconds:g?+g:0}},S=()=>{if(t.startTime){if(Array.isArray(t.startTime)){const T=D(t.startTime[0]),b=D(t.startTime[1]);return[mt(ve(),T),mt(ve(),b)]}const W=D(t.startTime);return mt(ve(),W)}return o.value.enabled?[null,null]:null},O=()=>{if(o.value.enabled){const[W,T]=S();r.value=[Hn(c(W,0),a.value.timezone),Hn(c(T,1),a.value.timezone)]}else r.value=Hn(c(S()),a.value.timezone)},$=W=>Array.isArray(W)?[Pi(ve(W[0])),Pi(ve(W[1]))]:[Pi(W??ve())],F=(W,T,b)=>{d("hours",W),d("minutes",T),d("seconds",t.enableSeconds?b:0)},U=()=>{const[W,T]=$(r.value);return o.value.enabled?F([W.hours,T.hours],[W.minutes,T.minutes],[W.seconds,T.seconds]):F(W.hours,W.minutes,W.seconds)};Jt(()=>{if(!t.shadow)return f(i.value),r.value?U():O()});const ee=()=>{Array.isArray(r.value)?r.value=r.value.map((W,T)=>W&&c(W,T)):r.value=c(r.value),e("time-update")};return{modelValue:r,time:s,disabledTimesConfig:p,updateTime:(W,T=!0,b=!1)=>{u(W,T,b,ee)},validateTime:_}},xO=fn({compatConfig:{MODE:3},__name:"TimePickerSolo",props:{...wr},emits:["update:internal-model-value","time-update","am-pm-change","mount","reset-flow","update-flow-step","overlay-toggle"],setup(t,{expose:e,emit:n}){const r=n,s=t,i=Vi(),o=Qn(i,"timePicker"),a=_e(null),{time:u,modelValue:c,disabledTimesConfig:d,updateTime:f,validateTime:p}=MO(s,r);return Jt(()=>{s.shadow||r("mount",null)}),e({getSidebarProps:()=>({modelValue:c,time:u,updateTime:f}),toggleTimePicker:(_,P=!1,D="")=>{var S;(S=a.value)==null||S.toggleTimePicker(_,P,D)}}),(_,P)=>(B(),Xe(Cc,{"multi-calendars":0,stretch:"","is-mobile":_.isMobile},{default:Qe(()=>[it(Ub,Qt({ref_key:"tpRef",ref:a},_.$props,{hours:N(u).hours,minutes:N(u).minutes,seconds:N(u).seconds,"internal-model-value":_.internalModelValue,"disabled-times-config":N(d),"validate-time":N(p),"onUpdate:hours":P[0]||(P[0]=D=>N(f)(D)),"onUpdate:minutes":P[1]||(P[1]=D=>N(f)(D,!1)),"onUpdate:seconds":P[2]||(P[2]=D=>N(f)(D,!1,!0)),onAmPmChange:P[3]||(P[3]=D=>_.$emit("am-pm-change",D)),onResetFlow:P[4]||(P[4]=D=>_.$emit("reset-flow")),onOverlayClosed:P[5]||(P[5]=D=>_.$emit("overlay-toggle",{open:!1,overlay:D})),onOverlayOpened:P[6]||(P[6]=D=>_.$emit("overlay-toggle",{open:!0,overlay:D}))}),kn({_:2},[lt(N(o),(D,S)=>({name:D,fn:Qe(O=>[Me(_.$slots,D,tn(Nn(O)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"])]),_:3},8,["is-mobile"]))}}),OO={class:"dp--header-wrap"},NO={key:0,class:"dp__month_year_wrap"},VO={key:0},LO={class:"dp__month_year_wrap"},FO=["data-dp-element","aria-label","data-test-id","onClick","onKeydown"],UO=fn({compatConfig:{MODE:3},__name:"DpHeader",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},...wr},emits:["update-month-year","mount","reset-flow","overlay-closed","overlay-opened"],setup(t,{expose:e,emit:n}){const r=n,s=t,{defaultedTransitions:i,defaultedAriaLabels:o,defaultedMultiCalendars:a,defaultedFilters:u,defaultedConfig:c,defaultedHighlight:d,propDates:f,defaultedUI:p}=kt(s),{transitionName:_,showTransition:P}=fl(i),{buildMatrix:D}=ii(),{handleMonthYearChange:S,isDisabled:O,updateMonthYear:$}=iO(s,r),{showLeftIcon:F,showRightIcon:U}=Dc(),ee=_e(!1),W=_e(!1),T=_e(!1),b=_e([null,null,null,null]);Jt(()=>{r("mount")});const g=L=>({get:()=>s[L],set:Z=>{const ae=L===lr.month?lr.year:lr.month;r("update-month-year",{[L]:Z,[ae]:s[ae]}),L===lr.month?ne(!0):fe(!0)}}),w=ye(g(lr.month)),R=ye(g(lr.year)),k=ye(()=>L=>({month:s.month,year:s.year,items:L===lr.month?s.months:s.years,instance:s.instance,updateMonthYear:$,toggle:L===lr.month?ne:fe})),I=ye(()=>s.months.find(Z=>Z.value===s.month)||{text:"",value:0}),j=ye(()=>So(s.months,L=>{const Z=s.month===L.value,ae=Ka(L.value,kb(s.year,f.value.minDate),Rb(s.year,f.value.maxDate))||u.value.months.includes(L.value),me=xb(d.value,L.value,s.year);return{active:Z,disabled:ae,highlighted:me}})),K=ye(()=>So(s.years,L=>{const Z=s.year===L.value,ae=Ka(L.value,Do(f.value.minDate),Do(f.value.maxDate))||u.value.years.includes(L.value),me=lp(d.value,L.value);return{active:Z,disabled:ae,highlighted:me}})),z=(L,Z,ae)=>{ae!==void 0?L.value=ae:L.value=!L.value,L.value?(T.value=!0,r("overlay-opened",Z)):(T.value=!1,r("overlay-closed",Z))},ne=(L=!1,Z)=>{oe(L),z(ee,Tn.month,Z)},fe=(L=!1,Z)=>{oe(L),z(W,Tn.year,Z)},oe=L=>{L||r("reset-flow")},be=(L,Z)=>{s.arrowNavigation&&(b.value[Z]=Yt(L),D(b.value,"monthYear"))},te=ye(()=>{var L,Z,ae,me,v,J;return[{type:lr.month,index:1,toggle:ne,modelValue:w.value,updateModelValue:Ae=>w.value=Ae,text:I.value.text,showSelectionGrid:ee.value,items:j.value,ariaLabel:(L=o.value)==null?void 0:L.openMonthsOverlay,overlayLabel:((ae=(Z=o.value).monthPicker)==null?void 0:ae.call(Z,!0))??void 0},{type:lr.year,index:2,toggle:fe,modelValue:R.value,updateModelValue:Ae=>R.value=Ae,text:Ab(s.year,s.locale),showSelectionGrid:W.value,items:K.value,ariaLabel:(me=o.value)==null?void 0:me.openYearsOverlay,overlayLabel:((J=(v=o.value).yearPicker)==null?void 0:J.call(v,!0))??void 0}]}),Ee=ye(()=>s.disableYearSelect?[te.value[0]]:s.yearFirst?[...te.value].reverse():te.value);return e({toggleMonthPicker:ne,toggleYearPicker:fe,handleMonthYearChange:S}),(L,Z)=>{var ae,me,v,J,Ae,Ge;return B(),X("div",OO,[L.$slots["month-year"]?(B(),X("div",NO,[Me(L.$slots,"month-year",tn(Nn({month:t.month,year:t.year,months:t.months,years:t.years,updateMonthYear:N($),handleMonthYearChange:N(S),instance:t.instance,isDisabled:N(O)})))])):(B(),X(Oe,{key:1},[L.$slots["top-extra"]?(B(),X("div",VO,[Me(L.$slots,"top-extra",{value:L.internalModelValue})])):ce("",!0),M("div",LO,[N(F)(N(a),t.instance)&&!L.vertical?(B(),Xe(ka,{key:0,"aria-label":(ae=N(o))==null?void 0:ae.prevMonth,disabled:N(O)(!1),class:Ye((me=N(p))==null?void 0:me.navBtnPrev),"el-name":"action-prev",onActivate:Z[0]||(Z[0]=se=>N(S)(!1,!0)),onSetRef:Z[1]||(Z[1]=se=>be(se,0))},{default:Qe(()=>[L.$slots["arrow-left"]?Me(L.$slots,"arrow-left",{key:0}):ce("",!0),L.$slots["arrow-left"]?ce("",!0):(B(),Xe(N(Zf),{key:1}))]),_:3},8,["aria-label","disabled","class"])):ce("",!0),M("div",{class:Ye(["dp__month_year_wrap",{dp__year_disable_select:L.disableYearSelect}])},[(B(!0),X(Oe,null,lt(Ee.value,(se,C)=>(B(),X(Oe,{key:se.type},[M("button",{ref_for:!0,ref:A=>be(A,C+1),type:"button","data-dp-element":`overlay-${se.type}`,class:Ye(["dp__btn dp__month_year_select",{"dp--hidden-el":T.value}]),"aria-label":`${se.text}-${se.ariaLabel}`,"data-test-id":`${se.type}-toggle-overlay-${t.instance}`,onClick:se.toggle,onKeydown:A=>N(Vn)(A,()=>se.toggle(),!0)},[L.$slots[se.type]?Me(L.$slots,se.type,{key:0,text:se.text,value:s[se.type]}):ce("",!0),L.$slots[se.type]?ce("",!0):(B(),X(Oe,{key:1},[Un($e(se.text),1)],64))],42,FO),it(xo,{name:N(_)(se.showSelectionGrid),css:N(P)},{default:Qe(()=>[se.showSelectionGrid?(B(),Xe(hl,{key:0,items:se.items,"arrow-navigation":L.arrowNavigation,"hide-navigation":L.hideNavigation,"is-last":L.autoApply&&!N(c).keepActionRow,"skip-button-ref":!1,config:L.config,type:se.type,"header-refs":[],"esc-close":L.escClose,"menu-wrap-ref":L.menuWrapRef,"text-input":L.textInput,"aria-labels":L.ariaLabels,"overlay-label":se.overlayLabel,onSelected:se.updateModelValue,onToggle:se.toggle},kn({"button-icon":Qe(()=>[L.$slots["calendar-icon"]?Me(L.$slots,"calendar-icon",{key:0}):ce("",!0),L.$slots["calendar-icon"]?ce("",!0):(B(),Xe(N(Bo),{key:1}))]),_:2},[L.$slots[`${se.type}-overlay-value`]?{name:"item",fn:Qe(({item:A})=>[Me(L.$slots,`${se.type}-overlay-value`,{text:A.text,value:A.value})]),key:"0"}:void 0,L.$slots[`${se.type}-overlay`]?{name:"overlay",fn:Qe(()=>[Me(L.$slots,`${se.type}-overlay`,Qt({ref_for:!0},k.value(se.type)))]),key:"1"}:void 0,L.$slots[`${se.type}-overlay-header`]?{name:"header",fn:Qe(()=>[Me(L.$slots,`${se.type}-overlay-header`,{toggle:se.toggle})]),key:"2"}:void 0]),1032,["items","arrow-navigation","hide-navigation","is-last","config","type","esc-close","menu-wrap-ref","text-input","aria-labels","overlay-label","onSelected","onToggle"])):ce("",!0)]),_:2},1032,["name","css"])],64))),128))],2),N(F)(N(a),t.instance)&&L.vertical?(B(),Xe(ka,{key:1,"aria-label":(v=N(o))==null?void 0:v.prevMonth,"el-name":"action-prev",disabled:N(O)(!1),class:Ye((J=N(p))==null?void 0:J.navBtnPrev),onActivate:Z[2]||(Z[2]=se=>N(S)(!1,!0))},{default:Qe(()=>[L.$slots["arrow-up"]?Me(L.$slots,"arrow-up",{key:0}):ce("",!0),L.$slots["arrow-up"]?ce("",!0):(B(),Xe(N(np),{key:1}))]),_:3},8,["aria-label","disabled","class"])):ce("",!0),N(U)(N(a),t.instance)?(B(),Xe(ka,{key:2,ref:"rightIcon","el-name":"action-next",disabled:N(O)(!0),"aria-label":(Ae=N(o))==null?void 0:Ae.nextMonth,class:Ye((Ge=N(p))==null?void 0:Ge.navBtnNext),onActivate:Z[3]||(Z[3]=se=>N(S)(!0,!0)),onSetRef:Z[4]||(Z[4]=se=>be(se,L.disableYearSelect?2:3))},{default:Qe(()=>[L.$slots[L.vertical?"arrow-down":"arrow-right"]?Me(L.$slots,L.vertical?"arrow-down":"arrow-right",{key:0}):ce("",!0),L.$slots[L.vertical?"arrow-down":"arrow-right"]?ce("",!0):(B(),Xe(Ju(L.vertical?N(rp):N(ep)),{key:1}))]),_:3},8,["disabled","aria-label","class"])):ce("",!0)])],64))])}}}),$O={class:"dp__calendar_header",role:"row"},BO={key:0,class:"dp__calendar_header_item",role:"gridcell"},jO=["aria-label"],qO={key:0,class:"dp__calendar_item dp__week_num",role:"gridcell"},HO={class:"dp__cell_inner"},WO=["id","aria-pressed","aria-disabled","aria-label","tabindex","data-test-id","onClick","onTouchend","onKeydown","onMouseenter","onMouseleave","onMousedown"],zO=fn({compatConfig:{MODE:3},__name:"DpCalendar",props:{mappedDates:{type:Array,default:()=>[]},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...wr},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(t,{expose:e,emit:n}){const r=n,s=t,{buildMultiLevelMatrix:i}=ii(),{defaultedTransitions:o,defaultedConfig:a,defaultedAriaLabels:u,defaultedMultiCalendars:c,defaultedWeekNumbers:d,defaultedMultiDates:f,defaultedUI:p}=kt(s),_=_e(null),P=_e({bottom:"",left:"",transform:""}),D=_e([]),S=_e(null),O=_e(!0),$=_e(""),F=_e({startX:0,endX:0,startY:0,endY:0}),U=_e([]),ee=_e({left:"50%"}),W=_e(!1),T=ye(()=>s.calendar?s.calendar(s.mappedDates):s.mappedDates),b=ye(()=>s.dayNames?Array.isArray(s.dayNames)?s.dayNames:s.dayNames(s.locale,+s.weekStart):Ix(s.formatLocale,s.locale,+s.weekStart));Jt(()=>{r("mount",{cmp:"calendar",refs:D}),a.value.noSwipe||S.value&&(S.value.addEventListener("touchstart",be,{passive:!1}),S.value.addEventListener("touchend",te,{passive:!1}),S.value.addEventListener("touchmove",Ee,{passive:!1})),s.monthChangeOnScroll&&S.value&&S.value.addEventListener("wheel",ae,{passive:!1})}),Zs(()=>{a.value.noSwipe||S.value&&(S.value.removeEventListener("touchstart",be),S.value.removeEventListener("touchend",te),S.value.removeEventListener("touchmove",Ee)),s.monthChangeOnScroll&&S.value&&S.value.removeEventListener("wheel",ae)});const g=se=>se?s.vertical?"vNext":"next":s.vertical?"vPrevious":"previous",w=(se,C)=>{if(s.transitions){const A=sn(es(ve(),s.month,s.year));$.value=Ut(sn(es(ve(),se,C)),A)?o.value[g(!0)]:o.value[g(!1)],O.value=!1,Fn(()=>{O.value=!0})}},R=ye(()=>({...p.value.calendar??{}})),k=ye(()=>se=>{const C=kx(se);return{dp__marker_dot:C.type==="dot",dp__marker_line:C.type==="line"}}),I=ye(()=>se=>tt(se,_.value)),j=ye(()=>({dp__calendar:!0,dp__calendar_next:c.value.count>0&&s.instance!==0})),K=ye(()=>se=>s.hideOffsetDates?se.current:!0),z=async(se,C)=>{const{width:A,height:V}=se.getBoundingClientRect();_.value=C.value;let y={left:`${A/2}px`},q=-50;if(await Fn(),U.value[0]){const{left:H,width:Q}=U.value[0].getBoundingClientRect();H<0&&(y={left:"0"},q=0,ee.value.left=`${A/2}px`),window.innerWidth<H+Q&&(y={right:"0"},q=0,ee.value.left=`${Q-A/2}px`)}P.value={bottom:`${V}px`,...y,transform:`translateX(${q}%)`}},ne=async(se,C,A)=>{var V,y,q;const H=Yt(D.value[C][A]);H&&((V=se.marker)!=null&&V.customPosition&&(q=(y=se.marker)==null?void 0:y.tooltip)!=null&&q.length?P.value=se.marker.customPosition(H):await z(H,se),r("tooltip-open",se.marker))},fe=async(se,C,A)=>{var V,y;if(W.value&&f.value.enabled&&f.value.dragSelect)return r("select-date",se);if(r("set-hover-date",se),(y=(V=se.marker)==null?void 0:V.tooltip)!=null&&y.length){if(s.hideOffsetDates&&!se.current)return;await ne(se,C,A)}},oe=se=>{_.value&&(_.value=null,P.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),r("tooltip-close",se.marker))},be=se=>{F.value.startX=se.changedTouches[0].screenX,F.value.startY=se.changedTouches[0].screenY},te=se=>{F.value.endX=se.changedTouches[0].screenX,F.value.endY=se.changedTouches[0].screenY,L()},Ee=se=>{s.vertical&&!s.inline&&se.preventDefault()},L=()=>{const se=s.vertical?"Y":"X";Math.abs(F.value[`start${se}`]-F.value[`end${se}`])>10&&r("handle-swipe",F.value[`start${se}`]>F.value[`end${se}`]?"right":"left")},Z=(se,C,A)=>{se&&(Array.isArray(D.value[C])?D.value[C][A]=se:D.value[C]=[se]),s.arrowNavigation&&i(D.value,"calendar")},ae=se=>{s.monthChangeOnScroll&&(se.preventDefault(),r("handle-scroll",se))},me=se=>d.value.type==="local"?Qf(se.value,{weekStartsOn:+s.weekStart}):d.value.type==="iso"?Kf(se.value):typeof d.value.type=="function"?d.value.type(se.value):"",v=se=>{const C=se[0];return d.value.hideOnOffsetDates?se.some(A=>A.current)?me(C):"":me(C)},J=(se,C,A=!0)=>{!A&&Mx()||(!f.value.enabled||a.value.allowPreventDefault)&&(Vs(se,a.value),r("select-date",C))},Ae=se=>{Vs(se,a.value)},Ge=se=>{f.value.enabled&&f.value.dragSelect?(W.value=!0,r("select-date",se)):f.value.enabled&&r("select-date",se)};return e({triggerTransition:w}),(se,C)=>(B(),X("div",{class:Ye(j.value)},[M("div",{ref_key:"calendarWrapRef",ref:S,class:Ye(R.value),role:"grid"},[M("div",$O,[se.weekNumbers?(B(),X("div",BO,$e(se.weekNumName),1)):ce("",!0),(B(!0),X(Oe,null,lt(b.value,(A,V)=>{var y,q;return B(),X("div",{key:V,class:"dp__calendar_header_item",role:"gridcell","data-test-id":"calendar-header","aria-label":(q=(y=N(u))==null?void 0:y.weekDay)==null?void 0:q.call(y,V)},[se.$slots["calendar-header"]?Me(se.$slots,"calendar-header",{key:0,day:A,index:V}):ce("",!0),se.$slots["calendar-header"]?ce("",!0):(B(),X(Oe,{key:1},[Un($e(A),1)],64))],8,jO)}),128))]),C[2]||(C[2]=M("div",{class:"dp__calendar_header_separator"},null,-1)),it(xo,{name:$.value,css:!!se.transitions},{default:Qe(()=>[O.value?(B(),X("div",{key:0,class:"dp__calendar",role:"rowgroup",onMouseleave:C[1]||(C[1]=A=>W.value=!1)},[(B(!0),X(Oe,null,lt(T.value,(A,V)=>(B(),X("div",{key:V,class:"dp__calendar_row",role:"row"},[se.weekNumbers?(B(),X("div",qO,[M("div",HO,$e(v(A.days)),1)])):ce("",!0),(B(!0),X(Oe,null,lt(A.days,(y,q)=>{var H,Q,de;return B(),X("div",{id:N(wh)(y.value),ref_for:!0,ref:ue=>Z(ue,V,q),key:q+V,role:"gridcell",class:"dp__calendar_item","aria-pressed":(y.classData.dp__active_date||y.classData.dp__range_start||y.classData.dp__range_start)??void 0,"aria-disabled":y.classData.dp__cell_disabled||void 0,"aria-label":(Q=(H=N(u))==null?void 0:H.day)==null?void 0:Q.call(H,y),tabindex:!y.current&&se.hideOffsetDates?void 0:0,"data-test-id":N(wh)(y.value),onClick:Bt(ue=>J(ue,y),["prevent"]),onTouchend:ue=>J(ue,y,!1),onKeydown:ue=>N(Vn)(ue,()=>se.$emit("select-date",y)),onMouseenter:ue=>fe(y,V,q),onMouseleave:ue=>oe(y),onMousedown:ue=>Ge(y),onMouseup:C[0]||(C[0]=ue=>W.value=!1)},[M("div",{class:Ye(["dp__cell_inner",y.classData])},[se.$slots.day&&K.value(y)?Me(se.$slots,"day",{key:0,day:+y.text,date:y.value}):ce("",!0),se.$slots.day?ce("",!0):(B(),X(Oe,{key:1},[Un($e(y.text),1)],64)),y.marker&&K.value(y)?(B(),X(Oe,{key:2},[se.$slots.marker?Me(se.$slots,"marker",{key:0,marker:y.marker,day:+y.text,date:y.value}):(B(),X("div",{key:1,class:Ye(k.value(y.marker)),style:Pn(y.marker.color?{backgroundColor:y.marker.color}:{})},null,6))],64)):ce("",!0),I.value(y.value)?(B(),X("div",{key:3,ref_for:!0,ref_key:"activeTooltip",ref:U,class:"dp__marker_tooltip",style:Pn(P.value)},[(de=y.marker)!=null&&de.tooltip?(B(),X("div",{key:0,class:"dp__tooltip_content",onClick:Ae},[(B(!0),X(Oe,null,lt(y.marker.tooltip,(ue,le)=>(B(),X("div",{key:le,class:"dp__tooltip_text"},[se.$slots["marker-tooltip"]?Me(se.$slots,"marker-tooltip",{key:0,tooltip:ue,day:y.value}):ce("",!0),se.$slots["marker-tooltip"]?ce("",!0):(B(),X(Oe,{key:1},[M("div",{class:"dp__tooltip_mark",style:Pn(ue.color?{backgroundColor:ue.color}:{})},null,4),M("div",null,$e(ue.text),1)],64))]))),128)),M("div",{class:"dp__arrow_bottom_tp",style:Pn(ee.value)},null,4)])):ce("",!0)],4)):ce("",!0)],2)],40,WO)}),128))]))),128))],32)):ce("",!0)]),_:3},8,["name","css"])],2)],2))}}),Uv=t=>Array.isArray(t),YO=(t,e,n,r)=>{const s=_e([]),i=_e(new Date),o=_e(),a=()=>te(t.isTextInputDate),{modelValue:u,calendars:c,time:d,today:f}=pl(t,e,a),{defaultedMultiCalendars:p,defaultedStartTime:_,defaultedRange:P,defaultedConfig:D,defaultedTz:S,propDates:O,defaultedMultiDates:$}=kt(t),{validateMonthYearInRange:F,isDisabled:U,isDateRangeAllowed:ee,checkMinMaxRange:W}=oi(t),{updateTimeValues:T,getSetDateTime:b,setTime:g,assignStartTime:w,validateTime:R,disabledTimesConfig:k}=$b(t,d,u,r),I=ye(()=>G=>c.value[G]?c.value[G].month:0),j=ye(()=>G=>c.value[G]?c.value[G].year:0),K=G=>!D.value.keepViewOnOffsetClick||G?!0:!o.value,z=(G,Te,Ne,We=!1)=>{var pe,Re;K(We)&&(c.value[G]||(c.value[G]={month:0,year:0}),c.value[G].month=xv(Te)?(pe=c.value[G])==null?void 0:pe.month:Te,c.value[G].year=xv(Ne)?(Re=c.value[G])==null?void 0:Re.year:Ne)},ne=()=>{t.autoApply&&e("select-date")},fe=()=>{_.value&&w(_.value)};Jt(()=>{t.shadow||(u.value||(C(),fe()),te(!0),t.focusStartDate&&t.startDate&&C())});const oe=ye(()=>{var G;return(G=t.flow)!=null&&G.length&&!t.partialFlow?t.flowStep===t.flow.length:!0}),be=()=>{t.autoApply&&oe.value&&e("auto-apply",t.partialFlow?t.flowStep!==t.flow.length:!1)},te=(G=!1)=>{if(u.value)return Array.isArray(u.value)?(s.value=u.value,J(G)):Z(u.value,G);if(p.value.count&&G&&!t.startDate)return L(ve(),G)},Ee=()=>Array.isArray(u.value)&&P.value.enabled?et(u.value[0])===et(u.value[1]??u.value[0]):!1,L=(G=new Date,Te=!1)=>{if((!p.value.count||!p.value.static||Te)&&z(0,et(G),qe(G)),p.value.count&&(!u.value||Ee()||!p.value.solo)&&(!p.value.solo||Te))for(let Ne=1;Ne<p.value.count;Ne++){const We=mt(ve(),{month:I.value(Ne-1),year:j.value(Ne-1)}),pe=Zw(We,{months:1});c.value[Ne]={month:et(pe),year:qe(pe)}}},Z=(G,Te)=>{L(G),g("hours",us(G)),g("minutes",Qs(G)),g("seconds",ko(G)),p.value.count&&Te&&se()},ae=G=>{if(p.value.count){if(p.value.solo)return 0;const Te=et(G[0]),Ne=et(G[1]);return Math.abs(Ne-Te)<p.value.count?0:1}return 1},me=(G,Te)=>{G[1]&&P.value.showLastInRange?L(G[ae(G)],Te):L(G[0],Te);const Ne=(We,pe)=>[We(G[0]),G[1]?We(G[1]):d[pe][1]];g("hours",Ne(us,"hours")),g("minutes",Ne(Qs,"minutes")),g("seconds",Ne(ko,"seconds"))},v=(G,Te)=>{if((P.value.enabled||t.weekPicker)&&!$.value.enabled)return me(G,Te);if($.value.enabled&&Te){const Ne=G[G.length-1];return Z(Ne,Te)}},J=G=>{const Te=u.value;v(Te,G),p.value.count&&p.value.solo&&se()},Ae=(G,Te)=>{const Ne=mt(ve(),{month:I.value(Te),year:j.value(Te)}),We=G<0?pr(Ne,1):Co(Ne,1);F(et(We),qe(We),G<0,t.preventMinMaxNavigation)&&(z(Te,et(We),qe(We)),e("update-month-year",{instance:Te,month:et(We),year:qe(We)}),p.value.count&&!p.value.solo&&Ge(Te),n())},Ge=G=>{for(let Te=G-1;Te>=0;Te--){const Ne=Co(mt(ve(),{month:I.value(Te+1),year:j.value(Te+1)}),1);z(Te,et(Ne),qe(Ne))}for(let Te=G+1;Te<=p.value.count-1;Te++){const Ne=pr(mt(ve(),{month:I.value(Te-1),year:j.value(Te-1)}),1);z(Te,et(Ne),qe(Ne))}},se=()=>{if(Array.isArray(u.value)&&u.value.length===2){const G=ve(ve(u.value[1]?u.value[1]:pr(u.value[0],1))),[Te,Ne]=[et(u.value[0]),qe(u.value[0])],[We,pe]=[et(u.value[1]),qe(u.value[1])];(Te!==We||Te===We&&Ne!==pe)&&p.value.solo&&z(1,et(G),qe(G))}else u.value&&!Array.isArray(u.value)&&(z(0,et(u.value),qe(u.value)),L(ve()))},C=()=>{t.startDate&&(z(0,et(ve(t.startDate)),qe(ve(t.startDate))),p.value.count&&Ge(0))},A=(G,Te)=>{if(t.monthChangeOnScroll){const Ne=new Date().getTime()-i.value.getTime(),We=Math.abs(G.deltaY);let pe=500;We>1&&(pe=100),We>100&&(pe=0),Ne>pe&&(i.value=new Date,Ae(t.monthChangeOnScroll!=="inverse"?-G.deltaY:G.deltaY,Te))}},V=(G,Te,Ne=!1)=>{t.monthChangeOnArrows&&t.vertical===Ne&&y(G,Te)},y=(G,Te)=>{Ae(G==="right"?-1:1,Te)},q=G=>{if(O.value.markers)return qu(G.value,O.value.markers)},H=(G,Te)=>{switch(t.sixWeeks===!0?"append":t.sixWeeks){case"prepend":return[!0,!1];case"center":return[G==0,!0];case"fair":return[G==0||Te>G,!0];case"append":return[!1,!1];default:return[!1,!1]}},Q=(G,Te,Ne,We)=>{if(t.sixWeeks&&G.length<6){const pe=6-G.length,Re=(Te.getDay()+7-We)%7,xe=6-(Ne.getDay()+7-We)%7,[Jn,Cn]=H(Re,xe);for(let br=1;br<=pe;br++)if(Cn?!!(br%2)==Jn:Jn){const $n=G[0].days[0],ji=de(tr($n.value,-7),et(Te));G.unshift({days:ji})}else{const $n=G[G.length-1],ji=$n.days[$n.days.length-1],on=de(tr(ji.value,1),et(Te));G.push({days:on})}}return G},de=(G,Te)=>{const Ne=ve(G),We=[];for(let pe=0;pe<7;pe++){const Re=tr(Ne,pe),xe=et(Re)!==Te;We.push({text:t.hideOffsetDates&&xe?"":Re.getDate(),value:Re,current:!xe,classData:{}})}return We},ue=(G,Te)=>{const Ne=[],We=new Date(Te,G),pe=new Date(Te,G+1,0),Re=t.weekStart,xe=_r(We,{weekStartsOn:Re}),Jn=Cn=>{const br=de(Cn,G);if(Ne.push({days:br}),!Ne[Ne.length-1].days.some($n=>tt(sn($n.value),sn(pe)))){const $n=tr(Cn,7);Jn($n)}};return Jn(xe),Q(Ne,We,pe,Re)},le=G=>{const Te=Ls(ve(G.value),d.hours,d.minutes,we());e("date-update",Te),$.value.enabled?up(Te,u,$.value.limit):u.value=Te,r(),Fn().then(()=>{be()})},ke=G=>P.value.noDisabledRange?Cb(s.value[0],G).some(Te=>U(Te)):!1,x=()=>{s.value=u.value?u.value.slice():[],s.value.length===2&&!(P.value.fixedStart||P.value.fixedEnd)&&(s.value=[])},re=(G,Te)=>{const Ne=[ve(G.value),tr(ve(G.value),+P.value.autoRange)];ee(Ne)?(Te&&Ie(G.value),s.value=Ne):e("invalid-date",G.value)},Ie=G=>{const Te=et(ve(G)),Ne=qe(ve(G));if(z(0,Te,Ne),p.value.count>0)for(let We=1;We<p.value.count;We++){const pe=Nx(mt(ve(G),{year:j.value(We-1),month:I.value(We-1)}));z(We,pe.month,pe.year)}},Se=G=>{if(ke(G.value)||!W(G.value,u.value,P.value.fixedStart?0:1))return e("invalid-date",G.value);s.value=Lb(ve(G.value),u,e,P)},Fe=(G,Te)=>{if(x(),P.value.autoRange)return re(G,Te);if(P.value.fixedStart||P.value.fixedEnd)return Se(G);s.value[0]?W(ve(G.value),u.value)&&!ke(G.value)?Dt(ve(G.value),ve(s.value[0]))?(s.value.unshift(ve(G.value)),e("range-end",s.value[0])):(s.value[1]=ve(G.value),e("range-end",s.value[1])):(t.autoApply&&e("auto-apply-invalid",G.value),e("invalid-date",G.value)):(s.value[0]=ve(G.value),e("range-start",s.value[0]))},we=(G=!0)=>t.enableSeconds?Array.isArray(d.seconds)?G?d.seconds[0]:d.seconds[1]:d.seconds:0,Ze=G=>{s.value[G]=Ls(s.value[G],d.hours[G],d.minutes[G],we(G!==1))},pt=()=>{var G,Te;s.value[0]&&s.value[1]&&+((G=s.value)==null?void 0:G[0])>+((Te=s.value)==null?void 0:Te[1])&&(s.value.reverse(),e("range-start",s.value[0]),e("range-end",s.value[1]))},pn=()=>{s.value.length&&(s.value[0]&&!s.value[1]?Ze(0):(Ze(0),Ze(1),r()),pt(),u.value=s.value.slice(),Sc(s.value,e,t.autoApply,t.modelAuto))},Vt=(G,Te=!1)=>{if(U(G.value)||!G.current&&t.hideOffsetDates)return e("invalid-date",G.value);if(o.value=JSON.parse(JSON.stringify(G)),!P.value.enabled)return le(G);Uv(d.hours)&&Uv(d.minutes)&&!$.value.enabled&&(Fe(G,Te),pn())},Xn=(G,Te)=>{var Ne;z(G,Te.month,Te.year,!0),p.value.count&&!p.value.solo&&Ge(G),e("update-month-year",{instance:G,month:Te.month,year:Te.year}),n(p.value.solo?G:void 0);const We=(Ne=t.flow)!=null&&Ne.length?t.flow[t.flowStep]:void 0;!Te.fromNav&&(We===Tn.month||We===Tn.year)&&r()},Br=(G,Te)=>{Vb({value:G,modelValue:u,range:P.value.enabled,timezone:Te?void 0:S.value.timezone}),ne(),t.multiCalendars&&Fn().then(()=>te(!0))},Lt=()=>{const G=sp(ve(),S.value);!P.value.enabled&&!$.value.enabled?u.value=G:u.value&&Array.isArray(u.value)&&u.value[0]?$.value.enabled?u.value=[...u.value,G]:u.value=Dt(G,u.value[0])?[G,u.value[0]]:[u.value[0],G]:u.value=[G],ne()},mn=()=>{if(Array.isArray(u.value))if($.value.enabled){const G=hs();u.value[u.value.length-1]=b(G)}else u.value=u.value.map((G,Te)=>G&&b(G,Te));else u.value=b(u.value);e("time-update")},hs=()=>Array.isArray(u.value)&&u.value.length?u.value[u.value.length-1]:null;return{calendars:c,modelValue:u,month:I,year:j,time:d,disabledTimesConfig:k,today:f,validateTime:R,getCalendarDays:ue,getMarker:q,handleScroll:A,handleSwipe:y,handleArrow:V,selectDate:Vt,updateMonthYear:Xn,presetDate:Br,selectCurrentDate:Lt,updateTime:(G,Te=!0,Ne=!1)=>{T(G,Te,Ne,mn)},assignMonthAndYear:L,setStartTime:fe}},KO={key:0},GO=fn({__name:"DatePicker",props:{...wr},emits:["tooltip-open","tooltip-close","mount","update:internal-model-value","update-flow-step","reset-flow","auto-apply","focus-menu","select-date","range-start","range-end","invalid-fixed-range","time-update","am-pm-change","time-picker-open","time-picker-close","recalculate-position","update-month-year","auto-apply-invalid","date-update","invalid-date","overlay-toggle"],setup(t,{expose:e,emit:n}){const r=n,s=t,{calendars:i,month:o,year:a,modelValue:u,time:c,disabledTimesConfig:d,today:f,validateTime:p,getCalendarDays:_,getMarker:P,handleArrow:D,handleScroll:S,handleSwipe:O,selectDate:$,updateMonthYear:F,presetDate:U,selectCurrentDate:ee,updateTime:W,assignMonthAndYear:T,setStartTime:b}=YO(s,r,Ee,L),g=Vi(),{setHoverDate:w,getDayClassData:R,clearHoverDate:k}=hN(u,s),{defaultedMultiCalendars:I}=kt(s),j=_e([]),K=_e([]),z=_e(null),ne=Qn(g,"calendar"),fe=Qn(g,"monthYear"),oe=Qn(g,"timePicker"),be=A=>{s.shadow||r("mount",A)};Ln(i,()=>{s.shadow||setTimeout(()=>{r("recalculate-position")},0)},{deep:!0}),Ln(I,(A,V)=>{A.count-V.count>0&&T()},{deep:!0});const te=ye(()=>A=>_(o.value(A),a.value(A)).map(V=>({...V,days:V.days.map(y=>(y.marker=P(y),y.classData=R(y),y))})));function Ee(A){var V;A||A===0?(V=K.value[A])==null||V.triggerTransition(o.value(A),a.value(A)):K.value.forEach((y,q)=>y.triggerTransition(o.value(q),a.value(q)))}function L(){r("update-flow-step")}const Z=(A,V=!1)=>{$(A,V),s.spaceConfirm&&r("select-date")},ae=(A,V,y=0)=>{var q;(q=j.value[y])==null||q.toggleMonthPicker(A,V)},me=(A,V,y=0)=>{var q;(q=j.value[y])==null||q.toggleYearPicker(A,V)},v=(A,V,y)=>{var q;(q=z.value)==null||q.toggleTimePicker(A,V,y)},J=(A,V)=>{var y;if(!s.range){const q=u.value?u.value:f,H=V?new Date(V):q,Q=A?_r(H,{weekStartsOn:1}):ob(H,{weekStartsOn:1});$({value:Q,current:et(H)===o.value(0),text:"",classData:{}}),(y=document.getElementById(wh(Q)))==null||y.focus()}},Ae=A=>{var V;(V=j.value[0])==null||V.handleMonthYearChange(A,!0)},Ge=A=>{F(0,{month:o.value(0),year:a.value(0)+(A?1:-1),fromNav:!0})},se=(A,V)=>{A===Tn.time&&r(`time-picker-${V?"open":"close"}`),r("overlay-toggle",{open:V,overlay:A})},C=A=>{r("overlay-toggle",{open:!1,overlay:A}),r("focus-menu")};return e({clearHoverDate:k,presetDate:U,selectCurrentDate:ee,toggleMonthPicker:ae,toggleYearPicker:me,toggleTimePicker:v,handleArrow:D,updateMonthYear:F,getSidebarProps:()=>({modelValue:u,month:o,year:a,time:c,updateTime:W,updateMonthYear:F,selectDate:$,presetDate:U}),changeMonth:Ae,changeYear:Ge,selectWeekDate:J,setStartTime:b}),(A,V)=>(B(),X(Oe,null,[it(Cc,{"multi-calendars":N(I).count,collapse:A.collapse,"is-mobile":A.isMobile},{default:Qe(({instance:y,index:q})=>[A.disableMonthYearSelect?ce("",!0):(B(),Xe(UO,Qt({key:0,ref:H=>{H&&(j.value[q]=H)},months:N(bb)(A.formatLocale,A.locale,A.monthNameFormat),years:N(ip)(A.yearRange,A.locale,A.reverseYears),month:N(o)(y),year:N(a)(y),instance:y},A.$props,{onMount:V[0]||(V[0]=H=>be(N(Ii).header)),onResetFlow:V[1]||(V[1]=H=>A.$emit("reset-flow")),onUpdateMonthYear:H=>N(F)(y,H),onOverlayClosed:C,onOverlayOpened:V[2]||(V[2]=H=>A.$emit("overlay-toggle",{open:!0,overlay:H}))}),kn({_:2},[lt(N(fe),(H,Q)=>({name:H,fn:Qe(de=>[Me(A.$slots,H,tn(Nn(de)))])}))]),1040,["months","years","month","year","instance","onUpdateMonthYear"])),it(zO,Qt({ref:H=>{H&&(K.value[q]=H)},"mapped-dates":te.value(y),month:N(o)(y),year:N(a)(y),instance:y},A.$props,{onSelectDate:H=>N($)(H,y!==1),onHandleSpace:H=>Z(H,y!==1),onSetHoverDate:V[3]||(V[3]=H=>N(w)(H)),onHandleScroll:H=>N(S)(H,y),onHandleSwipe:H=>N(O)(H,y),onMount:V[4]||(V[4]=H=>be(N(Ii).calendar)),onResetFlow:V[5]||(V[5]=H=>A.$emit("reset-flow")),onTooltipOpen:V[6]||(V[6]=H=>A.$emit("tooltip-open",H)),onTooltipClose:V[7]||(V[7]=H=>A.$emit("tooltip-close",H))}),kn({_:2},[lt(N(ne),(H,Q)=>({name:H,fn:Qe(de=>[Me(A.$slots,H,tn(Nn({...de})))])}))]),1040,["mapped-dates","month","year","instance","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])]),_:3},8,["multi-calendars","collapse","is-mobile"]),A.enableTimePicker?(B(),X("div",KO,[A.$slots["time-picker"]?Me(A.$slots,"time-picker",tn(Qt({key:0},{time:N(c),updateTime:N(W)}))):(B(),Xe(Ub,Qt({key:1,ref_key:"timePickerRef",ref:z},A.$props,{hours:N(c).hours,minutes:N(c).minutes,seconds:N(c).seconds,"internal-model-value":A.internalModelValue,"disabled-times-config":N(d),"validate-time":N(p),onMount:V[8]||(V[8]=y=>be(N(Ii).timePicker)),"onUpdate:hours":V[9]||(V[9]=y=>N(W)(y)),"onUpdate:minutes":V[10]||(V[10]=y=>N(W)(y,!1)),"onUpdate:seconds":V[11]||(V[11]=y=>N(W)(y,!1,!0)),onResetFlow:V[12]||(V[12]=y=>A.$emit("reset-flow")),onOverlayClosed:V[13]||(V[13]=y=>se(y,!1)),onOverlayOpened:V[14]||(V[14]=y=>se(y,!0)),onAmPmChange:V[15]||(V[15]=y=>A.$emit("am-pm-change",y))}),kn({_:2},[lt(N(oe),(y,q)=>({name:y,fn:Qe(H=>[Me(A.$slots,y,tn(Nn(H)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"]))])):ce("",!0)],64))}}),QO=(t,e)=>{const n=_e(),{defaultedMultiCalendars:r,defaultedConfig:s,defaultedHighlight:i,defaultedRange:o,propDates:a,defaultedFilters:u,defaultedMultiDates:c}=kt(t),{modelValue:d,year:f,month:p,calendars:_}=pl(t,e),{isDisabled:P}=oi(t),{selectYear:D,groupedYears:S,showYearPicker:O,isDisabled:$,toggleYearPicker:F,handleYearSelect:U,handleYear:ee}=Fb({modelValue:d,multiCalendars:r,range:o,highlight:i,calendars:_,propDates:a,month:p,year:f,filters:u,props:t,emit:e}),W=(K,z)=>[K,z].map(ne=>Fr(ne,"MMMM",{locale:t.formatLocale})).join("-"),T=ye(()=>K=>d.value?Array.isArray(d.value)?d.value.some(z=>Sv(K,z)):Sv(d.value,K):!1),b=K=>{if(o.value.enabled){if(Array.isArray(d.value)){const z=tt(K,d.value[0])||tt(K,d.value[1]);return Ga(d.value,n.value,K)&&!z}return!1}return!1},g=(K,z)=>K.quarter===Av(z)&&K.year===qe(z),w=K=>typeof i.value=="function"?i.value({quarter:Av(K),year:qe(K)}):!!i.value.quarters.find(z=>g(z,K)),R=ye(()=>K=>{const z=mt(new Date,{year:f.value(K)});return I2({start:Ya(z),end:ib(z)}).map(ne=>{const fe=wi(ne),oe=Iv(ne),be=P(ne),te=b(fe),Ee=w(fe);return{text:W(fe,oe),value:fe,active:T.value(fe),highlighted:Ee,disabled:be,isBetween:te}})}),k=K=>{up(K,d,c.value.limit),e("auto-apply",!0)},I=K=>{d.value=cp(d,K,e),Sc(d.value,e,t.autoApply,t.modelAuto)},j=K=>{d.value=K,e("auto-apply")};return{defaultedConfig:s,defaultedMultiCalendars:r,groupedYears:S,year:f,isDisabled:$,quarters:R,showYearPicker:O,modelValue:d,setHoverDate:K=>{n.value=K},selectYear:D,selectQuarter:(K,z,ne)=>{if(!ne)return _.value[z].month=et(Iv(K)),c.value.enabled?k(K):o.value.enabled?I(K):j(K)},toggleYearPicker:F,handleYearSelect:U,handleYear:ee}},XO={class:"dp--quarter-items"},JO=["data-test-id","disabled","onClick","onMouseover"],ZO=fn({compatConfig:{MODE:3},__name:"QuarterPicker",props:{...wr},emits:["update:internal-model-value","reset-flow","overlay-closed","auto-apply","range-start","range-end","overlay-toggle","update-month-year"],setup(t,{expose:e,emit:n}){const r=n,s=t,i=Vi(),o=Qn(i,"yearMode"),{defaultedMultiCalendars:a,defaultedConfig:u,groupedYears:c,year:d,isDisabled:f,quarters:p,modelValue:_,showYearPicker:P,setHoverDate:D,selectQuarter:S,toggleYearPicker:O,handleYearSelect:$,handleYear:F}=QO(s,r);return e({getSidebarProps:()=>({modelValue:_,year:d,selectQuarter:S,handleYearSelect:$,handleYear:F})}),(U,ee)=>(B(),Xe(Cc,{"multi-calendars":N(a).count,collapse:U.collapse,stretch:"","is-mobile":U.isMobile},{default:Qe(({instance:W})=>[M("div",{class:"dp-quarter-picker-wrap",style:Pn({minHeight:`${N(u).modeHeight}px`})},[U.$slots["top-extra"]?Me(U.$slots,"top-extra",{key:0,value:U.internalModelValue}):ce("",!0),M("div",null,[it(Nb,Qt(U.$props,{items:N(c)(W),instance:W,"show-year-picker":N(P)[W],year:N(d)(W),"is-disabled":T=>N(f)(W,T),onHandleYear:T=>N(F)(W,T),onYearSelect:T=>N($)(T,W),onToggleYearPicker:T=>N(O)(W,T?.flow,T?.show)}),kn({_:2},[lt(N(o),(T,b)=>({name:T,fn:Qe(g=>[Me(U.$slots,T,tn(Nn(g)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),M("div",XO,[(B(!0),X(Oe,null,lt(N(p)(W),(T,b)=>(B(),X("div",{key:b},[M("button",{type:"button",class:Ye(["dp--qr-btn",{"dp--qr-btn-active":T.active,"dp--qr-btn-between":T.isBetween,"dp--qr-btn-disabled":T.disabled,"dp--highlighted":T.highlighted}]),"data-test-id":T.value,disabled:T.disabled,onClick:g=>N(S)(T.value,W,T.disabled),onMouseover:g=>N(D)(T.value)},[U.$slots.quarter?Me(U.$slots,"quarter",{key:0,value:T.value,text:T.text}):(B(),X(Oe,{key:1},[Un($e(T.text),1)],64))],42,JO)]))),128))])],4)]),_:3},8,["multi-calendars","collapse","is-mobile"]))}}),Bb=(t,e)=>{const n=_e(0);Jt(()=>{r(),window.addEventListener("resize",r,{passive:!0})}),Zs(()=>{window.removeEventListener("resize",r)});const r=()=>{n.value=window.document.documentElement.clientWidth};return{isMobile:ye(()=>n.value<=t.value.mobileBreakpoint&&!e?!0:void 0)}},eN=["id","tabindex","role","aria-label"],tN={key:0,class:"dp--menu-load-container"},nN={key:1,class:"dp--menu-header"},rN=["data-dp-mobile"],sN={key:0,class:"dp__sidebar_left"},iN=["data-dp-mobile"],oN=["data-test-id","data-dp-mobile","onClick","onKeydown"],aN={key:2,class:"dp__sidebar_right"},lN={key:3,class:"dp__action_extra"},$v=fn({compatConfig:{MODE:3},__name:"DatepickerMenu",props:{...Rc,shadow:{type:Boolean,default:!1},openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},noOverlayFocus:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},getInputRect:{type:Function,default:()=>({})},isTextInputDate:{type:Boolean,default:!1}},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","auto-apply-invalid","date-update","invalid-date","overlay-toggle","menu-blur"],setup(t,{expose:e,emit:n}){const r=n,s=t,i=_e(null),o=ye(()=>{const{openOnTop:x,...re}=s;return{...re,isMobile:S.value,flowStep:I.value,menuWrapRef:i.value}}),{setMenuFocused:a,setShiftKey:u,control:c}=Ob(),d=Vi(),{defaultedTextInput:f,defaultedInline:p,defaultedConfig:_,defaultedUI:P,handleEventPropagation:D}=kt(s),{isMobile:S}=Bb(_,s.shadow),O=_e(null),$=_e(0),F=_e(null),U=_e(!1),ee=_e(null),W=_e(!1),T=x=>{W.value=!0,_.value.allowPreventDefault&&x.preventDefault(),Vs(x,_.value,!0)};Jt(()=>{if(!s.shadow){U.value=!0,b(),window.addEventListener("resize",b);const x=Yt(i);x&&!f.value.enabled&&!p.value.enabled&&(a(!0),be()),x&&(x.addEventListener("pointerdown",T),x.addEventListener("mousedown",T))}document.addEventListener("mousedown",ke)}),Zs(()=>{window.removeEventListener("resize",b),document.removeEventListener("mousedown",ke);const x=Yt(i);x&&(x.removeEventListener("pointerdown",T),x.removeEventListener("mousedown",T))});const b=()=>{const x=Yt(F);x&&($.value=x.getBoundingClientRect().width)},{arrowRight:g,arrowLeft:w,arrowDown:R,arrowUp:k}=ii(),{flowStep:I,updateFlowStep:j,childMount:K,resetFlow:z,handleFlow:ne}=fN(s,r,ee),fe=ye(()=>s.monthPicker?vO:s.yearPicker?_O:s.timePicker?xO:s.quarterPicker?ZO:GO),oe=ye(()=>{var x;if(_.value.arrowLeft)return _.value.arrowLeft;const re=(x=i.value)==null?void 0:x.getBoundingClientRect(),Ie=s.getInputRect();return Ie?.width<$?.value&&Ie?.left<=(re?.left??0)?`${Ie?.width/2}px`:Ie?.right>=(re?.right??0)&&Ie?.width<$?.value?`${$?.value-Ie?.width/2}px`:"50%"}),be=()=>{const x=Yt(i);x&&x.focus({preventScroll:!0})},te=ye(()=>{var x;return((x=ee.value)==null?void 0:x.getSidebarProps())||{}}),Ee=()=>{s.openOnTop&&r("recalculate-position")},L=Qn(d,"action"),Z=ye(()=>s.monthPicker||s.yearPicker?Qn(d,"monthYear"):s.timePicker?Qn(d,"timePicker"):Qn(d,"shared")),ae=ye(()=>s.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),me=ye(()=>({dp__menu_disabled:s.disabled,dp__menu_readonly:s.readonly,"dp-menu-loading":s.loading})),v=ye(()=>({dp__menu:!0,dp__menu_index:!p.value.enabled,dp__relative:p.value.enabled,...P.value.menu??{}})),J=x=>{Vs(x,_.value,!0)},Ae=x=>{s.escClose&&(r("close-picker"),D(x))},Ge=x=>{if(s.arrowNavigation){if(x===Mn.up)return k();if(x===Mn.down)return R();if(x===Mn.left)return w();if(x===Mn.right)return g()}else x===Mn.left||x===Mn.up?y("handleArrow",Mn.left,0,x===Mn.up):y("handleArrow",Mn.right,0,x===Mn.down)},se=x=>{u(x.shiftKey),!s.disableMonthYearSelect&&x.code===At.tab&&x.target.classList.contains("dp__menu")&&c.value.shiftKeyInMenu&&(x.preventDefault(),Vs(x,_.value,!0),r("close-picker"))},C=()=>{be(),r("time-picker-close")},A=x=>{var re,Ie,Se;(re=ee.value)==null||re.toggleTimePicker(!1,!1),(Ie=ee.value)==null||Ie.toggleMonthPicker(!1,!1,x),(Se=ee.value)==null||Se.toggleYearPicker(!1,!1,x)},V=(x,re=0)=>{var Ie,Se,Fe;return x==="month"?(Ie=ee.value)==null?void 0:Ie.toggleMonthPicker(!1,!0,re):x==="year"?(Se=ee.value)==null?void 0:Se.toggleYearPicker(!1,!0,re):x==="time"?(Fe=ee.value)==null?void 0:Fe.toggleTimePicker(!0,!1):A(re)},y=(x,...re)=>{var Ie,Se;(Ie=ee.value)!=null&&Ie[x]&&((Se=ee.value)==null||Se[x](...re))},q=()=>{y("selectCurrentDate")},H=(x,re)=>{y("presetDate",XT(x),re)},Q=()=>{y("clearHoverDate")},de=(x,re)=>{y("updateMonthYear",x,re)},ue=(x,re)=>{x.preventDefault(),Ge(re)},le=x=>{var re,Ie,Se;if(se(x),x.key===At.home||x.key===At.end)return y("selectWeekDate",x.key===At.home,x.target.getAttribute("id"));switch((x.key===At.pageUp||x.key===At.pageDown)&&(x.shiftKey?(y("changeYear",x.key===At.pageUp),(re=yh(i.value,"overlay-year"))==null||re.focus()):(y("changeMonth",x.key===At.pageUp),(Ie=yh(i.value,x.key===At.pageUp?"action-prev":"action-next"))==null||Ie.focus()),x.target.getAttribute("id")&&((Se=i.value)==null||Se.focus({preventScroll:!0}))),x.key){case At.esc:return Ae(x);case At.arrowLeft:return ue(x,Mn.left);case At.arrowRight:return ue(x,Mn.right);case At.arrowUp:return ue(x,Mn.up);case At.arrowDown:return ue(x,Mn.down);default:return}},ke=x=>{var re;p.value.enabled&&!p.value.input&&!((re=i.value)!=null&&re.contains(x.target))&&W.value&&(W.value=!1,r("menu-blur"))};return e({updateMonthYear:de,switchView:V,handleFlow:ne,onValueCleared:()=>{var x,re;(re=(x=ee.value)==null?void 0:x.setStartTime)==null||re.call(x)}}),(x,re)=>{var Ie,Se,Fe;return B(),X("div",{id:x.uid?`dp-menu-${x.uid}`:void 0,ref_key:"dpMenuRef",ref:i,tabindex:N(p).enabled?void 0:"0",role:N(p).enabled?void 0:"dialog","aria-label":(Ie=x.ariaLabels)==null?void 0:Ie.menu,class:Ye(v.value),style:Pn({"--dp-arrow-left":oe.value}),onMouseleave:Q,onClick:J,onKeydown:le},[(x.disabled||x.readonly)&&N(p).enabled||x.loading?(B(),X("div",{key:0,class:Ye(me.value)},[x.loading?(B(),X("div",tN,re[19]||(re[19]=[M("span",{class:"dp--menu-loader"},null,-1)]))):ce("",!0)],2)):ce("",!0),x.$slots["menu-header"]?(B(),X("div",nN,[Me(x.$slots,"menu-header")])):ce("",!0),!N(p).enabled&&!x.teleportCenter?(B(),X("div",{key:2,class:Ye(ae.value)},null,2)):ce("",!0),M("div",{ref_key:"innerMenuRef",ref:F,class:Ye({dp__menu_content_wrapper:((Se=x.presetDates)==null?void 0:Se.length)||!!x.$slots["left-sidebar"]||!!x.$slots["right-sidebar"],"dp--menu-content-wrapper-collapsed":t.collapse&&(((Fe=x.presetDates)==null?void 0:Fe.length)||!!x.$slots["left-sidebar"]||!!x.$slots["right-sidebar"])}),"data-dp-mobile":N(S),style:Pn({"--dp-menu-width":`${$.value}px`})},[x.$slots["left-sidebar"]?(B(),X("div",sN,[Me(x.$slots,"left-sidebar",tn(Nn(te.value)))])):ce("",!0),x.presetDates.length?(B(),X("div",{key:1,class:Ye({"dp--preset-dates-collapsed":t.collapse,"dp--preset-dates":!0}),"data-dp-mobile":N(S)},[(B(!0),X(Oe,null,lt(x.presetDates,(we,Ze)=>(B(),X(Oe,{key:Ze},[we.slot?Me(x.$slots,we.slot,{key:0,presetDate:H,label:we.label,value:we.value}):(B(),X("button",{key:1,type:"button",style:Pn(we.style||{}),class:Ye(["dp__btn dp--preset-range",{"dp--preset-range-collapsed":t.collapse}]),"data-test-id":we.testId??void 0,"data-dp-mobile":N(S),onClick:Bt(pt=>H(we.value,we.noTz),["prevent"]),onKeydown:pt=>N(Vn)(pt,()=>H(we.value,we.noTz),!0)},$e(we.label),47,oN))],64))),128))],10,iN)):ce("",!0),M("div",{ref_key:"calendarWrapperRef",ref:O,class:"dp__instance_calendar",role:"document"},[(B(),Xe(Ju(fe.value),Qt({ref_key:"dynCmpRef",ref:ee},o.value,{"flow-step":N(I),onMount:N(K),onUpdateFlowStep:N(j),onResetFlow:N(z),onFocusMenu:be,onSelectDate:re[0]||(re[0]=we=>x.$emit("select-date")),onDateUpdate:re[1]||(re[1]=we=>x.$emit("date-update",we)),onTooltipOpen:re[2]||(re[2]=we=>x.$emit("tooltip-open",we)),onTooltipClose:re[3]||(re[3]=we=>x.$emit("tooltip-close",we)),onAutoApply:re[4]||(re[4]=we=>x.$emit("auto-apply",we)),onRangeStart:re[5]||(re[5]=we=>x.$emit("range-start",we)),onRangeEnd:re[6]||(re[6]=we=>x.$emit("range-end",we)),onInvalidFixedRange:re[7]||(re[7]=we=>x.$emit("invalid-fixed-range",we)),onTimeUpdate:re[8]||(re[8]=we=>x.$emit("time-update")),onAmPmChange:re[9]||(re[9]=we=>x.$emit("am-pm-change",we)),onTimePickerOpen:re[10]||(re[10]=we=>x.$emit("time-picker-open",we)),onTimePickerClose:C,onRecalculatePosition:Ee,onUpdateMonthYear:re[11]||(re[11]=we=>x.$emit("update-month-year",we)),onAutoApplyInvalid:re[12]||(re[12]=we=>x.$emit("auto-apply-invalid",we)),onInvalidDate:re[13]||(re[13]=we=>x.$emit("invalid-date",we)),onOverlayToggle:re[14]||(re[14]=we=>x.$emit("overlay-toggle",we)),"onUpdate:internalModelValue":re[15]||(re[15]=we=>x.$emit("update:internal-model-value",we))}),kn({_:2},[lt(Z.value,(we,Ze)=>({name:we,fn:Qe(pt=>[Me(x.$slots,we,tn(Nn({...pt})))])}))]),1040,["flow-step","onMount","onUpdateFlowStep","onResetFlow"]))],512),x.$slots["right-sidebar"]?(B(),X("div",aN,[Me(x.$slots,"right-sidebar",tn(Nn(te.value)))])):ce("",!0),x.$slots["action-extra"]?(B(),X("div",lN,[x.$slots["action-extra"]?Me(x.$slots,"action-extra",{key:0,selectCurrentDate:q}):ce("",!0)])):ce("",!0)],14,rN),!x.autoApply||N(_).keepActionRow?(B(),Xe(lO,Qt({key:3,"menu-mount":U.value},o.value,{"calendar-width":$.value,onClosePicker:re[16]||(re[16]=we=>x.$emit("close-picker")),onSelectDate:re[17]||(re[17]=we=>x.$emit("select-date")),onInvalidSelect:re[18]||(re[18]=we=>x.$emit("invalid-select")),onSelectNow:q}),kn({_:2},[lt(N(L),(we,Ze)=>({name:we,fn:Qe(pt=>[Me(x.$slots,we,tn(Nn({...pt})))])}))]),1040,["menu-mount","calendar-width"])):ce("",!0)],46,eN)}}});var no=(t=>(t.center="center",t.left="left",t.right="right",t))(no||{});const uN=({menuRef:t,menuRefInner:e,inputRef:n,pickerWrapperRef:r,inline:s,emit:i,props:o,slots:a})=>{const{defaultedConfig:u}=kt(o),c=_e({}),d=_e(!1),f=_e({top:"0",left:"0"}),p=_e(!1),_=Sa(o,"teleportCenter");Ln(_,()=>{f.value=JSON.parse(JSON.stringify({})),ee()});const P=z=>{if(o.teleport){const ne=z.getBoundingClientRect();return{left:ne.left+window.scrollX,top:ne.top+window.scrollY}}return{top:0,left:0}},D=(z,ne)=>{f.value.left=`${z+ne-c.value.width}px`},S=z=>{f.value.left=`${z}px`},O=(z,ne)=>{o.position===no.left&&S(z),o.position===no.right&&D(z,ne),o.position===no.center&&(f.value.left=`${z+ne/2-c.value.width/2}px`)},$=z=>{const{width:ne,height:fe}=z.getBoundingClientRect(),{top:oe,left:be}=P(z);return{top:+oe,left:+be,width:ne,height:fe}},F=()=>{f.value.left="50%",f.value.top="50%",f.value.transform="translate(-50%, -50%)",f.value.position="fixed",delete f.value.opacity},U=()=>{const z=Yt(n);f.value=o.altPosition(z)},ee=(z=!0)=>{var ne;if(!s.value.enabled){if(_.value)return F();if(o.altPosition!==null)return U();if(z){const fe=o.teleport?(ne=e.value)==null?void 0:ne.$el:t.value;fe&&(c.value=fe.getBoundingClientRect()),i("recalculate-position")}return k()}},W=({inputEl:z,left:ne,width:fe})=>{window.screen.width>768&&!d.value&&O(ne,fe),g(z)},T=z=>{const{top:ne,left:fe,height:oe,width:be}=$(z);f.value.top=`${oe+ne+ +o.offset}px`,p.value=!1,d.value||(f.value.left=`${fe+be/2-c.value.width/2}px`),W({inputEl:z,left:fe,width:be})},b=z=>{const{top:ne,left:fe,width:oe}=$(z);f.value.top=`${ne-+o.offset-c.value.height}px`,p.value=!0,W({inputEl:z,left:fe,width:oe})},g=z=>{if(o.autoPosition){const{left:ne,width:fe}=$(z),{left:oe,right:be}=c.value;if(!d.value){if(Math.abs(oe)!==Math.abs(be)){if(oe<=0)return d.value=!0,S(ne);if(be>=document.documentElement.clientWidth)return d.value=!0,D(ne,fe)}return O(ne,fe)}}},w=()=>{const z=Yt(n);if(z){if(o.autoPosition===ur.top)return ur.top;if(o.autoPosition===ur.bottom)return ur.bottom;const{height:ne}=c.value,{top:fe,height:oe}=z.getBoundingClientRect(),be=window.innerHeight-fe-oe,te=fe;return ne<=be?ur.bottom:ne>be&&ne<=te?ur.top:be>=te?ur.bottom:ur.top}return ur.bottom},R=z=>w()===ur.bottom?T(z):b(z),k=()=>{const z=Yt(n);if(z)return o.autoPosition?R(z):T(z)},I=function(z){if(z){const ne=z.scrollHeight>z.clientHeight,fe=window.getComputedStyle(z).overflowY.indexOf("hidden")!==-1;return ne&&!fe}return!0},j=function(z){return!z||z===document.body||z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:I(z)?z:j(z.assignedSlot&&u.value.shadowDom?z.assignedSlot.parentNode:z.parentNode)},K=z=>{if(z)switch(o.position){case no.left:return{left:0,transform:"translateX(0)"};case no.right:return{left:`${z.width}px`,transform:"translateX(-100%)"};default:return{left:`${z.width/2}px`,transform:"translateX(-50%)"}}return{}};return{openOnTop:p,menuStyle:f,xCorrect:d,setMenuPosition:ee,getScrollableParent:j,shadowRender:(z,ne,fe)=>{var oe,be,te;const Ee=document.createElement("div"),L=(oe=Yt(n))==null?void 0:oe.getBoundingClientRect();Ee.setAttribute("id","dp--temp-container");const Z=(be=r.value)!=null&&be.clientWidth?r.value:document.body;Z.append(Ee);const ae=K(L),me=u.value.shadowDom?Object.keys(a).filter(J=>["right-sidebar","left-sidebar","top-extra","action-extra"].includes(J)):Object.keys(a),v=t_(ne,{...fe,shadow:!0,style:{opacity:0,position:"absolute",...ae}},Object.fromEntries(me.map(J=>[J,a[J]])));z!=null&&(v.appContext=z.appContext),Fm(v,Ee),c.value=(te=v.el)==null?void 0:te.getBoundingClientRect(),Fm(null,Ee),Z.removeChild(Ee)}}},_s=[{name:"clock-icon",use:["time","calendar","shared"]},{name:"arrow-left",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-right",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-up",use:["time","calendar","month-year","shared"]},{name:"arrow-down",use:["time","calendar","month-year","shared"]},{name:"calendar-icon",use:["month-year","time","calendar","shared","year-mode"]},{name:"day",use:["calendar","shared"]},{name:"month-overlay-value",use:["calendar","month-year","shared"]},{name:"year-overlay-value",use:["calendar","month-year","shared","year-mode"]},{name:"year-overlay",use:["month-year","shared"]},{name:"month-overlay",use:["month-year","shared"]},{name:"month-overlay-header",use:["month-year","shared"]},{name:"year-overlay-header",use:["month-year","shared"]},{name:"hours-overlay-value",use:["calendar","time","shared"]},{name:"hours-overlay-header",use:["calendar","time","shared"]},{name:"minutes-overlay-value",use:["calendar","time","shared"]},{name:"minutes-overlay-header",use:["calendar","time","shared"]},{name:"seconds-overlay-value",use:["calendar","time","shared"]},{name:"seconds-overlay-header",use:["calendar","time","shared"]},{name:"hours",use:["calendar","time","shared"]},{name:"minutes",use:["calendar","time","shared"]},{name:"month",use:["calendar","month-year","shared"]},{name:"year",use:["calendar","month-year","shared","year-mode"]},{name:"action-buttons",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar","shared"]},{name:"marker-tooltip",use:["calendar","shared"]},{name:"action-extra",use:["menu"]},{name:"time-picker-overlay",use:["calendar","time","shared"]},{name:"am-pm-button",use:["calendar","time","shared"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year","shared"]},{name:"time-picker",use:["menu","shared"]},{name:"action-row",use:["action"]},{name:"marker",use:["calendar","shared"]},{name:"quarter",use:["shared"]},{name:"top-extra",use:["shared","month-year"]},{name:"tp-inline-arrow-up",use:["shared","time"]},{name:"tp-inline-arrow-down",use:["shared","time"]},{name:"menu-header",use:["menu"]}],cN=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],dN={all:()=>_s,monthYear:()=>_s.filter(t=>t.use.includes("month-year")),input:()=>cN,timePicker:()=>_s.filter(t=>t.use.includes("time")),action:()=>_s.filter(t=>t.use.includes("action")),calendar:()=>_s.filter(t=>t.use.includes("calendar")),menu:()=>_s.filter(t=>t.use.includes("menu")),shared:()=>_s.filter(t=>t.use.includes("shared")),yearMode:()=>_s.filter(t=>t.use.includes("year-mode"))},Qn=(t,e,n)=>{const r=[];return dN[e]().forEach(s=>{t[s.name]&&r.push(s.name)}),n!=null&&n.length&&n.forEach(s=>{s.slot&&r.push(s.slot)}),r},fl=t=>{const e=ye(()=>r=>t.value?r?t.value.open:t.value.close:""),n=ye(()=>r=>t.value?r?t.value.menuAppearTop:t.value.menuAppearBottom:"");return{transitionName:e,showTransition:!!t.value,menuTransition:n}},pl=(t,e,n)=>{const{defaultedRange:r,defaultedTz:s}=kt(t),i=ve(Hn(ve(),s.value.timezone)),o=_e([{month:et(i),year:qe(i)}]),a=p=>{const _={hours:us(i),minutes:Qs(i),seconds:0};return r.value.enabled?[_[p],_[p]]:_[p]},u=Js({hours:a("hours"),minutes:a("minutes"),seconds:a("seconds")});Ln(r,(p,_)=>{p.enabled!==_.enabled&&(u.hours=a("hours"),u.minutes=a("minutes"),u.seconds=a("seconds"))},{deep:!0});const c=ye({get:()=>t.internalModelValue,set:p=>{!t.readonly&&!t.disabled&&e("update:internal-model-value",p)}}),d=ye(()=>p=>o.value[p]?o.value[p].month:0),f=ye(()=>p=>o.value[p]?o.value[p].year:0);return Ln(c,(p,_)=>{n&&JSON.stringify(p??{})!==JSON.stringify(_??{})&&n()},{deep:!0}),{calendars:o,time:u,modelValue:c,month:d,year:f,today:i}},hN=(t,e)=>{const{defaultedMultiCalendars:n,defaultedMultiDates:r,defaultedUI:s,defaultedHighlight:i,defaultedTz:o,propDates:a,defaultedRange:u}=kt(e),{isDisabled:c}=oi(e),d=_e(null),f=_e(Hn(new Date,o.value.timezone)),p=v=>{!v.current&&e.hideOffsetDates||(d.value=v.value)},_=()=>{d.value=null},P=v=>Array.isArray(t.value)&&u.value.enabled&&t.value[0]&&d.value?v?Ut(d.value,t.value[0]):Dt(d.value,t.value[0]):!0,D=(v,J)=>{const Ae=()=>t.value?J?t.value[0]||null:t.value[1]:null,Ge=t.value&&Array.isArray(t.value)?Ae():null;return tt(ve(v.value),Ge)},S=v=>{const J=Array.isArray(t.value)?t.value[0]:null;return v?!Dt(d.value??null,J):!0},O=(v,J=!0)=>(u.value.enabled||e.weekPicker)&&Array.isArray(t.value)&&t.value.length===2?e.hideOffsetDates&&!v.current?!1:tt(ve(v.value),t.value[J?0:1]):u.value.enabled?D(v,J)&&S(J)||tt(v.value,Array.isArray(t.value)?t.value[0]:null)&&P(J):!1,$=(v,J)=>{if(Array.isArray(t.value)&&t.value[0]&&t.value.length===1){const Ae=tt(v.value,d.value);return J?Ut(t.value[0],v.value)&&Ae:Dt(t.value[0],v.value)&&Ae}return!1},F=v=>!t.value||e.hideOffsetDates&&!v.current?!1:u.value.enabled?e.modelAuto&&Array.isArray(t.value)?tt(v.value,t.value[0]?t.value[0]:f.value):!1:r.value.enabled&&Array.isArray(t.value)?t.value.some(J=>tt(J,v.value)):tt(v.value,t.value?t.value:f.value),U=v=>{if(u.value.autoRange||e.weekPicker){if(d.value){if(e.hideOffsetDates&&!v.current)return!1;const J=tr(d.value,+u.value.autoRange),Ae=Yr(ve(d.value),e.weekStart);return e.weekPicker?tt(Ae[1],ve(v.value)):tt(J,ve(v.value))}return!1}return!1},ee=v=>{if(u.value.autoRange||e.weekPicker){if(d.value){const J=tr(d.value,+u.value.autoRange);if(e.hideOffsetDates&&!v.current)return!1;const Ae=Yr(ve(d.value),e.weekStart);return e.weekPicker?Ut(v.value,Ae[0])&&Dt(v.value,Ae[1]):Ut(v.value,d.value)&&Dt(v.value,J)}return!1}return!1},W=v=>{if(u.value.autoRange||e.weekPicker){if(d.value){if(e.hideOffsetDates&&!v.current)return!1;const J=Yr(ve(d.value),e.weekStart);return e.weekPicker?tt(J[0],v.value):tt(d.value,v.value)}return!1}return!1},T=v=>Ga(t.value,d.value,v.value),b=()=>e.modelAuto&&Array.isArray(e.internalModelValue)?!!e.internalModelValue[0]:!1,g=()=>e.modelAuto?Tb(e.internalModelValue):!0,w=v=>{if(e.weekPicker)return!1;const J=u.value.enabled?!O(v)&&!O(v,!1):!0;return!c(v.value)&&!F(v)&&!(!v.current&&e.hideOffsetDates)&&J},R=v=>u.value.enabled?e.modelAuto?b()&&F(v):!1:F(v),k=v=>i.value?Dx(v.value,a.value.highlight):!1,I=v=>{const J=c(v.value);return J&&(typeof i.value=="function"?!i.value(v.value,J):!i.value.options.highlightDisabled)},j=v=>{var J;return typeof i.value=="function"?i.value(v.value):(J=i.value.weekdays)==null?void 0:J.includes(v.value.getDay())},K=v=>(u.value.enabled||e.weekPicker)&&(!(n.value.count>0)||v.current)&&g()&&!(!v.current&&e.hideOffsetDates)&&!F(v)?T(v):!1,z=v=>{if(Array.isArray(t.value)&&t.value.length===1){const{before:J,after:Ae}=Vv(+u.value.maxRange,t.value[0]);return Ro(v.value,J)||Ni(v.value,Ae)}return!1},ne=v=>{if(Array.isArray(t.value)&&t.value.length===1){const{before:J,after:Ae}=Vv(+u.value.minRange,t.value[0]);return Ga([J,Ae],t.value[0],v.value)}return!1},fe=v=>u.value.enabled&&(u.value.maxRange||u.value.minRange)?u.value.maxRange&&u.value.minRange?z(v)||ne(v):u.value.maxRange?z(v):ne(v):!1,oe=v=>{const{isRangeStart:J,isRangeEnd:Ae}=L(v),Ge=u.value.enabled?J||Ae:!1;return{dp__cell_offset:!v.current,dp__pointer:!e.disabled&&!(!v.current&&e.hideOffsetDates)&&!c(v.value)&&!fe(v),dp__cell_disabled:c(v.value)||fe(v),dp__cell_highlight:!I(v)&&(k(v)||j(v))&&!R(v)&&!Ge&&!W(v)&&!(K(v)&&e.weekPicker)&&!Ae,dp__cell_highlight_active:!I(v)&&(k(v)||j(v))&&R(v),dp__today:!e.noToday&&tt(v.value,f.value)&&v.current,"dp--past":Dt(v.value,f.value),"dp--future":Ut(v.value,f.value)}},be=v=>({dp__active_date:R(v),dp__date_hover:w(v)}),te=v=>{if(t.value&&!Array.isArray(t.value)){const J=Yr(t.value,e.weekStart);return{...ae(v),dp__range_start:tt(J[0],v.value),dp__range_end:tt(J[1],v.value),dp__range_between_week:Ut(v.value,J[0])&&Dt(v.value,J[1])}}return{...ae(v)}},Ee=v=>{if(t.value&&Array.isArray(t.value)){const J=Yr(t.value[0],e.weekStart),Ae=t.value[1]?Yr(t.value[1],e.weekStart):[];return{...ae(v),dp__range_start:tt(J[0],v.value)||tt(Ae[0],v.value),dp__range_end:tt(J[1],v.value)||tt(Ae[1],v.value),dp__range_between_week:Ut(v.value,J[0])&&Dt(v.value,J[1])||Ut(v.value,Ae[0])&&Dt(v.value,Ae[1]),dp__range_between:Ut(v.value,J[1])&&Dt(v.value,Ae[0])}}return{...ae(v)}},L=v=>{const J=n.value.count>0?v.current&&O(v)&&g():O(v)&&g(),Ae=n.value.count>0?v.current&&O(v,!1)&&g():O(v,!1)&&g();return{isRangeStart:J,isRangeEnd:Ae}},Z=v=>{const{isRangeStart:J,isRangeEnd:Ae}=L(v);return{dp__range_start:J,dp__range_end:Ae,dp__range_between:K(v),dp__date_hover:tt(v.value,d.value)&&!J&&!Ae&&!e.weekPicker,dp__date_hover_start:$(v,!0),dp__date_hover_end:$(v,!1)}},ae=v=>({...Z(v),dp__cell_auto_range:ee(v),dp__cell_auto_range_start:W(v),dp__cell_auto_range_end:U(v)}),me=v=>u.value.enabled?u.value.autoRange?ae(v):e.modelAuto?{...be(v),...Z(v)}:e.weekPicker?Ee(v):Z(v):e.weekPicker?te(v):be(v);return{setHoverDate:p,clearHoverDate:_,getDayClassData:v=>e.hideOffsetDates&&!v.current?{}:{...oe(v),...me(v),[e.dayClass?e.dayClass(v.value,e.internalModelValue):""]:!0,...s.value.calendarCell??{}}}},oi=t=>{const{defaultedFilters:e,defaultedRange:n,propDates:r,defaultedMultiDates:s}=kt(t),i=j=>r.value.disabledDates?typeof r.value.disabledDates=="function"?r.value.disabledDates(ve(j)):!!qu(j,r.value.disabledDates):!1,o=j=>r.value.maxDate?t.yearPicker?qe(j)>qe(r.value.maxDate):Ut(j,r.value.maxDate):!1,a=j=>r.value.minDate?t.yearPicker?qe(j)<qe(r.value.minDate):Dt(j,r.value.minDate):!1,u=j=>{const K=o(j),z=a(j),ne=i(j),fe=e.value.months.map(L=>+L).includes(et(j)),oe=t.disabledWeekDays.length?t.disabledWeekDays.some(L=>+L===yM(j)):!1,be=_(j),te=qe(j),Ee=te<+t.yearRange[0]||te>+t.yearRange[1];return!(K||z||ne||fe||Ee||oe||be)},c=(j,K)=>Dt(...Ss(r.value.minDate,j,K))||tt(...Ss(r.value.minDate,j,K)),d=(j,K)=>Ut(...Ss(r.value.maxDate,j,K))||tt(...Ss(r.value.maxDate,j,K)),f=(j,K,z)=>{let ne=!1;return r.value.maxDate&&z&&d(j,K)&&(ne=!0),r.value.minDate&&!z&&c(j,K)&&(ne=!0),ne},p=(j,K,z,ne)=>{let fe=!1;return ne&&(r.value.minDate||r.value.maxDate)?r.value.minDate&&r.value.maxDate?fe=f(j,K,z):(r.value.minDate&&c(j,K)||r.value.maxDate&&d(j,K))&&(fe=!0):fe=!0,fe},_=j=>Array.isArray(r.value.allowedDates)&&!r.value.allowedDates.length?!0:r.value.allowedDates?!qu(j,r.value.allowedDates,Ib(t.monthPicker,t.yearPicker)):!1,P=j=>!u(j),D=j=>n.value.noDisabledRange?!sb({start:j[0],end:j[1]}).some(K=>P(K)):!0,S=j=>{if(j){const K=qe(j);return K>=+t.yearRange[0]&&K<=t.yearRange[1]}return!0},O=(j,K)=>!!(Array.isArray(j)&&j[K]&&(n.value.maxRange||n.value.minRange)&&S(j[K])),$=(j,K,z=0)=>{if(O(K,z)&&S(j)){const ne=tb(j,K[z]),fe=Cb(K[z],j),oe=fe.length===1?0:fe.filter(te=>P(te)).length,be=Math.abs(ne)-(n.value.minMaxRawRange?0:oe);if(n.value.minRange&&n.value.maxRange)return be>=+n.value.minRange&&be<=+n.value.maxRange;if(n.value.minRange)return be>=+n.value.minRange;if(n.value.maxRange)return be<=+n.value.maxRange}return!0},F=()=>!t.enableTimePicker||t.monthPicker||t.yearPicker||t.ignoreTimeValidation,U=j=>Array.isArray(j)?[j[0]?wd(j[0]):null,j[1]?wd(j[1]):null]:wd(j),ee=(j,K,z)=>j.find(ne=>+ne.hours===us(K)&&ne.minutes==="*"?!0:+ne.minutes===Qs(K)&&+ne.hours===us(K))&&z,W=(j,K,z)=>{const[ne,fe]=j,[oe,be]=K;return!ee(ne,oe,z)&&!ee(fe,be,z)&&z},T=(j,K)=>{const z=Array.isArray(K)?K:[K];return Array.isArray(t.disabledTimes)?Array.isArray(t.disabledTimes[0])?W(t.disabledTimes,z,j):!z.some(ne=>ee(t.disabledTimes,ne,j)):j},b=(j,K)=>{const z=Array.isArray(K)?[Pi(K[0]),K[1]?Pi(K[1]):void 0]:Pi(K),ne=!t.disabledTimes(z);return j&&ne},g=(j,K)=>t.disabledTimes?Array.isArray(t.disabledTimes)?T(K,j):b(K,j):K,w=j=>{let K=!0;if(!j||F())return!0;const z=!r.value.minDate&&!r.value.maxDate?U(j):j;return(t.maxTime||r.value.maxDate)&&(K=Nv(t.maxTime,r.value.maxDate,"max",Zt(z),K)),(t.minTime||r.value.minDate)&&(K=Nv(t.minTime,r.value.minDate,"min",Zt(z),K)),g(j,K)},R=j=>{if(!t.monthPicker)return!0;let K=!0;const z=ve(cr(j));if(r.value.minDate&&r.value.maxDate){const ne=ve(cr(r.value.minDate)),fe=ve(cr(r.value.maxDate));return Ut(z,ne)&&Dt(z,fe)||tt(z,ne)||tt(z,fe)}if(r.value.minDate){const ne=ve(cr(r.value.minDate));K=Ut(z,ne)||tt(z,ne)}if(r.value.maxDate){const ne=ve(cr(r.value.maxDate));K=Dt(z,ne)||tt(z,ne)}return K},k=ye(()=>j=>!t.enableTimePicker||t.ignoreTimeValidation?!0:w(j)),I=ye(()=>j=>t.monthPicker?Array.isArray(j)&&(n.value.enabled||s.value.enabled)?!j.filter(K=>!R(K)).length:R(j):!0);return{isDisabled:P,validateDate:u,validateMonthYearInRange:p,isDateRangeAllowed:D,checkMinMaxRange:$,isValidTime:w,isTimeValid:k,isMonthValid:I}},Dc=()=>{const t=ye(()=>(r,s)=>r?.includes(s)),e=ye(()=>(r,s)=>r.count?r.solo?!0:s===0:!0),n=ye(()=>(r,s)=>r.count?r.solo?!0:s===r.count-1:!0);return{hideNavigationButtons:t,showLeftIcon:e,showRightIcon:n}},fN=(t,e,n)=>{const r=_e(0),s=Js({[Ii.timePicker]:!t.enableTimePicker||t.timePicker||t.monthPicker,[Ii.calendar]:!1,[Ii.header]:!1}),i=ye(()=>t.monthPicker||t.timePicker),o=f=>{var p;if((p=t.flow)!=null&&p.length){if(!f&&i.value)return d();s[f]=!0,Object.keys(s).filter(_=>!s[_]).length||d()}},a=()=>{var f,p;(f=t.flow)!=null&&f.length&&r.value!==-1&&(r.value+=1,e("flow-step",r.value),d()),((p=t.flow)==null?void 0:p.length)===r.value&&Fn().then(()=>u())},u=()=>{r.value=-1},c=(f,p,..._)=>{var P,D;t.flow[r.value]===f&&n.value&&((D=(P=n.value)[p])==null||D.call(P,..._))},d=(f=0)=>{f&&(r.value+=f),c(Tn.month,"toggleMonthPicker",!0),c(Tn.year,"toggleYearPicker",!0),c(Tn.calendar,"toggleTimePicker",!1,!0),c(Tn.time,"toggleTimePicker",!0,!0);const p=t.flow[r.value];(p===Tn.hours||p===Tn.minutes||p===Tn.seconds)&&c(p,"toggleTimePicker",!0,!0,p)};return{childMount:o,updateFlowStep:a,resetFlow:u,handleFlow:d,flowStep:r}},pN={key:1,class:"dp__input_wrap"},mN=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","aria-label","aria-disabled","aria-invalid"],gN={key:2,class:"dp--clear-btn"},vN=["aria-label"],yN=fn({compatConfig:{MODE:3},__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...Rc},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur","real-blur","text-input"],setup(t,{expose:e,emit:n}){const r=n,s=t,{defaultedTextInput:i,defaultedAriaLabels:o,defaultedInline:a,defaultedConfig:u,defaultedRange:c,defaultedMultiDates:d,defaultedUI:f,getDefaultPattern:p,getDefaultStartTime:_}=kt(s),{checkMinMaxRange:P}=oi(s),D=_e(),S=_e(null),O=_e(!1),$=_e(!1),F=ye(()=>({dp__pointer:!s.disabled&&!s.readonly&&!i.value.enabled,dp__disabled:s.disabled,dp__input_readonly:!i.value.enabled,dp__input:!0,dp__input_icon_pad:!s.hideInputIcon,dp__input_valid:typeof s.state=="boolean"?s.state:!1,dp__input_invalid:typeof s.state=="boolean"?!s.state:!1,dp__input_focus:O.value||s.isMenuOpen,dp__input_reg:!i.value.enabled,...f.value.input??{}})),U=()=>{r("set-input-date",null),s.clearable&&s.autoApply&&(r("set-empty-date"),D.value=null)},ee=te=>{const Ee=_();return xx(te,i.value.format??p(),Ee??Sb({},s.enableSeconds),s.inputValue,$.value,s.formatLocale)},W=te=>{const{rangeSeparator:Ee}=i.value,[L,Z]=te.split(`${Ee}`);if(L){const ae=ee(L.trim()),me=Z?ee(Z.trim()):void 0;if(Ni(ae,me))return;const v=ae&&me?[ae,me]:[ae];P(me,v,0)&&(D.value=ae?v:null)}},T=()=>{$.value=!0},b=te=>{if(c.value.enabled)W(te);else if(d.value.enabled){const Ee=te.split(";");D.value=Ee.map(L=>ee(L.trim())).filter(L=>L)}else D.value=ee(te)},g=te=>{var Ee;const L=typeof te=="string"?te:(Ee=te.target)==null?void 0:Ee.value;L!==""?(i.value.openMenu&&!s.isMenuOpen&&r("open"),b(L),r("set-input-date",D.value)):U(),$.value=!1,r("update:input-value",L),r("text-input",te,D.value)},w=te=>{i.value.enabled?(b(te.target.value),i.value.enterSubmit&&_h(D.value)&&s.inputValue!==""?(r("set-input-date",D.value,!0),D.value=null):i.value.enterSubmit&&s.inputValue===""&&(D.value=null,r("clear"))):I(te)},R=(te,Ee)=>{i.value.enabled&&i.value.tabSubmit&&!Ee&&b(te.target.value),i.value.tabSubmit&&_h(D.value)&&s.inputValue!==""?(r("set-input-date",D.value,!0,!0),D.value=null):i.value.tabSubmit&&s.inputValue===""&&(D.value=null,r("clear",!0))},k=()=>{O.value=!0,r("focus"),Fn().then(()=>{var te;i.value.enabled&&i.value.selectOnFocus&&((te=S.value)==null||te.select())})},I=te=>{if(Vs(te,u.value,!0),i.value.enabled&&i.value.openMenu&&!a.value.input){if(i.value.openMenu==="open"&&!s.isMenuOpen)return r("open");if(i.value.openMenu==="toggle")return r("toggle")}else i.value.enabled||r("toggle")},j=()=>{r("real-blur"),O.value=!1,(!s.isMenuOpen||a.value.enabled&&a.value.input)&&r("blur"),s.autoApply&&i.value.enabled&&D.value&&!s.isMenuOpen&&(r("set-input-date",D.value),r("select-date"),D.value=null)},K=te=>{Vs(te,u.value,!0),r("clear")},z=()=>{r("close")},ne=te=>{if(te.key==="Tab"&&R(te),te.key==="Enter"&&w(te),te.key==="Escape"&&i.value.escClose&&z(),!i.value.enabled){if(te.code==="Tab")return;te.preventDefault()}},fe=()=>{var te;(te=S.value)==null||te.focus({preventScroll:!0})},oe=te=>{D.value=te},be=te=>{te.key===At.tab&&R(te,!0)};return e({focusInput:fe,setParsedDate:oe}),(te,Ee)=>{var L,Z,ae;return B(),X("div",{onClick:I},[te.$slots.trigger&&!te.$slots["dp-input"]&&!N(a).enabled?Me(te.$slots,"trigger",{key:0}):ce("",!0),!te.$slots.trigger&&(!N(a).enabled||N(a).input)?(B(),X("div",pN,[te.$slots["dp-input"]&&!te.$slots.trigger&&(!N(a).enabled||N(a).enabled&&N(a).input)?Me(te.$slots,"dp-input",{key:0,value:t.inputValue,isMenuOpen:t.isMenuOpen,onInput:g,onEnter:w,onTab:R,onClear:K,onBlur:j,onKeypress:ne,onPaste:T,onFocus:k,openMenu:()=>te.$emit("open"),closeMenu:()=>te.$emit("close"),toggleMenu:()=>te.$emit("toggle")}):ce("",!0),te.$slots["dp-input"]?ce("",!0):(B(),X("input",{key:1,id:te.uid?`dp-input-${te.uid}`:void 0,ref_key:"inputRef",ref:S,"data-test-id":"dp-input",name:te.name,class:Ye(F.value),inputmode:N(i).enabled?"text":"none",placeholder:te.placeholder,disabled:te.disabled,readonly:te.readonly,required:te.required,value:t.inputValue,autocomplete:te.autocomplete,"aria-label":(L=N(o))==null?void 0:L.input,"aria-disabled":te.disabled||void 0,"aria-invalid":te.state===!1?!0:void 0,onInput:g,onBlur:j,onFocus:k,onKeypress:ne,onKeydown:Ee[0]||(Ee[0]=me=>ne(me)),onPaste:T},null,42,mN)),M("div",{onClick:Ee[3]||(Ee[3]=me=>r("toggle"))},[te.$slots["input-icon"]&&!te.hideInputIcon?(B(),X("span",{key:0,class:"dp__input_icon",onClick:Ee[1]||(Ee[1]=me=>r("toggle"))},[Me(te.$slots,"input-icon")])):ce("",!0),!te.$slots["input-icon"]&&!te.hideInputIcon&&!te.$slots["dp-input"]?(B(),Xe(N(Bo),{key:1,"aria-label":(Z=N(o))==null?void 0:Z.calendarIcon,class:"dp__input_icon dp__input_icons",onClick:Ee[2]||(Ee[2]=me=>r("toggle"))},null,8,["aria-label"])):ce("",!0)]),te.$slots["clear-icon"]&&(te.alwaysClearable||t.inputValue&&te.clearable&&!te.disabled&&!te.readonly)?(B(),X("span",gN,[Me(te.$slots,"clear-icon",{clear:K})])):ce("",!0),!te.$slots["clear-icon"]&&(te.alwaysClearable||te.clearable&&t.inputValue&&!te.disabled&&!te.readonly)?(B(),X("button",{key:3,"aria-label":(ae=N(o))==null?void 0:ae.clearInput,class:"dp--clear-btn",type:"button",onKeydown:Ee[4]||(Ee[4]=me=>N(Vn)(me,()=>K(me),!0,be)),onClick:Ee[5]||(Ee[5]=Bt(me=>K(me),["prevent"]))},[it(N(wb),{class:"dp__input_icons","data-test-id":"clear-icon"})],40,vN)):ce("",!0)])):ce("",!0)])}}}),_N=typeof window<"u"?window:void 0,Pd=()=>{},wN=t=>Yv()?(kT(t),!0):!1,bN=(t,e,n,r)=>{if(!t)return Pd;let s=Pd;const i=Ln(()=>N(t),a=>{s(),a&&(a.removeEventListener(e,n),a.addEventListener(e,n,r),s=()=>{a.removeEventListener(e,n,r),s=Pd})},{immediate:!0,flush:"post"}),o=()=>{i(),s()};return wN(o),o},TN=(t,e,n,r={})=>{const{window:s=_N,event:i="pointerdown"}=r;return s?bN(s,i,o=>{const a=Yt(t),u=Yt(e);!a||!u||a===o.target||o.composedPath().includes(a)||o.composedPath().includes(u)||n(o)},{passive:!0}):void 0},EN=["data-dp-mobile"],AN=fn({compatConfig:{MODE:3},__name:"VueDatePicker",props:{...Rc},emits:["update:model-value","update:model-timezone-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","date-update","invalid-date","overlay-toggle","text-input"],setup(t,{expose:e,emit:n}){const r=n,s=t,i=Vi(),o=_e(!1),a=Sa(s,"modelValue"),u=Sa(s,"timezone"),c=_e(null),d=_e(null),f=_e(null),p=_e(!1),_=_e(null),P=_e(!1),D=_e(!1),S=_e(!1),O=_e(!1),{setMenuFocused:$,setShiftKey:F}=Ob(),{clearArrowNav:U}=ii(),{validateDate:ee,isValidTime:W}=oi(s),{defaultedTransitions:T,defaultedTextInput:b,defaultedInline:g,defaultedConfig:w,defaultedRange:R,defaultedMultiDates:k}=kt(s),{menuTransition:I,showTransition:j}=fl(T),{isMobile:K}=Bb(w),z=Fh();Jt(()=>{v(s.modelValue),Fn().then(()=>{if(!g.value.enabled){const pe=L(_.value);pe?.addEventListener("scroll",H),window?.addEventListener("resize",Q)}}),g.value.enabled&&(o.value=!0),window?.addEventListener("keyup",de),window?.addEventListener("keydown",ue)}),Zs(()=>{if(!g.value.enabled){const pe=L(_.value);pe?.removeEventListener("scroll",H),window?.removeEventListener("resize",Q)}window?.removeEventListener("keyup",de),window?.removeEventListener("keydown",ue)});const ne=Qn(i,"all",s.presetDates),fe=Qn(i,"input");Ln([a,u],()=>{v(a.value)},{deep:!0});const{openOnTop:oe,menuStyle:be,xCorrect:te,setMenuPosition:Ee,getScrollableParent:L,shadowRender:Z}=uN({menuRef:c,menuRefInner:d,inputRef:f,pickerWrapperRef:_,inline:g,emit:r,props:s,slots:i}),{inputValue:ae,internalModelValue:me,parseExternalModelValue:v,emitModelValue:J,formatInputValue:Ae,checkBeforeEmit:Ge}=sO(r,s,p),se=ye(()=>({dp__main:!0,dp__theme_dark:s.dark,dp__theme_light:!s.dark,dp__flex_display:g.value.enabled,"dp--flex-display-collapsed":S.value,dp__flex_display_with_input:g.value.input})),C=ye(()=>s.dark?"dp__theme_dark":"dp__theme_light"),A=ye(()=>s.teleport?{to:typeof s.teleport=="boolean"?"body":s.teleport,disabled:!s.teleport||g.value.enabled}:{}),V=ye(()=>({class:"dp__outer_menu_wrap"})),y=ye(()=>g.value.enabled&&(s.timePicker||s.monthPicker||s.yearPicker||s.quarterPicker)),q=()=>{var pe,Re;return((Re=(pe=f.value)==null?void 0:pe.$el)==null?void 0:Re.getBoundingClientRect())??{width:0,left:0,right:0}},H=()=>{o.value&&(w.value.closeOnScroll?Ze():Ee())},Q=()=>{var pe;o.value&&Ee();const Re=((pe=d.value)==null?void 0:pe.$el.getBoundingClientRect().width)??0;S.value=document.body.offsetWidth<=Re},de=pe=>{pe.key==="Tab"&&!g.value.enabled&&!s.teleport&&w.value.tabOutClosesMenu&&(_.value.contains(document.activeElement)||Ze()),D.value=pe.shiftKey},ue=pe=>{D.value=pe.shiftKey},le=()=>{!s.disabled&&!s.readonly&&(Z(z,$v,s),Ee(!1),o.value=!0,o.value&&r("open"),o.value||we(),v(s.modelValue))},ke=()=>{var pe,Re;ae.value="",we(),(pe=d.value)==null||pe.onValueCleared(),(Re=f.value)==null||Re.setParsedDate(null),r("update:model-value",null),r("update:model-timezone-value",null),r("cleared"),w.value.closeOnClearValue&&Ze()},x=()=>{const pe=me.value;return!pe||!Array.isArray(pe)&&ee(pe)?!0:Array.isArray(pe)?k.value.enabled||pe.length===2&&ee(pe[0])&&ee(pe[1])?!0:R.value.partialRange&&!s.timePicker?ee(pe[0]):!1:!1},re=()=>{Ge()&&x()?(J(),Ze()):r("invalid-select",me.value)},Ie=pe=>{Se(),J(),w.value.closeOnAutoApply&&!pe&&Ze()},Se=()=>{f.value&&b.value.enabled&&f.value.setParsedDate(me.value)},Fe=(pe=!1)=>{s.autoApply&&W(me.value)&&x()&&(R.value.enabled&&Array.isArray(me.value)?(R.value.partialRange||me.value.length===2)&&Ie(pe):Ie(pe))},we=()=>{b.value.enabled||(me.value=null)},Ze=(pe=!1)=>{var Re,xe;pe&&me.value&&w.value.setDateOnMenuClose&&re(),g.value.enabled||(o.value&&(o.value=!1,te.value=!1,$(!1),F(!1),U(),r("closed"),ae.value&&v(a.value)),we(),r("blur"),(xe=(Re=d.value)==null?void 0:Re.$el)==null||xe.remove())},pt=(pe,Re,xe=!1)=>{if(!pe){me.value=null;return}const Jn=Array.isArray(pe)?!pe.some(br=>!ee(br)):ee(pe),Cn=W(pe);Jn&&Cn?(O.value=!0,me.value=pe,Re?(P.value=xe,re(),r("text-submit")):s.autoApply&&Fe(),Fn().then(()=>{O.value=!1})):r("invalid-date",pe)},pn=()=>{s.autoApply&&W(me.value)&&J(),Se()},Vt=()=>o.value?Ze():le(),Xn=pe=>{me.value=pe},Br=()=>{b.value.enabled&&(p.value=!0,Ae()),r("focus")},Lt=()=>{if(b.value.enabled&&(p.value=!1,v(s.modelValue),P.value)){const pe=Sx(_.value,D.value);pe?.focus()}r("blur")},mn=pe=>{d.value&&d.value.updateMonthYear(0,{month:Mv(pe.month),year:Mv(pe.year)})},hs=pe=>{v(pe??s.modelValue)},G=(pe,Re)=>{var xe;(xe=d.value)==null||xe.switchView(pe,Re)},Te=(pe,Re)=>w.value.onClickOutside?w.value.onClickOutside(pe,Re):Ze(!0),Ne=(pe=0)=>{var Re;(Re=d.value)==null||Re.handleFlow(pe)},We=()=>c;return TN(c,f,pe=>Te(x,pe)),e({closeMenu:Ze,selectDate:re,clearValue:ke,openMenu:le,onScroll:H,formatInputValue:Ae,updateInternalModelValue:Xn,setMonthYear:mn,parseModel:hs,switchView:G,toggleMenu:Vt,handleFlow:Ne,getDpWrapMenuRef:We}),(pe,Re)=>(B(),X("div",{ref_key:"pickerWrapperRef",ref:_,class:Ye(se.value),"data-datepicker-instance":"","data-dp-mobile":N(K)},[it(yN,Qt({ref_key:"inputRef",ref:f,"input-value":N(ae),"onUpdate:inputValue":Re[0]||(Re[0]=xe=>Gt(ae)?ae.value=xe:null),"is-menu-open":o.value},pe.$props,{onClear:ke,onOpen:le,onSetInputDate:pt,onSetEmptyDate:N(J),onSelectDate:re,onToggle:Vt,onClose:Ze,onFocus:Br,onBlur:Lt,onRealBlur:Re[1]||(Re[1]=xe=>p.value=!1),onTextInput:Re[2]||(Re[2]=xe=>pe.$emit("text-input",xe))}),kn({_:2},[lt(N(fe),(xe,Jn)=>({name:xe,fn:Qe(Cn=>[Me(pe.$slots,xe,tn(Nn(Cn)))])}))]),1040,["input-value","is-menu-open","onSetEmptyDate"]),(B(),Xe(Ju(pe.teleport?cE:"div"),tn(Nn(A.value)),{default:Qe(()=>[it(xo,{name:N(I)(N(oe)),css:N(j)&&!N(g).enabled},{default:Qe(()=>[o.value?(B(),X("div",Qt({key:0,ref_key:"dpWrapMenuRef",ref:c},V.value,{class:{"dp--menu-wrapper":!N(g).enabled},style:N(g).enabled?void 0:N(be)}),[it($v,Qt({ref_key:"dpMenuRef",ref:d},pe.$props,{"internal-model-value":N(me),"onUpdate:internalModelValue":Re[3]||(Re[3]=xe=>Gt(me)?me.value=xe:null),class:{[C.value]:!0,"dp--menu-wrapper":pe.teleport},"open-on-top":N(oe),"no-overlay-focus":y.value,collapse:S.value,"get-input-rect":q,"is-text-input-date":O.value,onClosePicker:Ze,onSelectDate:re,onAutoApply:Fe,onTimeUpdate:pn,onFlowStep:Re[4]||(Re[4]=xe=>pe.$emit("flow-step",xe)),onUpdateMonthYear:Re[5]||(Re[5]=xe=>pe.$emit("update-month-year",xe)),onInvalidSelect:Re[6]||(Re[6]=xe=>pe.$emit("invalid-select",N(me))),onAutoApplyInvalid:Re[7]||(Re[7]=xe=>pe.$emit("invalid-select",xe)),onInvalidFixedRange:Re[8]||(Re[8]=xe=>pe.$emit("invalid-fixed-range",xe)),onRecalculatePosition:N(Ee),onTooltipOpen:Re[9]||(Re[9]=xe=>pe.$emit("tooltip-open",xe)),onTooltipClose:Re[10]||(Re[10]=xe=>pe.$emit("tooltip-close",xe)),onTimePickerOpen:Re[11]||(Re[11]=xe=>pe.$emit("time-picker-open",xe)),onTimePickerClose:Re[12]||(Re[12]=xe=>pe.$emit("time-picker-close",xe)),onAmPmChange:Re[13]||(Re[13]=xe=>pe.$emit("am-pm-change",xe)),onRangeStart:Re[14]||(Re[14]=xe=>pe.$emit("range-start",xe)),onRangeEnd:Re[15]||(Re[15]=xe=>pe.$emit("range-end",xe)),onDateUpdate:Re[16]||(Re[16]=xe=>pe.$emit("date-update",xe)),onInvalidDate:Re[17]||(Re[17]=xe=>pe.$emit("invalid-date",xe)),onOverlayToggle:Re[18]||(Re[18]=xe=>pe.$emit("overlay-toggle",xe)),onMenuBlur:Re[19]||(Re[19]=xe=>pe.$emit("blur"))}),kn({_:2},[lt(N(ne),(xe,Jn)=>({name:xe,fn:Qe(Cn=>[Me(pe.$slots,xe,tn(Nn({...Cn})))])}))]),1040,["internal-model-value","class","open-on-top","no-overlay-focus","collapse","is-text-input-date","onRecalculatePosition"])],16)):ce("",!0)]),_:3},8,["name","css"])]),_:3},16))],10,EN))}}),Mc=(()=>{const t=AN;return t.install=e=>{e.component("Vue3DatePicker",t)},t})(),IN=Object.freeze(Object.defineProperty({__proto__:null,default:Mc},Symbol.toStringTag,{value:"Module"}));Object.entries(IN).forEach(([t,e])=>{t!=="default"&&(Mc[t]=e)});const ai=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},jb=5,PN=jb*1024*1024,kN={components:{VueDatePicker:Mc},props:{isVisible:{type:Boolean,required:!0},applicant:{type:Object,required:!0},availablePositions:{type:Array,default:()=>[]}},data(){return{editedApplicant:{...this.applicant},newCvFile:null,cvUploadProgress:0,cvUploadError:null,interviewDate:""}},watch:{applicant:{handler(t){t?(this.editedApplicant={...t},this.editedApplicant.interviewDate&&typeof this.editedApplicant.interviewDate.toDate=="function"?this.editedApplicant.interviewDate=this.editedApplicant.interviewDate.toDate():this.editedApplicant.interviewDate=null):this.editedApplicant={id:null,name:"",email:"",positionId:"",status:"New",phoneNumber:"",cvUrl:null,interviewDate:null},this.newCvFile=null,this.cvUploadProgress=0,this.cvUploadError=null},deep:!0,immediate:!0}},methods:{closeModal(){this.$emit("close")},dpFormat(t){const e=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),r=t.getFullYear().toString().slice(-2),s=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");return`${e}/${n}/${r}, ${s}:${i}`},handleEditCvFileUpload(t){if(this.newCvFile=t.target.files[0],this.cvUploadError=null,this.cvUploadProgress=0,this.newCvFile){if(!this.newCvFile.type.match("image.*")&&!this.newCvFile.type.match("application/pdf")){this.cvUploadError="Only image (JPG, PNG, etc.) or PDF files are allowed.",this.newCvFile=null,t.target.value="";return}if(this.newCvFile.size>PN){this.cvUploadError=`File size exceeds the ${jb}MB limit.`,this.newCvFile=null,t.target.value="";return}}},async saveChanges(){if(!this.editedApplicant.name||!this.editedApplicant.email||!this.editedApplicant.positionId){alert("Name, Email, and Position are required.");return}let t=this.editedApplicant.cvUrl;const e=this.editedApplicant.cvUrl;if(this.cvUploadError=null,this.cvUploadProgress=0,this.newCvFile)try{const n=`cv_uploads/${this.editedApplicant.name.replace(/\s/g,"_")}_${Date.now()}_${this.newCvFile.name}`,r=Fu($u,n);if(await Kw(r,this.newCvFile),t=await Gw(r),console.log("New CV uploaded and URL obtained:",t),e)try{const i=new URL(e);let o=decodeURIComponent(i.pathname.split("/o/")[1].split("?")[0]);const a=Fu($u,o);await Qw(a),console.log("Old CV deleted successfully from Storage:",o)}catch(i){console.warn("Could not delete old CV from Storage (it might not exist or permissions issue):",i)}}catch(n){console.error("Error uploading new CV:",n),this.cvUploadError="Failed to upload new CV. Please try again.",alert("Failed to upload new CV. Please check console for details.");return}if(!this.editedApplicant.positionId){alert("Please select a position.");return}try{const n=this.availablePositions.find(i=>i.id===this.editedApplicant.positionId);if(!n){alert("Please select a valid position.");return}let r=null;this.editedApplicant.interviewDate instanceof Date&&!isNaN(this.editedApplicant.interviewDate.getTime())?r=_t.fromDate(this.editedApplicant.interviewDate):r=null;const s=Uo(qn,"applicants",this.editedApplicant.id);await G0(s,{name:this.editedApplicant.name,email:this.editedApplicant.email,positionId:this.editedApplicant.positionId,positionName:n.name,status:this.editedApplicant.status,phoneNumber:this.editedApplicant.phoneNumber,cvUrl:t,interviewDate:r}),this.$emit("save-success"),this.closeModal()}catch(n){console.error("Error updating document: ",n),alert("Failed to save changes. Please try again.")}}}},RN={class:"modal-content"},CN={class:"form-group"},SN={class:"form-group"},DN={class:"form-group"},MN=["value"],xN={key:0,class:"form-help"},ON={class:"form-group"},NN={class:"form-group"},VN={class:"form-group"},LN={key:0},FN=["href"],UN={key:1},$N={key:2,class:"upload-progress"},BN={key:3,class:"error-message"},jN={class:"form-group"},qN={class:"modal-actions"};function HN(t,e,n,r,s,i){const o=Es("VueDatePicker");return n.isVisible?(B(),X("div",{key:0,class:"modal-overlay",onClick:e[9]||(e[9]=Bt((...a)=>i.closeModal&&i.closeModal(...a),["self"]))},[M("div",RN,[M("h2",null," Edit Applicant: "+$e(s.editedApplicant.fullName||s.editedApplicant.name),1),M("form",{onSubmit:e[8]||(e[8]=Bt((...a)=>i.saveChanges&&i.saveChanges(...a),["prevent"]))},[M("div",CN,[e[10]||(e[10]=M("label",{for:"editName"},"Name:",-1)),Mt(M("input",{type:"text",id:"editName","onUpdate:modelValue":e[0]||(e[0]=a=>s.editedApplicant.name=a),required:""},null,512),[[sr,s.editedApplicant.name]])]),M("div",SN,[e[11]||(e[11]=M("label",{for:"editEmail"},"Email:",-1)),Mt(M("input",{type:"email",id:"editEmail","onUpdate:modelValue":e[1]||(e[1]=a=>s.editedApplicant.email=a),required:""},null,512),[[sr,s.editedApplicant.email]])]),M("div",DN,[e[13]||(e[13]=M("label",{for:"editPosition"},"Position Applied For:",-1)),Mt(M("select",{id:"editPosition","onUpdate:modelValue":e[2]||(e[2]=a=>s.editedApplicant.positionId=a),required:""},[e[12]||(e[12]=M("option",{value:"",disabled:""},"Select a position",-1)),(B(!0),X(Oe,null,lt(n.availablePositions,a=>(B(),X("option",{key:a.id,value:a.id},$e(a.name),9,MN))),128))],512),[[yo,s.editedApplicant.positionId]]),n.availablePositions.length===0?(B(),X("p",xN,' No positions available. Please add some via "Manage Positions" in the main menu. ')):ce("",!0)]),M("div",ON,[e[15]||(e[15]=M("label",{for:"editStatus"},"Status:",-1)),Mt(M("select",{id:"editStatus","onUpdate:modelValue":e[3]||(e[3]=a=>s.editedApplicant.status=a)},e[14]||(e[14]=[Xy('<option value="New" data-v-0ec24304>New</option><option value="Screening" data-v-0ec24304>Screening</option><option value="Interview Scheduled" data-v-0ec24304>Interview Scheduled</option><option value="Interviewed" data-v-0ec24304>Interviewed</option><option value="Offer Extended" data-v-0ec24304>Offer Extended</option><option value="Hired" data-v-0ec24304>Hired</option><option value="Rejected" data-v-0ec24304>Rejected</option>',7)]),512),[[yo,s.editedApplicant.status]])]),M("div",NN,[e[16]||(e[16]=M("label",{for:"editPhone"},"Phone Number:",-1)),Mt(M("input",{type:"tel",id:"editPhone","onUpdate:modelValue":e[4]||(e[4]=a=>s.editedApplicant.phoneNumber=a)},null,512),[[sr,s.editedApplicant.phoneNumber]])]),M("div",VN,[e[19]||(e[19]=M("label",{for:"editCv"},"Upload New CV (Image or PDF):",-1)),M("input",{type:"file",id:"editCv",onChange:e[5]||(e[5]=(...a)=>i.handleEditCvFileUpload&&i.handleEditCvFileUpload(...a)),accept:"image/*,application/pdf"},null,32),s.editedApplicant.cvUrl?(B(),X("p",LN,[e[17]||(e[17]=Un(" Current CV: ")),M("a",{href:s.editedApplicant.cvUrl,target:"_blank",rel:"noopener noreferrer"},"View Current CV",8,FN)])):ce("",!0),s.newCvFile?(B(),X("p",UN,[e[18]||(e[18]=Un(" New file selected: ")),M("strong",null,$e(s.newCvFile.name),1)])):ce("",!0),s.cvUploadProgress>0&&s.cvUploadProgress<100?(B(),X("p",$N," Uploading: "+$e(s.cvUploadProgress.toFixed(0))+"% ",1)):ce("",!0),s.cvUploadError?(B(),X("p",BN,$e(s.cvUploadError),1)):ce("",!0)]),M("div",jN,[e[20]||(e[20]=M("label",{for:"editInterviewDate"},"Interview Date:",-1)),it(o,{modelValue:s.editedApplicant.interviewDate,"onUpdate:modelValue":e[6]||(e[6]=a=>s.editedApplicant.interviewDate=a),teleport:!0,"enable-time-picker":!0,"month-change-on-scroll":!1,format:i.dpFormat,class:"form-input",uid:"editInterviewDate"},null,8,["modelValue","format"]),e[21]||(e[21]=M("small",null,"Select date and time.",-1))]),M("div",qN,[e[22]||(e[22]=M("button",{type:"submit",class:"save-btn"},"Save Changes",-1)),M("button",{type:"button",onClick:e[7]||(e[7]=(...a)=>i.closeModal&&i.closeModal(...a)),class:"cancel-btn"}," Cancel ")])],32)])])):ce("",!0)}const WN=ai(kN,[["render",HN],["__scopeId","data-v-0ec24304"]]),qb=5,zN=qb*1024*1024,YN={components:{VueDatePicker:Mc},props:{isVisible:{type:Boolean,required:!0},loggedInUser:{type:Object,default:null},availablePositions:{type:Array,default:()=>[]}},data(){return{applicantName:"",applicantEmail:"",positionApplied:"",status:"New",applicantPhone:"",cvFile:null,cvUploadProgress:0,cvUploadError:null,simulatedSubmitter:"HR_Manager_A",interviewDate:null,localAvailablePositions:[]}},watch:{availablePositions:{handler(t){console.log("AddApplicantModal: Prop 'availablePositions' updated:",t),this.localAvailablePositions=[...t],console.log("AddApplicantModal: 'localAvailablePositions' updated to:",this.localAvailablePositions)},deep:!0,immediate:!0},isVisible(t){t&&(this.localAvailablePositions=[...this.availablePositions],console.log("AddApplicantModal: Modal opened, 'localAvailablePositions' re-synced:",this.localAvailablePositions),this.resetForm())}},mounted(){console.log("AddApplicantModal: Mounted!"),console.log("AddApplicantModal: availablePositions on mount:",this.availablePositions)},unmounted(){console.log("AddApplicantModal: Unmounted!")},methods:{resetForm(){this.applicantName="",this.applicantEmail="",this.positionApplied="",this.status="New",this.applicantPhone="",this.cvFile=null,this.cvUploadProgress=0,this.cvUploadError=null,this.simulatedSubmitter="HR_Manager_A",this.interviewDate=null,this.localAvailablePositions=[]},closeModal(){this.resetForm(),this.$emit("close")},dpFormat(t){if(!t)return"";const e=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),r=t.getFullYear().toString().slice(-2),s=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");return`${e}/${n}/${r}, ${s}:${i}`},handleCvFileUpload(t){if(this.cvFile=t.target.files[0],this.cvUploadError=null,this.cvUploadProgress=0,this.cvFile){if(!this.cvFile.type.match("image.*")&&!this.cvFile.type.match("application/pdf")){this.cvUploadError="Only image (JPG, PNG, etc.) or PDF files are allowed.",this.cvFile=null,t.target.value="";return}if(this.cvFile.size>zN){this.cvUploadError=`File size exceeds the ${qb}MB limit.`,this.cvFile=null,t.target.value="";return}}},async handleAddApplicant(){if(!this.applicantName||!this.applicantEmail||!this.positionApplied){alert("Please fill in all required fields (Name, Email, Position).");return}if(!this.loggedInUser){alert("You must be logged in to add applicants.");return}let t=null;if(this.cvUploadError=null,this.cvUploadProgress=0,this.cvFile)try{const n=`cv_uploads/${this.applicantName.replace(/\s/g,"_")}_CV_${Date.now()}_${this.cvFile.name}`,r=Fu($u,n);await Kw(r,this.cvFile),t=await Gw(r),console.log("CV Download URL:",t)}catch(n){console.error("Error uploading CV:",n),this.cvUploadError="Failed to upload CV. Please try again.",alert("Failed to upload CV. Please try again.");return}const e=this.availablePositions.find(n=>n.id===this.positionApplied);if(!e){alert("Please select a valid position.");return}this.interviewDate instanceof Date&&!isNaN(this.interviewDate.getTime())?this.interviewDate=_t.fromDate(this.interviewDate):this.interviewDate=null;try{await Cf(Xr(qn,"applicants"),{name:this.applicantName,email:this.applicantEmail,positionId:this.positionApplied,positionName:e.name,status:this.status,phoneNumber:this.applicantPhone,cvUrl:t,submittedBy:this.simulatedSubmitter,addedByAuthUser:this.loggedInUser.email,timestamp:X0(),interviewDate:this.interviewDate}),this.$emit("applicant-added"),this.closeModal(),console.log("Applicant added successfully with CV!")}catch(n){console.error("Error adding applicant: ",n),alert("Failed to add applicant. Please try again.")}}}},KN={class:"modal-content"},GN={class:"form-group"},QN={class:"form-group"},XN={class:"form-group"},JN=["value"],ZN={key:0,class:"form-help"},eV={class:"form-group"},tV={class:"form-group"},nV={class:"form-group"},rV={key:0},sV={key:1,class:"upload-progress"},iV={key:2,class:"error-message"},oV={class:"form-group"},aV={class:"form-group"},lV={class:"modal-actions"};function uV(t,e,n,r,s,i){const o=Es("VueDatePicker");return n.isVisible?(B(),X("div",{key:0,class:"modal-overlay",onClick:e[9]||(e[9]=Bt((...a)=>i.closeModal&&i.closeModal(...a),["self"]))},[M("div",KN,[e[24]||(e[24]=M("h2",null,"Add New Applicant",-1)),M("form",{onSubmit:e[8]||(e[8]=Bt((...a)=>i.handleAddApplicant&&i.handleAddApplicant(...a),["prevent"]))},[M("div",GN,[e[10]||(e[10]=M("label",{for:"name"},"Name:",-1)),Mt(M("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>s.applicantName=a),required:""},null,512),[[sr,s.applicantName]])]),M("div",QN,[e[11]||(e[11]=M("label",{for:"email"},"Email:",-1)),Mt(M("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>s.applicantEmail=a),required:""},null,512),[[sr,s.applicantEmail]])]),M("div",XN,[e[13]||(e[13]=M("label",{for:"position"},"Position Applied For:",-1)),Mt(M("select",{id:"position","onUpdate:modelValue":e[2]||(e[2]=a=>s.positionApplied=a),required:""},[e[12]||(e[12]=M("option",{value:"",disabled:"",selected:""},"Select a position",-1)),(B(!0),X(Oe,null,lt(s.localAvailablePositions,a=>(B(),X("option",{key:a.id,value:a.id},$e(a.name),9,JN))),128))],512),[[yo,s.positionApplied]]),n.availablePositions.length===0?(B(),X("p",ZN,' No positions available. Please add some via "Manage Positions" in the main menu. ')):ce("",!0)]),M("div",eV,[e[15]||(e[15]=M("label",{for:"status"},"Status:",-1)),Mt(M("select",{id:"status","onUpdate:modelValue":e[3]||(e[3]=a=>s.status=a)},e[14]||(e[14]=[Xy('<option value="New" data-v-fc931fd2>New</option><option value="Screening" data-v-fc931fd2>Screening</option><option value="Interview Scheduled" data-v-fc931fd2>Interview Scheduled</option><option value="Interviewed" data-v-fc931fd2>Interviewed</option><option value="Offer Extended" data-v-fc931fd2>Offer Extended</option><option value="Hired" data-v-fc931fd2>Hired</option><option value="Rejected" data-v-fc931fd2>Rejected</option>',7)]),512),[[yo,s.status]])]),M("div",tV,[e[16]||(e[16]=M("label",{for:"applicantPhone"},"Phone Number:",-1)),Mt(M("input",{type:"tel",id:"applicantPhone","onUpdate:modelValue":e[4]||(e[4]=a=>s.applicantPhone=a)},null,512),[[sr,s.applicantPhone]])]),M("div",nV,[e[18]||(e[18]=M("label",{for:"applicantCv"},"Upload CV (Image or PDF):",-1)),M("input",{type:"file",id:"applicantCv",onChange:e[5]||(e[5]=(...a)=>i.handleCvFileUpload&&i.handleCvFileUpload(...a)),accept:"image/*,application/pdf"},null,32),s.cvFile?(B(),X("p",rV,[e[17]||(e[17]=Un(" Selected file: ")),M("strong",null,$e(s.cvFile.name),1)])):ce("",!0),s.cvUploadProgress>0&&s.cvUploadProgress<100?(B(),X("p",sV," Uploading: "+$e(s.cvUploadProgress.toFixed(0))+"% ",1)):ce("",!0),s.cvUploadError?(B(),X("p",iV,$e(s.cvUploadError),1)):ce("",!0)]),M("div",oV,[e[19]||(e[19]=M("label",{for:"interviewDate"},"Interview Date:",-1)),it(o,{modelValue:s.interviewDate,"onUpdate:modelValue":e[6]||(e[6]=a=>s.interviewDate=a),teleport:!0,"enable-time-picker":!0,"month-change-on-scroll":!1,format:i.dpFormat,class:"form-input",uid:"addInterviewDate"},null,8,["modelValue","format"]),e[20]||(e[20]=M("small",null,"Select date and time.",-1))]),M("div",aV,[e[21]||(e[21]=M("label",null,"Simulated Submitting User:",-1)),M("p",null,$e(s.simulatedSubmitter),1),e[22]||(e[22]=M("p",{class:"form-help"}," This field is for simulating submissions by a predefined user. ",-1))]),M("div",lV,[e[23]||(e[23]=M("button",{type:"submit",class:"save-btn"},"Add Applicant",-1)),M("button",{type:"button",onClick:e[7]||(e[7]=(...a)=>i.closeModal&&i.closeModal(...a)),class:"cancel-btn"}," Cancel ")])],32)])])):ce("",!0)}const cV=ai(YN,[["render",uV],["__scopeId","data-v-fc931fd2"]]),dV={props:{isVisible:{type:Boolean,required:!0},availablePositions:{type:Array,default:()=>[]},loggedInUser:{type:Object,default:null}},data(){return{newPositionName:"",addError:null}},methods:{closeModal(){this.newPositionName="",this.addError=null,this.$emit("close")},async addPosition(){if(this.addError=null,!this.newPositionName.trim()){this.addError="Position name cannot be empty.";return}if(this.availablePositions.some(t=>t.name.toLowerCase()===this.newPositionName.trim().toLowerCase())){this.addError="This position already exists.";return}try{await Cf(Xr(qn,"positions"),{name:this.newPositionName.trim(),createdAt:new Date}),this.newPositionName="",console.log("Position added!")}catch(t){console.error("Error adding position:",t),this.addError="Failed to add position. Please try again."}},async deletePosition(t){if(confirm("Are you sure you want to delete this position? This action cannot be undone."))try{const e=Xr(qn,"applicants"),n=ro(e,MR("positionId","==",t));if(!(await K0(n)).empty){alert("Cannot delete this position. There are applicants currently assigned to it.");return}const s=Uo(qn,"positions",t);console.error("Error deleting position:",t),await Du(s),alert("Position deleted successfully!"),this.$emit("close")}catch(e){console.error("Error deleting position:",e),alert("Failed to delete position. Please try again.")}}}},hV={class:"modal-content"},fV={class:"add-position-section"},pV={key:0,class:"error-message"},mV={class:"current-positions-section"},gV={key:0,class:"no-positions-message"},vV={key:1,class:"position-list"},yV=["onClick"],_V={class:"modal-actions"};function wV(t,e,n,r,s,i){return n.isVisible?(B(),X("div",{key:0,class:"modal-overlay",onClick:e[3]||(e[3]=Bt((...o)=>i.closeModal&&i.closeModal(...o),["self"]))},[M("div",hV,[e[8]||(e[8]=M("h2",null,"Manage Positions",-1)),M("div",fV,[e[5]||(e[5]=M("h3",null,"Add New Position",-1)),M("form",{onSubmit:e[1]||(e[1]=Bt((...o)=>i.addPosition&&i.addPosition(...o),["prevent"])),class:"add-position-form"},[Mt(M("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>s.newPositionName=o),placeholder:"e.g., Software Engineer, HR Manager",required:""},null,512),[[sr,s.newPositionName]]),e[4]||(e[4]=M("button",{type:"submit",class:"save-btn"},"Add Position",-1))],32),s.addError?(B(),X("p",pV,$e(s.addError),1)):ce("",!0)]),M("div",mV,[e[7]||(e[7]=M("h3",null,"Current Available Positions",-1)),n.availablePositions.length===0?(B(),X("p",gV," No positions defined yet. ")):(B(),X("ul",vV,[(B(!0),X(Oe,null,lt(n.availablePositions,o=>(B(),X("li",{key:o.id},[M("span",null,$e(o.name),1),M("button",{onClick:a=>i.deletePosition(o.id),class:"icon-button delete-btn"},e[6]||(e[6]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"delete-icon"},[M("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,yV)]))),128))]))]),M("div",_V,[M("button",{type:"button",onClick:e[2]||(e[2]=(...o)=>i.closeModal&&i.closeModal(...o)),class:"cancel-btn"}," Close ")])])])):ce("",!0)}const bV=ai(dV,[["render",wV],["__scopeId","data-v-5fc09e0b"]]),TV={name:"AddEditQuestionModal",props:{isVisible:{type:Boolean,required:!0},mode:{type:String,required:!0,validator:t=>["add","edit"].includes(t)},questionToEdit:{type:Object,default:null},availablePositions:{type:Array,default:()=>[]}},data(){return{localQuestionText:"",localSelectedPositionIds:[],localIsMandatory:!1}},watch:{isVisible(t){t&&this.populateForm()},questionToEdit:{immediate:!0,handler(){this.isVisible&&this.populateForm()}},mode(t){this.isVisible&&this.populateForm()}},methods:{populateForm(){this.mode==="edit"&&this.questionToEdit?(this.localQuestionText=this.questionToEdit.text||"",this.localSelectedPositionIds=Array.isArray(this.questionToEdit.positionIds)?[...this.questionToEdit.positionIds]:[],this.localIsMandatory=this.questionToEdit.isMandatory||!1):this.resetForm()},resetForm(){this.localQuestionText="",this.localSelectedPositionIds=[],this.localIsMandatory=!1},closeModal(){this.resetForm(),this.$emit("close")},async handleSubmit(){if(!this.localQuestionText.trim()){alert("Question text cannot be empty.");return}const t={text:this.localQuestionText.trim(),isMandatory:this.localIsMandatory,positionIds:this.localSelectedPositionIds.length>0?this.localSelectedPositionIds:[]};try{if(this.mode==="add")t.createdAt=X0(),await Cf(Xr(qn,"questions"),t),alert("Question added successfully!"),this.$emit("question-added");else if(this.mode==="edit"&&this.questionToEdit&&this.questionToEdit.id){const e=Uo(qn,"questions",this.questionToEdit.id);await G0(e,t),alert("Question updated successfully!"),this.$emit("question-updated")}else{console.error("Invalid mode or missing question ID for update."),alert("An error occurred. Please check the console.");return}this.closeModal()}catch(e){console.error(`Error ${this.mode}ing question:`,e),alert(`Failed to ${this.mode} question. Please try again.`)}}}},EV={class:"modal-content"},AV={class:"text-2xl font-bold mb-6 text-center text-blue-700"},IV={class:"form-group mb-4"},PV={class:"form-group mb-4"},kV={class:"grid grid-cols-1 md:grid-cols-2 gap-2 max-h-40 overflow-y-auto border p-3 rounded-md bg-gray-50"},RV=["id","value"],CV=["for"],SV={key:0,class:"text-gray-500 text-sm"},DV={class:"form-group mb-6 flex items-center"},MV={class:"flex items-center justify-between"},xV={type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full"};function OV(t,e,n,r,s,i){return n.isVisible?(B(),X("div",{key:0,class:"modal-overlay",onClick:e[5]||(e[5]=Bt((...o)=>i.closeModal&&i.closeModal(...o),["self"]))},[M("div",EV,[M("h2",AV,$e(n.mode==="add"?" (Add New Question)":" (Edit Question)"),1),M("form",{onSubmit:e[3]||(e[3]=Bt((...o)=>i.handleSubmit&&i.handleSubmit(...o),["prevent"]))},[M("div",IV,[e[6]||(e[6]=M("label",{for:"questionText",class:"block text-gray-700 text-sm font-bold mb-2"}," (Question Text):",-1)),Mt(M("textarea",{id:"questionText","onUpdate:modelValue":e[0]||(e[0]=o=>s.localQuestionText=o),rows:"4",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:""},null,512),[[sr,s.localQuestionText]])]),M("div",PV,[e[7]||(e[7]=M("label",{class:"block text-gray-700 text-sm font-bold mb-2"}," (Applicable Positions):",-1)),M("div",kV,[(B(!0),X(Oe,null,lt(n.availablePositions,o=>(B(),X("div",{key:o.id,class:"flex items-center"},[Mt(M("input",{type:"checkbox",id:`position-${o.id}`,value:o.id,"onUpdate:modelValue":e[1]||(e[1]=a=>s.localSelectedPositionIds=a),class:"form-checkbox h-4 w-4 text-blue-600 rounded-md"},null,8,RV),[[Ud,s.localSelectedPositionIds]]),M("label",{for:`position-${o.id}`,class:"ml-2 text-gray-700 text-sm"},$e(o.name),9,CV)]))),128)),n.availablePositions.length===0?(B(),X("div",SV,"  ")):ce("",!0)]),e[8]||(e[8]=M("p",{class:"text-xs text-gray-500 mt-1"}," (If nothing is selected, it applies to all positions.)",-1))]),M("div",DV,[Mt(M("input",{type:"checkbox",id:"isMandatory","onUpdate:modelValue":e[2]||(e[2]=o=>s.localIsMandatory=o),class:"form-checkbox h-4 w-4 text-blue-600 rounded-md"},null,512),[[Ud,s.localIsMandatory]]),e[9]||(e[9]=M("label",{for:"isMandatory",class:"ml-2 text-gray-700 text-sm font-bold"}," (Mandatory Question)",-1))]),M("div",MV,[M("button",xV,$e(n.mode==="add"?" (Add Question)":" (Update Question)"),1)])],32),M("button",{onClick:e[4]||(e[4]=(...o)=>i.closeModal&&i.closeModal(...o)),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mt-4 w-full"},"  (Cancel) ")])])):ce("",!0)}const NV=ai(TV,[["render",OV],["__scopeId","data-v-89b2e1dc"]]),VV={components:{AddEditQuestionModal:NV},props:{isVisible:{type:Boolean,required:!0},loggedInUser:{type:Object,default:null},availablePositions:{type:Array,default:()=>[]}},data(){return{questions:[],showAddEditQuestionSubModal:!1,selectedQuestionForSubModal:null,mode:"add"}},watch:{isVisible(t){t&&this.loggedInUser&&this.fetchQuestions()},loggedInUser(t){t?this.fetchQuestions():this.questions=[]}},methods:{closeModal(){this.$emit("close")},async fetchQuestions(){if(!this.loggedInUser){this.questions=[];return}try{const t=ro(Xr(qn,"questions"),to("createdAt","desc")),e=await K0(t);this.questions=e.docs.map(n=>({id:n.id,...n.data()})),console.log("ManageQuestionsModal: Questions fetched:",this.questions.length)}catch(t){console.error("ManageQuestionsModal: Error fetching questions:",t)}},getPositionName(t){const e=this.availablePositions.find(n=>n.id===t);return e?e.name:"Unknown Position"},openAddEditQuestionModal(t=null,e){this.selectedQuestionForSubModal=t,this.showAddEditQuestionSubModal=!0,this.mode=e},closeAddEditQuestionSubModal(){this.showAddEditQuestionSubModal=!1,this.selectedQuestionForSubModal=null},async handleQuestionSaved(){await this.fetchQuestions(),this.closeAddEditQuestionSubModal()},async deleteQuestion(t){if(confirm("Are you sure you want to delete this question? This action cannot be undone.")){if(!this.loggedInUser){alert("You must be logged in to delete questions.");return}try{const e=Uo(qn,"questions",t);await Du(e),alert("Question deleted successfully!"),await this.fetchQuestions()}catch(e){console.error("Error deleting question:",e),alert("Failed to delete question. Please try again.")}}}}},LV={class:"modal-content"},FV={class:"flex justify-end mb-4"},UV={key:0,class:"overflow-x-auto"},$V={class:"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm"},BV={class:"py-3 px-4 text-sm text-gray-700"},jV={class:"py-3 px-4 text-sm text-gray-700"},qV={key:0},HV={key:1,class:"text-gray-500"},WV={class:"py-3 px-4 text-sm text-gray-700 whitespace-nowrap"},zV=["onClick"],YV=["onClick"],KV={key:1,class:"text-center text-gray-500 py-8"},GV={class:"modal-actions mt-6"};function QV(t,e,n,r,s,i){const o=Es("AddEditQuestionModal");return n.isVisible?(B(),X("div",{key:0,class:"modal-overlay",onClick:e[2]||(e[2]=Bt((...a)=>i.closeModal&&i.closeModal(...a),["self"]))},[M("div",LV,[e[4]||(e[4]=M("h2",{class:"text-center text-blue-600 mb-6"},"Manage Interview Questions",-1)),M("div",FV,[M("button",{onClick:e[0]||(e[0]=a=>i.openAddEditQuestionModal(null,"add")),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-300"}," Add New Question ")]),s.questions.length>0?(B(),X("div",UV,[M("table",$V,[e[3]||(e[3]=M("thead",{class:"bg-gray-100"},[M("tr",null,[M("th",{class:"py-3 px-4 text-left text-sm font-medium text-gray-600 uppercase tracking-wider"},"Question"),M("th",{class:"py-3 px-4 text-left text-sm font-medium text-gray-600 uppercase tracking-wider"},"Linked Positions"),M("th",{class:"py-3 px-4 text-left text-sm font-medium text-gray-600 uppercase tracking-wider"},"Actions")])],-1)),M("tbody",null,[(B(!0),X(Oe,null,lt(s.questions,a=>(B(),X("tr",{key:a.id,class:"border-b border-gray-200 last:border-b-0 hover:bg-gray-50"},[M("td",BV,$e(a.text),1),M("td",jV,[a.positionIds&&a.positionIds.length>0?(B(),X("span",qV,$e(a.positionIds.map(u=>i.getPositionName(u)).join(", ")),1)):(B(),X("span",HV,"None"))]),M("td",WV,[M("button",{onClick:u=>i.openAddEditQuestionModal(a,"edit"),class:"text-blue-600 hover:text-blue-800 font-medium mr-2"},"Edit",8,zV),M("button",{onClick:u=>i.deleteQuestion(a.id),class:"text-red-600 hover:text-red-800 font-medium"},"Delete",8,YV)])]))),128))])])])):(B(),X("p",KV,"No questions added yet.")),M("div",GV,[M("button",{type:"button",onClick:e[1]||(e[1]=(...a)=>i.closeModal&&i.closeModal(...a)),class:"cancel-btn"},"Close")])]),it(o,{isVisible:s.showAddEditQuestionSubModal,availablePositions:n.availablePositions,loggedInUser:n.loggedInUser,questionToEdit:s.selectedQuestionForSubModal,mode:s.mode,onClose:i.closeAddEditQuestionSubModal,onQuestionSaved:i.handleQuestionSaved},null,8,["isVisible","availablePositions","loggedInUser","questionToEdit","mode","onClose","onQuestionSaved"])])):ce("",!0)}const XV=ai(VV,[["render",QV],["__scopeId","data-v-503e70a8"]]),JV={props:{isVisible:{type:Boolean,required:!0}},data(){return{authEmail:"",authPassword:"",authName:"",isLoginMode:!0,authError:null,passwordVisible:!1}},watch:{isVisible(t){t&&this.resetForm()}},methods:{resetForm(){this.authEmail="",this.authPassword="",this.authName="",this.authError=null,this.isLoginMode=!0,this.passwordVisible=!1},closeModal(){this.resetForm(),this.$emit("close")},toggleAuthMode(){this.isLoginMode=!this.isLoginMode,this.authError=null},togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible},async registerUser(){this.authError=null;try{const e=(await OC(Uu,this.authEmail,this.authPassword)).user;await LC(e,{displayName:this.authName}),alert("Registration successful! You are now logged in."),this.$emit("login-success"),this.closeModal()}catch(t){console.error("Error registering:",t.message),this.authError=t.message}},async loginUser(){this.authError=null;try{await NC(Uu,this.authEmail,this.authPassword),alert("Login successful!"),this.$emit("login-success"),this.closeModal()}catch(t){console.error("Error logging in:",t.message),this.authError=t.message}}}},ZV={class:"modal-content"},eL={key:0,class:"form-group"},tL={class:"form-group"},nL={class:"form-group"},rL={class:"input-with-button-wrapper"},sL=["type"],iL={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-gray-500"},oL={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-gray-500"},aL={type:"submit",class:"submit-btn"},lL={class:"toggle-mode"},uL={key:0,class:"error-message"};function cL(t,e,n,r,s,i){return n.isVisible?(B(),X("div",{key:0,class:"modal-overlay",onClick:e[6]||(e[6]=Bt((...o)=>i.closeModal&&i.closeModal(...o),["self"]))},[M("div",ZV,[M("h2",null,$e(s.isLoginMode?"Login":"Register"),1),M("form",{onSubmit:e[4]||(e[4]=Bt(o=>s.isLoginMode?i.loginUser():i.registerUser(),["prevent"]))},[s.isLoginMode?ce("",!0):(B(),X("div",eL,[e[7]||(e[7]=M("label",{for:"authName"},"Name:",-1)),Mt(M("input",{type:"text",id:"authName","onUpdate:modelValue":e[0]||(e[0]=o=>s.authName=o),required:""},null,512),[[sr,s.authName]])])),M("div",tL,[e[8]||(e[8]=M("label",{for:"authEmail"},"Email:",-1)),Mt(M("input",{type:"email",id:"authEmail","onUpdate:modelValue":e[1]||(e[1]=o=>s.authEmail=o),required:""},null,512),[[sr,s.authEmail]])]),M("div",nL,[e[11]||(e[11]=M("label",{for:"authPassword"},"Password:",-1)),M("div",rL,[Mt(M("input",{type:s.passwordVisible?"text":"password",id:"authPassword","onUpdate:modelValue":e[2]||(e[2]=o=>s.authPassword=o),required:"",autocomplete:"current-password",class:"password-input-field"},null,8,sL),[[N1,s.authPassword]]),M("button",{type:"button",onClick:e[3]||(e[3]=(...o)=>i.togglePasswordVisibility&&i.togglePasswordVisibility(...o)),class:"password-toggle-button"},[s.passwordVisible?(B(),X("svg",iL,e[9]||(e[9]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"},null,-1),M("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)]))):(B(),X("svg",oL,e[10]||(e[10]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a1.012 1.012 0 010 .639C20.773 16.338 16.756 19.5 12 19.5c-.993 0-1.953-.138-2.863-.395M9.75 18.802l-1.5-1.5M15.75 5.25l-1.5-1.5"},null,-1)])))])])]),M("button",aL,$e(s.isLoginMode?"Login":"Register"),1)],32),M("p",lL,[Un($e(s.isLoginMode?"Don't have an account?":"Already have an account?")+" ",1),M("span",{onClick:e[5]||(e[5]=(...o)=>i.toggleAuthMode&&i.toggleAuthMode(...o))},$e(s.isLoginMode?"Register here.":"Login here."),1)]),s.authError?(B(),X("p",uL,$e(s.authError),1)):ce("",!0)])])):ce("",!0)}const dL=ai(JV,[["render",cL],["__scopeId","data-v-cfb29a76"]]),hL={data(){return{selectedPosition:"",testPositions:[{id:"1",name:"Initial Position A"},{id:"2",name:"Initial Position B"}],nextId:3}},methods:{addTestPosition(){const t={id:String(this.nextId++),name:`New Test Position ${this.nextId-1}`};this.testPositions.push(t),console.log("Test positions updated:",this.testPositions)}},mounted(){console.log("ProblemSelectTest mounted, initial positions:",this.testPositions)},watch:{testPositions:{handler(t){console.log("ProblemSelectTest: testPositions updated via watch:",t)},deep:!0,immediate:!0}}},fL=["value"];function pL(t,e,n,r,s,i){return B(),X("div",null,[e[3]||(e[3]=M("h2",null,"Problem Select Test",-1)),Mt(M("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.selectedPosition=o)},[e[2]||(e[2]=M("option",{value:"",disabled:"",selected:""},"Select a position (Test)",-1)),(B(!0),X(Oe,null,lt(s.testPositions,o=>(B(),X("option",{key:o.id,value:o.name},$e(o.name),9,fL))),128))],512),[[yo,s.selectedPosition]]),M("p",null,"Selected Test Position: "+$e(s.selectedPosition),1),M("button",{onClick:e[1]||(e[1]=(...o)=>i.addTestPosition&&i.addTestPosition(...o))},"Add Another Test Position")])}const mL=ai(hL,[["render",pL]]),gL="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20640%20512'%3e%3c!--!Font%20Awesome%20Free%206.7.2%20by%20@fontawesome%20-%20https://fontawesome.com%20License%20-%20https://fontawesome.com/license/free%20Copyright%202025%20Fonticons,%20Inc.--%3e%3cpath%20d='M224%20256A128%20128%200%201%200%20224%200a128%20128%200%201%200%200%20256zm-45.7%2048C79.8%20304%200%20383.8%200%20482.3C0%20498.7%2013.3%20512%2029.7%20512l293.1%200c-3.1-8.8-3.7-18.4-1.4-27.8l15-60.1c2.8-11.3%208.6-21.5%2016.8-29.7l40.3-40.3c-32.1-31-75.7-50.1-123.9-50.1l-91.4%200zm435.5-68.3c-15.6-15.6-40.9-15.6-56.6%200l-29.4%2029.4%2071%2071%2029.4-29.4c15.6-15.6%2015.6-40.9%200-56.6l-14.4-14.4zM375.9%20417c-4.1%204.1-7%209.2-8.4%2014.9l-15%2060.1c-1.4%205.5%20.2%2011.2%204.2%2015.2s9.7%205.6%2015.2%204.2l60.1-15c5.6-1.4%2010.8-4.3%2014.9-8.4L576.1%20358.7l-71-71L375.9%20417z'/%3e%3c/svg%3e",vL="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20448%20512'%3e%3c!--!Font%20Awesome%20Free%206.7.2%20by%20@fontawesome%20-%20https://fontawesome.com%20License%20-%20https://fontawesome.com/license/free%20Copyright%202025%20Fonticons,%20Inc.--%3e%3cpath%20d='M135.2%2017.7L128%2032%2032%2032C14.3%2032%200%2046.3%200%2064S14.3%2096%2032%2096l384%200c17.7%200%2032-14.3%2032-32s-14.3-32-32-32l-96%200-7.2-14.3C307.4%206.8%20296.3%200%20284.2%200L163.8%200c-12.1%200-23.2%206.8-28.6%2017.7zM416%20128L32%20128%2053.2%20467c1.6%2025.3%2022.6%2045%2047.9%2045l245.8%200c25.3%200%2046.3-19.7%2047.9-45L416%20128z'/%3e%3c/svg%3e",yL="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20384%20512'%3e%3c!--!Font%20Awesome%20Free%206.7.2%20by%20@fontawesome%20-%20https://fontawesome.com%20License%20-%20https://fontawesome.com/license/free%20Copyright%202025%20Fonticons,%20Inc.--%3e%3cpath%20d='M192%200c-41.8%200-77.4%2026.7-90.5%2064L64%2064C28.7%2064%200%2092.7%200%20128L0%20448c0%2035.3%2028.7%2064%2064%2064l256%200c35.3%200%2064-28.7%2064-64l0-320c0-35.3-28.7-64-64-64l-37.5%200C269.4%2026.7%20233.8%200%20192%200zm0%2064a32%2032%200%201%201%200%2064%2032%2032%200%201%201%200-64zM105.8%20229.3c7.9-22.3%2029.1-37.3%2052.8-37.3l58.3%200c34.9%200%2063.1%2028.3%2063.1%2063.1c0%2022.6-12.1%2043.5-31.7%2054.8L216%20328.4c-.2%2013-10.9%2023.6-24%2023.6c-13.3%200-24-10.7-24-24l0-13.5c0-8.6%204.6-16.5%2012.1-20.8l44.3-25.4c4.7-2.7%207.6-7.7%207.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3%200c-3.4%200-6.4%202.1-7.5%205.3l-.4%201.2c-4.4%2012.5-18.2%2019-30.6%2014.6s-19-18.2-14.6-30.6l.4-1.2zM160%20416a32%2032%200%201%201%2064%200%2032%2032%200%201%201%20-64%200z'/%3e%3c/svg%3e",_L="/assets/logo2-DeHUMvCq.png",wL={name:"App",components:{EditApplicantModal:WN,AddApplicantModal:cV,ManagePositionsModal:bV,ManageQuestionsModal:XV,LoginModal:dL,ProblemSelectTest:mL},data(){return{loggedInUser:null,showLoginModal:!1,initialAuthCheckComplete:!1,applicantName:"",applicantEmail:"",positionApplied:"",status:"New",applicantPhone:"",cvFile:null,cvUploadProgress:0,cvUploadError:null,applicants:[],simulatedSubmitter:"HR_Manager_A",showEditModal:!1,selectedApplicant:null,showAddApplicantModal:!1,showMenu:!1,showManagePositionsModal:!1,availablePositions:[],unsubscribePositions:null,showManageQuestionsModal:!1,InterviewIcon:yL,EditIcon:gL,DeleteIcon:vL,Logo:_L}},mounted(){this.setupAuthListener()},beforeUnmount(){this.unsubscribeApplicantListener&&this.unsubscribeApplicantListener(),this.unsubscribePositions&&this.unsubscribePositions(),this.unsubscribeQuestions&&this.unsubscribeQuestions()},methods:{sanitizeDisplayValue(t){return typeof t=="string"?t.replace(/<!--.*?-->/g,"").replace(/[<>]/g,"").trim():t||""},sanitizeAttribute(t){return typeof t=="string"?t.replace(/<!--.*?-->/g,"").replace(/[<>"']/g,"").replace(/[\r\n\t]/g," ").trim():t},setupAuthListener(){$C(Uu,t=>{this.loggedInUser=t,t?(console.log("User logged in:",t.displayName),this.startApplicantListener(),this.setupQuestionsListener(),this.setupPositionsListener()):(console.log("User logged out."),this.loggedInUser=null,this.applicants=[],this.positions=[],this.questions=[],this.unsubscribeApplicantListener&&(this.unsubscribeApplicantListener(),this.unsubscribeApplicantListener=null),this.unsubscribePositions&&(this.unsubscribePositions(),this.unsubscribePositions=null),this.unsubscribeQuestions&&(this.unsubscribeQuestions(),this.unsubscribeQuestions=null),this.initialAuthCheckComplete&&this.openLoginModal())})},openLoginModal(){this.showLoginModal=!0,this.showMenu=!1},handleLoginSuccess(){this.showLoginModal=!1},openManageQuestionsModal(){this.showManageQuestionsModal=!0},closeManageQuestionsModal(){this.showManageQuestionsModal=!1},setupPositionsListener(){this.unsubscribePositions&&this.unsubscribePositions();const t=Xr(qn,"positions"),e=ro(t,to("name"));this.unsubscribePositions=$l(e,n=>{const r=[];n.forEach(s=>{r.push({id:s.id,...s.data()})}),this.availablePositions=r,console.log("App.vue: Available positions fetched:",this.availablePositions)},n=>{console.error("Error fetching available positions:",n)})},setupQuestionsListener(){if(this.unsubscribeQuestions&&this.unsubscribeQuestions(),!this.loggedInUser){this.questions=[];return}const t=Xr(qn,"questions"),e=ro(t,to("createdAt","desc"));this.unsubscribeQuestions=$l(e,n=>{this.questions=n.docs.map(r=>({id:r.id,...r.data()})),console.log("App.vue: Questions fetched by listener:",this.questions.length)},n=>{console.error("Error fetching questions via listener:",n)})},async logoutUser(){try{await BC(Uu),alert("Logged out successfully!"),this.showMenu=!1,this.showLoginModal=!0}catch(t){console.error("Error logging out:",t.message)}},fetchApplicants(){if(!this.loggedInUser){this.applicants=[];return}const t=Xr(qn,"applicants"),e=ro(t,to("interviewDate","asc"),to("timestamp","desc"));$l(e,n=>{this.applicants=n.docs.map(r=>({id:r.id,...r.data()})),console.log("Applicants fetched:",this.applicants.length)})},startApplicantListener(){this.unsubscribeApplicantListener&&this.unsubscribeApplicantListener();const t=Xr(qn,"applicants"),e=ro(t,to("timestamp","desc"));this.unsubscribeApplicantListener=$l(e,n=>{this.applicants=n.docs.map(r=>({id:r.id,...r.data()}))},n=>{console.error("Error fetching applicants: ",n)})},formatTimestamp(t){if(t&&t.toDate){const e=t.toDate(),n={year:"2-digit",month:"2-digit",day:"2-digit"},r={hour:"2-digit",minute:"2-digit",hour12:!1},s=e.toLocaleDateString("en-US",n),i=e.toLocaleTimeString("ja-JP",r);return`${s}, ${i}`}return"N/A"},toggleMenu(){this.showMenu=!this.showMenu},openEditModal(t){this.selectedApplicant={...t},this.showEditModal=!0,console.log("Opening modal for:",t.id)},closeEditModal(){this.showEditModal=!1,this.selectedApplicant=null,console.log("Closing modal.")},handleSaveSuccess(){console.log("Applicant saved successfully."),this.fetchApplicants()},openManagePositionsModal(){this.showManagePositionsModal=!0,this.toggleMenu()},closeManagePositionsModal(){this.showManagePositionsModal=!1},async deleteApplicant(t){if(confirm("Are you sure you want to delete this applicant? This will also delete their associated CV file."))try{const e=Uo(qn,"applicants",t),n=await VR(e);if(!n.exists()){console.warn("Applicant document not found, cannot delete CV from storage."),await Du(e),console.log("Applicant document deleted (no CV found).");return}const s=n.data().cvUrl;if(s)try{const i=new URL(s);let o=decodeURIComponent(i.pathname.split("/o/")[1].split("?")[0]);const a=Fu($u,o);await Qw(a),console.log("CV file deleted from Storage:",o)}catch(i){console.warn("Could not delete CV file from Storage (it might not exist or permissions issue):",i)}await Du(e),console.log("Applicant record deleted successfully from Firestore!")}catch(e){console.error("Error deleting applicant or CV: ",e),alert("Failed to delete applicant or associated CV. Please try again.")}}}},bL={id:"app"},TL={class:"app-header"},EL=["src"],AL={key:0,class:"auth-info"},IL={key:1,class:"auth-info"},PL={class:"menu-header"},kL={class:"menu-list"},RL={key:0},CL={class:"container"},SL={class:"table-controls"},DL=["disabled"],ML={class:"applicant-list-section"},xL={key:0},OL={class:"responsive-hide"},NL={class:"responsive-hide"},VL={class:"responsive-hide"},LL={class:"responsive-hide"},FL=["href"],UL={key:1},$L=["onClick"],BL=["src"],jL=["onClick"],qL=["src"],HL=["onClick"],WL=["src"],zL={key:1,class:"no-applicants-message",width:"300px"};function YL(t,e,n,r,s,i){const o=Es("AddApplicantModal"),a=Es("EditApplicantModal"),u=Es("ManagePositionsModal"),c=Es("ManageQuestionsModal"),d=Es("LoginModal");return B(),X("div",bL,[M("header",TL,[M("img",{src:s.Logo,alt:"Logo",class:"logo",style:{width:"100px"}},null,8,EL),s.loggedInUser?(B(),X("div",AL,[M("span",null,[e[12]||(e[12]=Un(" ")),e[13]||(e[13]=M("br",null,null,-1)),M("strong",null,$e(i.sanitizeDisplayValue(s.loggedInUser.displayName)||i.sanitizeDisplayValue(s.loggedInUser.email)),1)]),M("button",{onClick:e[0]||(e[0]=(...f)=>i.logoutUser&&i.logoutUser(...f)),class:"logout-btn"},"Logout")])):(B(),X("div",IL,e[14]||(e[14]=[M("span",null,"",-1)]))),s.loggedInUser?(B(),X("button",{key:2,onClick:e[1]||(e[1]=(...f)=>i.toggleMenu&&i.toggleMenu(...f)),class:"menu-toggle-btn"},e[15]||(e[15]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"menu-icon"},[M("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})],-1)]))):ce("",!0)]),s.showMenu?(B(),X("div",{key:0,class:"menu-overlay",onClick:e[2]||(e[2]=(...f)=>i.toggleMenu&&i.toggleMenu(...f))})):ce("",!0),M("nav",{class:Ye(["side-menu",{"is-open":s.showMenu}])},[M("div",PL,[e[17]||(e[17]=M("h3",null,"Menu",-1)),M("button",{onClick:e[3]||(e[3]=(...f)=>i.toggleMenu&&i.toggleMenu(...f)),class:"close-menu-btn"},e[16]||(e[16]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"close-icon"},[M("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))]),M("ul",kL,[M("li",null,[s.availablePositions.length>0?(B(),X("a",{key:0,href:"#",onClick:e[4]||(e[4]=Bt(f=>{s.showAddApplicantModal=!0,i.toggleMenu()},["prevent"]))},"")):ce("",!0)]),M("li",null,[M("a",{href:"#",onClick:e[5]||(e[5]=Bt(f=>i.toggleMenu(),["prevent"]))},"")]),M("li",null,[M("a",{href:"#",onClick:e[6]||(e[6]=Bt(f=>i.openManagePositionsModal(),["prevent"]))},"")]),M("li",null,[M("a",{href:"#",onClick:e[7]||(e[7]=Bt(f=>i.openManageQuestionsModal(),["prevent"]))},"")]),s.loggedInUser?(B(),X("li",RL,[M("a",{href:"#",onClick:e[8]||(e[8]=Bt((...f)=>i.logoutUser&&i.logoutUser(...f),["prevent"]))},"Logout")])):ce("",!0)])],2),M("div",CL,[s.loggedInUser?(B(),X(Oe,{key:0},[M("div",SL,[M("button",{onClick:e[9]||(e[9]=f=>s.showAddApplicantModal=!0),disabled:s.availablePositions.length===0,class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-300"},"  ",8,DL)]),M("section",ML,[e[19]||(e[19]=M("h2",null,"",-1)),s.applicants.length>0?(B(),X("table",xL,[e[18]||(e[18]=M("thead",null,[M("tr",null,[M("th",null,""),M("th",null,""),M("th",{class:"responsive-hide"},""),M("th",null,""),M("th",null,""),M("th",{class:"responsive-hide"},""),M("th",{class:"responsive-hide"},""),M("th",{class:"responsive-hide"},""),M("th",null,"Actions")])],-1)),M("tbody",null,[(B(!0),X(Oe,null,lt(s.applicants,f=>(B(),X("tr",{key:f.id},[M("td",null,$e(i.formatTimestamp(f.interviewDate)),1),M("td",null,$e(f.fullName||f.name),1),M("td",OL,$e(f.email),1),M("td",null,$e(f.positionName),1),M("td",null,$e(f.status),1),M("td",NL,$e(f.submittedBy),1),M("td",VL,$e(i.formatTimestamp(f.timestamp)),1),M("td",LL,[f.cvUrl?(B(),X("a",{key:0,href:f.cvUrl,target:"_blank",rel:"noopener noreferrer",class:"cv-link"},"View CV",8,FL)):(B(),X("span",UL,"N/A"))]),M("td",null,[M("button",{onClick:p=>i.openEditModal(f),class:"icon-button interview-btn"},[M("img",{src:s.InterviewIcon,alt:"Interview",class:"icon"},null,8,BL)],8,$L),M("button",{onClick:p=>i.openEditModal(f),class:"icon-button edit-btn"},[M("img",{src:s.EditIcon,alt:"Edit",class:"icon"},null,8,qL)],8,jL),M("button",{onClick:p=>i.deleteApplicant(f.id),class:"icon-button delete-btn",style:{"margin-left":"0px"}},[M("img",{src:s.DeleteIcon,alt:"Delete",class:"icon"},null,8,WL)],8,HL)])]))),128))])])):(B(),X("p",zL,"  "))])],64)):ce("",!0)]),s.loggedInUser&&s.showAddApplicantModal?(B(),Xe(o,{key:1,"is-visible":s.showAddApplicantModal,"logged-in-user":s.loggedInUser,"available-positions":s.availablePositions,onClose:e[10]||(e[10]=f=>s.showAddApplicantModal=!1),onApplicantAdded:i.fetchApplicants},null,8,["is-visible","logged-in-user","available-positions","onApplicantAdded"])):ce("",!0),s.loggedInUser&&s.showEditModal&&s.selectedApplicant?(B(),Xe(a,{key:2,"is-visible":s.showEditModal,applicant:s.selectedApplicant,"available-positions":s.availablePositions,onClose:i.closeEditModal,onSaveSuccess:i.handleSaveSuccess},null,8,["is-visible","applicant","available-positions","onClose","onSaveSuccess"])):ce("",!0),s.loggedInUser&&s.showManagePositionsModal?(B(),Xe(u,{key:3,"is-visible":s.showManagePositionsModal,"available-positions":s.availablePositions,"logged-in-user":s.loggedInUser,onClose:i.closeManagePositionsModal},null,8,["is-visible","available-positions","logged-in-user","onClose"])):ce("",!0),it(c,{isVisible:s.showManageQuestionsModal,loggedInUser:s.loggedInUser,availablePositions:s.availablePositions,onClose:i.closeManageQuestionsModal},null,8,["isVisible","loggedInUser","availablePositions","onClose"]),it(d,{isVisible:s.showLoginModal,onClose:e[11]||(e[11]=f=>s.showLoginModal=!1),onLoginSuccess:i.handleLoginSuccess},null,8,["isVisible","onLoginSuccess"])])}const KL=ai(wL,[["render",YL]]),GL=j1(KL);GL.mount("#app");
